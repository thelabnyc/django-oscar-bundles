{"version":3,"file":"bundles.js","mappings":";;;;;;;;;;;;;;;;;CAAA;AAG0B;AACoB;AACY;AAoD1D,MAAMG,IAAI,GAAG,SAAAA,CAAA;EACT,MAAMC,IAAI,GAAGC,QAAQ,CAACC,aAAa,CAAC,oBAAoB,CAAmB;EAC3E,MAAMC,kBAAkB,GAAGH,IAAI,CAACI,OAAO,CAACC,kBAAkB,IAAI,EAAE;EAChE,MAAMC,cAAc,GAAGN,IAAI,CAACI,OAAO,CAACG,cAAc,IAAI,EAAE;EACxD,MAAMC,iBAAiB,GAAGR,IAAI,CAACI,OAAO,CAACK,iBAAiB,IAAI,EAAE;EAC9D,MAAMC,8BAA8B,GAChCV,IAAI,CAACI,OAAO,CAACO,8BAA8B,IAAI,EAAE;EACrD,MAAMC,yBAAyB,GAC3BZ,IAAI,CAACI,OAAO,CAACS,yBAAyB,IAAI,EAAE;EAChD,MAAMC,oCAAoC,GACtCd,IAAI,CAACI,OAAO,CAACW,oCAAoC,IAAI,EAAE;EAC3D,MAAMC,IAAI,GAAGnB,4DAAU,CAACG,IAAI,CAAC;EAC7BgB,IAAI,CAACC,MAAM,cACPrB,0DAAA,CAACE,iEAAgB;IACbK,kBAAkB,EAAEA,kBAAkB;IACtCG,cAAc,EAAEA,cAAc;IAC9BE,iBAAiB,EAAEA,iBAAiB;IACpCE,8BAA8B,EAAEA,8BAA8B;IAC9DE,yBAAyB,EAAEA,yBAAyB;IACpDE,oCAAoC,EAChCA;EAAoC,EAE1C,CACL;AACL,CAAC;AAEDf,IAAI,EAAE;;;;;;;;;;;;;;;;;;;;;;;;ACnFoB;AACF;AACQ;AAQV;AAOgD;AACJ;AACA;AAEjC;AAEjCqB,gEAAmB,CAAC,oBAAoB,CAAC;AAEzC,MAAMW,WAAW,GAAG;EAChBC,OAAO,EAAE;IACLC,eAAe,EAAE,uBAAuB;IACxCC,MAAM,EAAE;GACX;EACDC,OAAO,EAAE;IACLC,GAAG,EAAE,KAAK;IACVC,IAAI,EAAE,KAAK;IACXC,KAAK,EAAE,MAAM;IACbC,MAAM,EAAE,MAAM;IACdC,WAAW,EAAE,MAAM;IACnBC,SAAS,EAAE,uBAAuB;IAClCC,QAAQ,EAAE,OAAO;IACjBC,QAAQ,EAAE,QAAQ;IAClBC,SAAS,EAAE;;CAElB;AA8BD,MAAM9C,gBAAiB,SAAQF,wDAA+B;EAA9DkD,YAAA;;IAGI,KAAAC,KAAK,GAAW;MACZC,iBAAiB,EAAE,EAAE;MACrBC,MAAM,EAAE,EAAE;MACVC,QAAQ,EAAE,EAAE;MACZC,MAAM,EAAE,EAAE;MACVC,UAAU,EAAE,EAAE;MACdC,aAAa,EAAE,IAAI;MACnBC,aAAa,EAAE,KAAK;MACpBC,QAAQ,EAAE,KAAK;MACfC,SAAS,EAAE,IAAI;MACfC,UAAU,EAAE;KACf;IAEgB,KAAAC,kBAAkB,GAAIC,IAAY,IAAI;MACnD,IAAI,CAACC,QAAQ,CAAC;QACVR,UAAU,EAAEO;OACf,CAAC;IACN,CAAC;IAEgB,KAAAE,QAAQ,GAAIC,CAAgC,IAAI;MAC7DA,CAAC,CAACC,cAAc,EAAE;MAClB,IAAI,CAACC,eAAe,EAAE;IAC1B,CAAC;IAEgB,KAAAC,eAAe,GAAIC,KAAmB,IAAI;MACvD,IAAI,CAACN,QAAQ,CAAC;QACVP,aAAa,EAAEa,KAAK,CAACC,EAAE;QACvBV,UAAU,EAAE,EAAE;QACdH,aAAa,EAAE;OAClB,CAAC;IACN,CAAC;IAEgB,KAAAc,YAAY,GAAG,MAAK;MACjC,IAAI,CAACR,QAAQ,CAAC;QACVP,aAAa,EAAE,IAAI;QACnBI,UAAU,EAAE,EAAE;QACdH,aAAa,EAAE;OAClB,CAAC;IACN,CAAC;IAEgB,KAAAe,iBAAiB,GAAUC,IAAkB,IAAIC,gDAAA;MAC9D,IAAI,CAACX,QAAQ,CAAC;QAAEL,QAAQ,EAAE;MAAI,CAAE,CAAC;MACjC,IAAI;QACA,MAAM9B,2DAAe,CAAC,IAAI,CAAC+C,KAAK,CAAClE,cAAc,EAAEgE,IAAI,CAAC;QACtD,MAAM,IAAI,CAACG,QAAQ,EAAE;QACrB,IAAI,CAACb,QAAQ,CAAC;UAAEL,QAAQ,EAAE;QAAK,CAAE,CAAC;QAClC,IAAI,CAACa,YAAY,EAAE;MACvB,CAAC,CAAC,OAAOM,GAAG,EAAE;QACV,IAAI,CAACd,QAAQ,CAAC;UACVL,QAAQ,EAAE,KAAK;UACf;UACAE,UAAU,EAAGiB,GAAW,CAACC,QAAQ,CAACC;SACrC,CAAC;MACN;IACJ,CAAC;IAEgB,KAAAC,mBAAmB,GAAUP,IAAkB,IAAIC,gDAAA;MAChE,MAAM7C,6DAAiB,CAAC,IAAI,CAAC8C,KAAK,CAAClE,cAAc,EAAEgE,IAAI,CAAC;MACxD,OAAO,IAAI,CAACG,QAAQ,EAAE;IAC1B,CAAC;EA4ML;EA1MIK,iBAAiBA,CAAA;IACb,IAAI,CAACL,QAAQ,EAAE,CAACM,KAAK,CAAEL,GAAG,IAAI;MAC1BM,OAAO,CAACC,KAAK,CAACP,GAAG,CAAC;IACtB,CAAC,CAAC;EACN;EAEcD,QAAQA,CAAA;;MAClB,IAAI,CAACb,QAAQ,CAAC;QAAEJ,SAAS,EAAE;MAAI,CAAE,CAAC;MAClC,MAAM0B,OAAO,GAAGC,OAAO,CAACC,GAAG,CAAC,CACxB/D,gEAAoB,CAAC,IAAI,CAACmD,KAAK,CAACrE,kBAAkB,CAAC,EACnDmB,4DAAgB,CAAC,IAAI,CAACkD,KAAK,CAAClE,cAAc,CAAC,EAC3CiB,wDAAY,CAAC,IAAI,CAACiD,KAAK,CAAC9D,8BAA8B,CAAC,EACvDc,sDAAU,CAAC,IAAI,CAACgD,KAAK,CAAC1D,oCAAoC,CAAC,CAC9D,CAAC;MACF,MAAM,CAACuE,OAAO,EAAEpC,MAAM,EAAEC,QAAQ,EAAEC,MAAM,CAAC,GAAG,MAAM+B,OAAO;MACzD,IAAI,CAACI,oBAAoB,CAACD,OAAO,CAAC;MAClC,IAAI,CAACE,SAAS,CAACtC,MAAM,CAAC;MACtB,IAAI,CAACuC,WAAW,CAACtC,QAAQ,CAAC;MAC1B,IAAI,CAACuC,SAAS,CAACtC,MAAM,CAAC;MACtB,IAAI,CAACS,QAAQ,CAAC;QAAEJ,SAAS,EAAE;MAAK,CAAE,CAAC;IACvC,CAAC;;EAEOQ,eAAeA,CAAA;IACnB,IAAI,CAACJ,QAAQ,CAAC;MACVP,aAAa,EAAE,IAAI;MACnBI,UAAU,EAAE,EAAE;MACdH,aAAa,EAAE;KAClB,CAAC;EACN;EAEQiC,SAASA,CAACtC,MAAsB;IACpC;IACA,IAAI,CAACyC,GAAG,GAAGvE,2CAAI,CAAC;MACZ,IAAI,CAACwE,GAAG,CAAC,IAAI,CAAC;MACd,IAAI,CAACC,KAAK,CAAC,MAAM,CAAC;MAClB,IAAI,CAACA,KAAK,CAAC,aAAa,CAAC;MACzB3C,MAAM,CAAC4C,OAAO,CAAEC,CAAC,IAAI;QACjB,IAAI,CAACC,GAAG,CAACD,CAAC,CAAC;MACf,CAAC,CAAC;IACN,CAAC,CAAC;IACF;IACA,IAAI,CAAClC,QAAQ,CAAC;MACVX,MAAM,EAAEA;KACX,CAAC;EACN;EAEQqC,oBAAoBA,CAACD,OAA0B;IACnD,IAAI,CAACzB,QAAQ,CAAC;MACVZ,iBAAiB,EAAEqC;KACtB,CAAC;EACN;EAEQG,WAAWA,CAACtC,QAAoB;IACpC,IAAI,CAACU,QAAQ,CAAC;MACVV,QAAQ,EAAEA;KACb,CAAC;EACN;EAEQuC,SAASA,CAACtC,MAAgB;IAC9B,IAAI,CAACS,QAAQ,CAAC;MACVT,MAAM,EAAEA;KACX,CAAC;EACN;EAEQ6C,gBAAgBA,CAAC5C,UAAkB;IACvC,IAAI,CAAC,IAAI,CAACsC,GAAG,EAAE;MACX,OAAO,EAAE;IACb;IACA,MAAMO,OAAO,GAAG,IAAI,CAACP,GAAG,CAACQ,MAAM,CAAC9C,UAAU,CAAC;IAC3C,OAAO6C,OAAO,CACTE,GAAG,CAAEC,MAAM,IAAI;MACZ,MAAMC,GAAG,GAAGC,QAAQ,CAACF,MAAM,CAACT,GAAG,EAAE,EAAE,CAAC;MACpC,OAAO,IAAI,CAAC5C,KAAK,CAACE,MAAM,CAACsD,IAAI,CAAET,CAAC,IAAI;QAChC,OAAOA,CAAC,CAAC3B,EAAE,KAAKkC,GAAG;MACvB,CAAC,CAAC;IACN,CAAC,CAAC,CACDG,MAAM,CAAEtC,KAAK,IAA2B;MACrC,OAAO,CAAC,CAACA,KAAK;IAClB,CAAC,CAAC;EACV;EAEQuC,cAAcA,CAAA;IAClB,MAAMrD,UAAU,GAAG,IAAI,CAACL,KAAK,CAACK,UAAU,CAACsD,IAAI,EAAE;IAC/C,MAAMT,OAAO,GAAG7C,UAAU,GACpB,IAAI,CAAC4C,gBAAgB,CAAC5C,UAAU,CAAC,GACjC,IAAI,CAACL,KAAK,CAACE,MAAM;IACvB,MAAM0D,eAAe,GAAG,CAAC;IACzB,IAAI,IAAI,CAAC5D,KAAK,CAACS,SAAS,EAAE;MACtB,oBACI5D,0DAAA,0BACIA,0DAAA;QAAIgH,OAAO,EAAED;MAAe,gBACxB/G,0DAAA,aAAKiH,OAAO,CAAC,UAAU,CAAC,CAAM,CAC7B,CACJ;IAEb;IACA,IAAIZ,OAAO,CAACa,MAAM,IAAI,CAAC,EAAE;MACrB,MAAMC,GAAG,GAAG3D,UAAU,GAChB4D,WAAW,CACPH,OAAO,CACH,mDAAmD,CACtD,EACD;QAAEzD,UAAU,EAAEA;MAAU,CAAE,EAC1B,IAAI,CACP,GACDyD,OAAO,CAAC,yBAAyB,CAAC;MACxC,oBACIjH,0DAAA,0BACIA,0DAAA;QAAIgH,OAAO,EAAED;MAAe,GAAGI,GAAG,CAAM,CACvC;IAEb;IACA,OAAOd,OAAO,CAACE,GAAG,CAAEjC,KAAK,IAAI;MACzB,oBACItE,0DAAA,CAACiC,sEAAmB;QAChBoF,GAAG,EAAE,GAAG/C,KAAK,CAACC,EAAE,EAAE;QAClBnB,iBAAiB,EAAE,IAAI,CAACD,KAAK,CAACC,iBAAiB;QAC/CkB,KAAK,EAAEA,KAAK;QACZhB,QAAQ,EAAE,IAAI,CAACH,KAAK,CAACG,QAAQ;QAC7BC,MAAM,EAAE,IAAI,CAACJ,KAAK,CAACI,MAAM;QACzB+D,MAAM,EAAE,IAAI,CAACjD,eAAe;QAC5BkD,QAAQ,EAAGC,EAAE,IAAI;UACb,IAAI,CAACvC,mBAAmB,CAACuC,EAAE,CAAC,CAACrC,KAAK,CAAEL,GAAG,IAAI;YACvCM,OAAO,CAACC,KAAK,CAACP,GAAG,CAAC;UACtB,CAAC,CAAC;QACN;MAAC,EACH;IAEV,CAAC,CAAC;EACN;EAEQ2C,cAAcA,CAAA;IAClB,MAAMnD,KAAK,GAAG,IAAI,CAACnB,KAAK,CAACE,MAAM,CAACsD,IAAI,CAAET,CAAC,IAAI;MACvC,OAAOA,CAAC,CAAC3B,EAAE,KAAK,IAAI,CAACpB,KAAK,CAACM,aAAa;IAC5C,CAAC,CAAC;IACF,oBACIzD,0DAAA,CAACwB,oDAAK;MACFkG,YAAY,EAAET,OAAO,CAAC,mBAAmB,CAAC;MAC1CU,KAAK,EAAExF,WAAW;MAClByF,MAAM,EAAE,IAAI,CAACzE,KAAK,CAACO;IAAa,gBAEhC1D,0DAAA,CAACgC,sEAAmB;MAChBoB,iBAAiB,EAAE,IAAI,CAACD,KAAK,CAACC,iBAAiB;MAC/CkB,KAAK,EAAEA,KAAK,IAAI,IAAI;MACpBhB,QAAQ,EAAE,IAAI,CAACH,KAAK,CAACG,QAAQ;MAC7BC,MAAM,EAAE,IAAI,CAACJ,KAAK,CAACI,MAAM;MACzBI,QAAQ,EAAE,IAAI,CAACR,KAAK,CAACQ,QAAQ;MAC7BkE,MAAM,EAAE,IAAI,CAAC1E,KAAK,CAACU,UAAU;MAC7BiE,QAAQ,EAAE,IAAI,CAACtD,YAAY;MAC3BuD,MAAM,EAAGP,EAAE,IAAI;QACX,IAAI,CAAC/C,iBAAiB,CAAC+C,EAAE,CAAC,CAACrC,KAAK,CAAEL,GAAG,IAAI;UACrCM,OAAO,CAACC,KAAK,CAACP,GAAG,CAAC;QACtB,CAAC,CAAC;MACN;IAAC,EACH,CACE;EAEhB;EAEAzD,MAAMA,CAAA;IACF,oBACIrB,0DAAA,2BACIA,0DAAA;MAAKgI,SAAS,EAAC;IAAa,gBACxBhI,0DAAA;MACIgI,SAAS,EAAC,6BAA6B;MACvCC,OAAO,EAAE,IAAI,CAAChE;IAAQ,gBAEtBjE,0DAAA;MAAGgI,SAAS,EAAC;IAAoB,EAAK,EAAC,GAAG,EACzCf,OAAO,CAAC,yBAAyB,CAAC,CACnC,eACJjH,0DAAA,aAAKiH,OAAO,CAAC,eAAe,CAAC,CAAM,CACjC,eACNjH,0DAAA;MAAKgI,SAAS,EAAC;IAAc,gBACzBhI,0DAAA,0BACIA,0DAAA;MAAGgI,SAAS,EAAC;IAAe,EAAK,EAChCf,OAAO,CAAC,sBAAsB,CAAC,CAC/B,CACH,eACNjH,0DAAA,CAAC+B,wEAAqB;MAClByB,UAAU,EAAE,IAAI,CAACL,KAAK,CAACK,UAAU;MACjC0E,QAAQ,EAAE,IAAI,CAACpE;IAAkB,EACnC,eAEF9D,0DAAA;MAAOgI,SAAS,EAAC;IAAoC,gBACjDhI,0DAAA,6BACIA,0DAAA,0BACIA,0DAAA,aAAKiH,OAAO,CAAC,MAAM,CAAC,CAAM,eAC1BjH,0DAAA,aAAKiH,OAAO,CAAC,MAAM,CAAC,CAAM,eAC1BjH,0DAAA,aAAKiH,OAAO,CAAC,OAAO,CAAC,CAAM,eAC3BjH,0DAAA,aAAKiH,OAAO,CAAC,UAAU,CAAC,CAAM,eAC9BjH,0DAAA,aAAKiH,OAAO,CAAC,aAAa,CAAC,CAAM,eACjCjH,0DAAA,aAAKiH,OAAO,CAAC,eAAe,CAAC,CAAM,eACnCjH,0DAAA,aAAKiH,OAAO,CAAC,SAAS,CAAC,CAAM,CAC5B,EACJ,IAAI,CAACJ,cAAc,EAAE,CAClB,CACJ,EAEP,IAAI,CAACY,cAAc,EAAE,CACpB;EAEd;;AAGJ,+DAAevH,gBAAgB;;;;;;;;;;;;;;;;;;;ACnVL;AAUwD;AACK;AAIvB;AAIR;AAC4B;AAEhD;AAmCpC,MAAMsI,oBAAoB,GACtBC,IAAmE,IAC9B;EACrC,OAAO,CAAC,CAACA,IAAI,IAAKA,IAAoC,CAACvB,MAAM,KAAKwB,SAAS;AAC/E,CAAC;AAED,MAAMC,eAAe,GACjBF,IAAmE,IAC7C;EACtB,OAAO,CAAC,CAACA,IAAI,IAAI,CAACD,oBAAoB,CAACC,IAAI,CAAC;AAChD,CAAC;AAED,MAAMzG,mBAAoB,SAAQhC,4DAAmC;EAGjEkD,YAAY0B,KAAa;IACrB,KAAK,CAACA,KAAK,CAAC;IA+DC,KAAA0C,MAAM,GACnBpD,CAEC,IACD;MACA,MAAM2E,IAAI,GAAG3E,CAAC,CAAC4E,aAAa,CAACD,IAAoB;MACjD,MAAME,KAAK,GAAG7E,CAAC,CAAC4E,aAAa,CAACC,KAAK;MACnC,IAAI,CAAC/E,QAAQ,CAAEb,KAAK,IAAI;QACpB,OAAA6F,MAAA,CAAAC,MAAA,CAAAD,MAAA,CAAAC,MAAA,KAAY9F,KAAK;UAAE,CAAC0F,IAAI,GAAGE;QAAK;MACpC,CAAC,CAAC;IACN,CAAC;IAEgB,KAAAG,aAAa,GAAIhF,CAAoC,IAAI;MACtE,IAAI,CAACA,CAAC,CAAC4E,aAAa,CAACK,KAAK,EAAE;QACxB;MACJ;MACA,MAAMC,IAAI,GAAGlF,CAAC,CAAC4E,aAAa,CAACK,KAAK,CAAC,CAAC,CAAC;MACrC,IAAI,CAACnF,QAAQ,CAAC;QACVqF,KAAK,EAAED;OACV,CAAC;IACN,CAAC;IAEgB,KAAAE,cAAc,GAAG,CAC9BT,IAA8C,EAC9CJ,IAAmE,KACnE;MACA,IAAIc,OAAoC;MACxC,IAAI,CAACd,IAAI,EAAE;QACPc,OAAO,GAAG,EAAE;MAChB,CAAC,MAAM,IAAKd,IAAoC,CAACvB,MAAM,KAAKwB,SAAS,EAAE;QACnEa,OAAO,GAAG,CAACd,IAAoB,CAAC;MACpC,CAAC,MAAM;QACHc,OAAO,GAAGd,IAAmC;MACjD;MACA,IAAI,CAACzE,QAAQ,CAAEb,KAAK,IAAI;QACpB,OAAA6F,MAAA,CAAAC,MAAA,CAAAD,MAAA,CAAAC,MAAA,KACO9F,KAAK;UACR,CAAC0F,IAAI,GAAGU,OAAO,CAAChD,GAAG,CAAEiD,CAAC,IAAI;YACtB,OAAOA,CAAC,CAACT,KAAK;UAClB,CAAC;QAAC;MAEV,CAAC,CAAC;IACN,CAAC;IAEgB,KAAAU,oBAAoB,GAAG,CACpCC,OAAiB,EACjBC,UAAkB,EAClBlB,IAAmE,KACnE;MACA,IAAImB,MAAM,GAAwB,IAAI;MACtC,IAAIjB,eAAe,CAACF,IAAI,CAAC,EAAE;QACvBmB,MAAM,GAAGnB,IAAI;MACjB,CAAC,MAAM,IAAID,oBAAoB,CAACC,IAAI,CAAC,EAAE;QACnC,MAAM,IAAIoB,KAAK,CACX,yDAAyD,CAC5D;MACL;MACA,IAAI,CAAC7F,QAAQ,CAAEb,KAAK,IAAI;QACpB,MAAM2G,YAAY,GAAAd,MAAA,CAAAC,MAAA,KACX9F,KAAK,CAAC2G,YAAY,CACxB;QACD,IAAIF,MAAM,EAAE;UACR,IAAI,CAACE,YAAY,CAACJ,OAAO,CAACnF,EAAE,CAAC,EAAE;YAC3BuF,YAAY,CAACJ,OAAO,CAACnF,EAAE,CAAC,GAAG,EAAE;UACjC;UACAuF,YAAY,CAACJ,OAAO,CAACnF,EAAE,CAAC,CAACoF,UAAU,CAAC,GAAAX,MAAA,CAAAC,MAAA,CAAAD,MAAA,CAAAC,MAAA,KAC5Ba,YAAY,CAACJ,OAAO,CAACnF,EAAE,CAAC,CAACoF,UAAU,CAAC,IAAI,EAAG;YAC/CI,OAAO,EAAEH,MAAM,CAACb,KAAK;YACrBiB,QAAQ,EAAE;UAAC,EACd;QACL,CAAC,MAAM;UACHF,YAAY,CAACJ,OAAO,CAACnF,EAAE,CAAC,CAAC0F,MAAM,CAACN,UAAU,EAAE,CAAC,CAAC;UAC9CG,YAAY,CAACJ,OAAO,CAACnF,EAAE,CAAC,GAAGuF,YAAY,CAACJ,OAAO,CAACnF,EAAE,CAAC,CAACqC,MAAM,CACrDsD,CAAC,IAAK,CAAC,CAACA,CAAC,CACb;UACD,IAAIJ,YAAY,CAACJ,OAAO,CAACnF,EAAE,CAAC,CAAC2C,MAAM,IAAI,CAAC,EAAE;YACtC,OAAO4C,YAAY,CAACJ,OAAO,CAACnF,EAAE,CAAC;UACnC;QACJ;QACA,OAAAyE,MAAA,CAAAC,MAAA,CAAAD,MAAA,CAAAC,MAAA,KAAY9F,KAAK;UAAE2G,YAAY,EAAEA;QAAY;MACjD,CAAC,CAAC;IACN,CAAC;IAEgB,KAAAK,4BAA4B,GAAG,CAC5CT,OAAiB,EACjBC,UAAkB,EAClBlB,IAAmE,KACnE;MACA,IAAImB,MAAM,GAAiB;QAAEb,KAAK,EAAE,CAAC;QAAEqB,KAAK,EAAE;MAAG,CAAE;MACnD,IAAIzB,eAAe,CAACF,IAAI,CAAC,EAAE;QACvBmB,MAAM,GAAGnB,IAAI;MACjB,CAAC,MAAM,IAAID,oBAAoB,CAACC,IAAI,CAAC,EAAE;QACnC,MAAM,IAAIoB,KAAK,CACX,2DAA2D,CAC9D;MACL;MACA,IAAI,CAAC7F,QAAQ,CAAEb,KAAK,IAAI;QACpB,MAAM2G,YAAY,GAAAd,MAAA,CAAAC,MAAA,KACX9F,KAAK,CAAC2G,YAAY,CACxB;QACD,IACIA,YAAY,CAACJ,OAAO,CAACnF,EAAE,CAAC,IACxBuF,YAAY,CAACJ,OAAO,CAACnF,EAAE,CAAC,CAACoF,UAAU,CAAC,EACtC;UACEG,YAAY,CAACJ,OAAO,CAACnF,EAAE,CAAC,CAACoF,UAAU,CAAC,GAAAX,MAAA,CAAAC,MAAA,CAAAD,MAAA,CAAAC,MAAA,KAC7Ba,YAAY,CAACJ,OAAO,CAACnF,EAAE,CAAC,CAACoF,UAAU,CAAC;YACvCK,QAAQ,EAAEJ,MAAM,CAACb;UAAK,EACzB;QACL;QACA,OAAAC,MAAA,CAAAC,MAAA,CAAAD,MAAA,CAAAC,MAAA,KAAY9F,KAAK;UAAE2G,YAAY,EAAEA;QAAY;MACjD,CAAC,CAAC;IACN,CAAC;IAEgB,KAAAO,sBAAsB,GAAG,CACtCX,OAAiB,EACjBY,aAAuB,EACvB7B,IAAmE,KACnE;MACA,IAAIc,OAAoC;MACxC,IAAI,CAACd,IAAI,EAAE;QACPc,OAAO,GAAG,EAAE;MAChB,CAAC,MAAM,IAAIZ,eAAe,CAACF,IAAI,CAAC,EAAE;QAC9Bc,OAAO,GAAG,CAACd,IAAI,CAAC;MACpB,CAAC,MAAM;QACHc,OAAO,GAAGd,IAAI;MAClB;MACA,MAAM8B,GAAG,GAAGhB,OAAO,CAAChD,GAAG,CAAEiD,CAAC,IAAI;QAC1B,OAAOA,CAAC,CAACT,KAAK;MAClB,CAAC,CAAC;MACF,IAAI,CAAC/E,QAAQ,CAAEb,KAAK,IAAI;QACpB,MAAMqH,MAAM,GAAG,CAACrH,KAAK,CAACsH,cAAc,CAACf,OAAO,CAACnF,EAAE,CAAC,IAAI,EAAE,EAAEqC,MAAM,CACzD8D,GAAG,IAAI;UACJ,MAAMC,UAAU,GAAG,IAAI,CAACC,UAAU,CAACF,GAAG,CAAC;UACvC,OACIC,UAAU,CAACpG,EAAE,KAAK+F,aAAa,CAAC/F,EAAE,IAClCoG,UAAU,CAACE,MAAM,KAAKP,aAAa,CAAC/F,EAAE;QAE9C,CAAC,CACJ;QACD,MAAMuG,MAAM,GAAGN,MAAM,CAACO,MAAM,CAACR,GAAG,CAAC,CAAC3D,MAAM,CAAC,CAACrC,EAAE,EAAEyG,CAAC,EAAEC,IAAI,KAAI;UACrD,OAAOA,IAAI,CAACC,OAAO,CAAC3G,EAAE,CAAC,KAAKyG,CAAC;QACjC,CAAC,CAAC;QACF,MAAMP,cAAc,GAAAzB,MAAA,CAAAC,MAAA,CAAAD,MAAA,CAAAC,MAAA,KACb9F,KAAK,CAACsH,cAAc;UACvB,CAACf,OAAO,CAACnF,EAAE,GAAGuG;QAAM,EACvB;QACD,OAAA9B,MAAA,CAAAC,MAAA,CAAAD,MAAA,CAAAC,MAAA,KAAY9F,KAAK;UAAEsH,cAAc,EAAEA;QAAc;MACrD,CAAC,CAAC;IACN,CAAC;IAEgB,KAAA3C,QAAQ,GAAI5D,CAAgC,IAAI;MAC7DA,CAAC,CAACC,cAAc,EAAE;MAClB,IAAI,CAACS,KAAK,CAACkD,QAAQ,EAAE;IACzB,CAAC;IAEgB,KAAAC,MAAM,GAAI7D,CAAmC,IAAI;MAC9DA,CAAC,CAACC,cAAc,EAAE;MAElB,MAAMO,IAAI,GAAiB;QACvBH,EAAE,EAAE,IAAI,CAACK,KAAK,CAACN,KAAK,GAAG,IAAI,CAACM,KAAK,CAACN,KAAK,CAACC,EAAE,GAAG,IAAI;QACjD4G,WAAW,EAAE,IAAI,CAAChI,KAAK,CAACiI,UAAU;QAClCvC,IAAI,EAAE,IAAI,CAAC1F,KAAK,CAAC0F,IAAI;QACrBwC,WAAW,EAAE,IAAI,CAAClI,KAAK,CAACkI,WAAW;QACnCC,QAAQ,EAAE,IAAI,CAACnI,KAAK,CAACmI,QAAQ;QAC7BC,SAAS,EAAE,IAAI,CAACpI,KAAK,CAACqI,QAAQ;QAC9BnC,KAAK,EAAE,IAAI,CAACzE,KAAK,CAACN,KAAK,GAAG,IAAI,CAACM,KAAK,CAACN,KAAK,CAAC+E,KAAK,GAAG,EAAE;QACrDoC,QAAQ,EAAE,IAAI,CAACtI,KAAK,CAACuI,UAAU,GAAG,IAAI,GAAG,IAAI,CAACvI,KAAK,CAACkG,KAAK;QACzDqC,UAAU,EAAE,IAAI,CAACvI,KAAK,CAACuI,UAAU;QACjCC,kBAAkB,EAAE,IAAI,CAACxI,KAAK,CAACyI,iBAAiB;QAChDC,iBAAiB,EAAE,IAAI,CAAC1I,KAAK,CAAC2I,gBAAgB;QAC9CC,gBAAgB,EAAE,EAAE;QACpBC,yBAAyB,EAAE;OAC9B;MAEDhD,MAAM,CAACiD,IAAI,CAAC,IAAI,CAAC9I,KAAK,CAAC2G,YAAY,CAAC,CAAC7D,OAAO,CAAEiG,GAAG,IAAI;QACjD,MAAMC,SAAS,GAAGzF,QAAQ,CAACwF,GAAG,EAAE,EAAE,CAAC;QACnC,MAAME,QAAQ,GAAG,IAAI,CAACxB,UAAU,CAACuB,SAAS,CAAC;QAC3C,IACIzH,IAAI,CAACiH,kBAAkB,CAACT,OAAO,CAACkB,QAAQ,CAAC7H,EAAE,CAAC,KAAK,CAAC,CAAC,KAClD,CAAC6H,QAAQ,CAACvB,MAAM,IACbnG,IAAI,CAACiH,kBAAkB,CAACT,OAAO,CAACkB,QAAQ,CAACvB,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,EAC9D;UACE;QACJ;QACA,MAAMf,YAAY,GAAG,IAAI,CAAC3G,KAAK,CAAC2G,YAAY,CAACqC,SAAS,CAAC;QACvDrC,YAAY,CAAC7D,OAAO,CAACoG,IAAA,IAA0B;UAAA,IAAzB;YAAEtC,OAAO;YAAEC;UAAQ,CAAE,GAAAqC,IAAA;UACvC,IAAI,CAACtC,OAAO,IAAI,CAACC,QAAQ,EAAE;YACvB;UACJ;UACA,IAAIsC,iBAAiB,GACjB5D,SAAS;UACb,IAAI,IAAI,CAAC9D,KAAK,CAACN,KAAK,EAAE;YAClBgI,iBAAiB,GACb,IAAI,CAAC1H,KAAK,CAACN,KAAK,CAAC0H,yBAAyB,CAACrF,IAAI,CAAE4F,CAAC,IAAI;cAClD,OACIA,CAAC,CAACC,kBAAkB,KAAKL,SAAS,IAClCI,CAAC,CAACE,eAAe,KAAK1C,OAAO;YAErC,CAAC,CAAC;UACV;UACArF,IAAI,CAACsH,yBAAyB,CAACU,IAAI,CAAC;YAChCnI,EAAE,EAAE+H,iBAAiB,GAAGA,iBAAiB,CAAC/H,EAAE,GAAG,IAAI;YACnDiI,kBAAkB,EAAEL,SAAS;YAC7BM,eAAe,EAAE1C,OAAO;YACxBC,QAAQ,EAAEA;WACb,CAAC;QACN,CAAC,CAAC;MACN,CAAC,CAAC;MAEFhB,MAAM,CAACiD,IAAI,CAAC,IAAI,CAAC9I,KAAK,CAACsH,cAAc,CAAC,CAACxE,OAAO,CAAEiG,GAAG,IAAI;QACnD,MAAMC,SAAS,GAAGzF,QAAQ,CAACwF,GAAG,EAAE,EAAE,CAAC;QACnC,MAAME,QAAQ,GAAG,IAAI,CAACxB,UAAU,CAACuB,SAAS,CAAC;QAC3C,IACIzH,IAAI,CAACiH,kBAAkB,CAACT,OAAO,CAACkB,QAAQ,CAAC7H,EAAE,CAAC,KAAK,CAAC,CAAC,KAClD,CAAC6H,QAAQ,CAACvB,MAAM,IACbnG,IAAI,CAACiH,kBAAkB,CAACT,OAAO,CAACkB,QAAQ,CAACvB,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,EAC9D;UACE;QACJ;QAEA,IAAIyB,iBAAiB,GAAgC5D,SAAS;QAC9D,IAAI,IAAI,CAAC9D,KAAK,CAACN,KAAK,EAAE;UAClBgI,iBAAiB,GAAG,IAAI,CAAC1H,KAAK,CAACN,KAAK,CAACyH,gBAAgB,CAACpF,IAAI,CACrD4F,CAAC,IAAI;YACF,OAAOA,CAAC,CAACC,kBAAkB,KAAKL,SAAS;UAC7C,CAAC,CACJ;QACL;QAEA,MAAMQ,aAAa,GAAG,IAAI,CAACxJ,KAAK,CAACsH,cAAc,CAAC0B,SAAS,CAAC,CAACvF,MAAM,CAC5DgG,GAAG,IAAI;UACJ,MAAMC,QAAQ,GAAG,IAAI,CAACjC,UAAU,CAACgC,GAAG,CAAC;UACrC,OACIlI,IAAI,CAACmH,iBAAiB,CAACX,OAAO,CAAC2B,QAAQ,CAACtI,EAAE,CAAC,KAAK,CAAC,CAAC,IACjDsI,QAAQ,CAAChC,MAAM,IACZnG,IAAI,CAACmH,iBAAiB,CAACX,OAAO,CAAC2B,QAAQ,CAAChC,MAAM,CAAC,KAC3C,CAAC,CAAE;QAEnB,CAAC,CACJ;QAED,IAAI8B,aAAa,CAACzF,MAAM,IAAI,CAAC,EAAE;UAC3B;QACJ;QAEAxC,IAAI,CAACqH,gBAAgB,CAACW,IAAI,CAAC;UACvBnI,EAAE,EAAE+H,iBAAiB,GAAGA,iBAAiB,CAAC/H,EAAE,GAAG,IAAI;UACnDiI,kBAAkB,EAAEL,SAAS;UAC7BW,kBAAkB,EAAEH;SACvB,CAAC;MACN,CAAC,CAAC;MAEF,IAAI,CAAC/H,KAAK,CAACmD,MAAM,CAACrD,IAAI,CAAC;IAC3B,CAAC;IAEgB,KAAAqI,YAAY,GAAI7I,CAAoC,IAAI;MACrE,IAAI,CAACF,QAAQ,CAAC;QACV0H,UAAU,EAAExH,CAAC,CAAC4E,aAAa,CAACkE;OAC/B,CAAC;IACN,CAAC;IAEgB,KAAApC,UAAU,GAAIqC,SAAiB,IAAI;MAChD,OAAO,IAAI,CAACC,UAAU,CAACD,SAAS,CAAC;IACrC,CAAC;IApUG;IACA,MAAMnD,YAAY,GAA2B,EAAE;IAC/C,MAAMqD,mBAAmB,GAAGvI,KAAK,CAACN,KAAK,GACjCM,KAAK,CAACN,KAAK,CAAC0H,yBAAyB,GACrC,EAAE;IACRmB,mBAAmB,CAAClH,OAAO,CAAEmH,MAAM,IAAI;MACnC,IAAI,CAACtD,YAAY,CAACsD,MAAM,CAACZ,kBAAkB,CAAC,EAAE;QAC1C1C,YAAY,CAACsD,MAAM,CAACZ,kBAAkB,CAAC,GAAG,EAAE;MAChD;MACA1C,YAAY,CAACsD,MAAM,CAACZ,kBAAkB,CAAC,CAACE,IAAI,CAAC;QACzC3C,OAAO,EAAEqD,MAAM,CAACX,eAAe;QAC/BzC,QAAQ,EAAEoD,MAAM,CAACpD;OACpB,CAAC;IACN,CAAC,CAAC;IAEF;IACA,MAAMS,cAAc,GAA6B,EAAE;IACnD,MAAM4C,eAAe,GAAGzI,KAAK,CAACN,KAAK,GAAGM,KAAK,CAACN,KAAK,CAACyH,gBAAgB,GAAG,EAAE;IACvEsB,eAAe,CAACpH,OAAO,CAAEmH,MAAM,IAAI;MAC/B,IAAI,CAAC3C,cAAc,CAAC2C,MAAM,CAACZ,kBAAkB,CAAC,EAAE;QAC5C/B,cAAc,CAAC2C,MAAM,CAACZ,kBAAkB,CAAC,GAAG,EAAE;MAClD;MACA/B,cAAc,CAAC2C,MAAM,CAACZ,kBAAkB,CAAC,GAAG/B,cAAc,CACtD2C,MAAM,CAACZ,kBAAkB,CAC5B,CACIzB,MAAM,CAACqC,MAAM,CAACN,kBAAkB,CAAC,CACjClG,MAAM,CAAC,CAACrC,EAAE,EAAEyG,CAAC,EAAET,GAAG,KAAI;QACnB,OAAOA,GAAG,CAACW,OAAO,CAAC3G,EAAE,CAAC,KAAKyG,CAAC;MAChC,CAAC,CAAC;IACV,CAAC,CAAC;IAEF;IACA,MAAM7H,KAAK,GAAW;MAClBiI,UAAU,EAAE,EAAE;MACdvC,IAAI,EAAE,EAAE;MACRwC,WAAW,EAAE,EAAE;MACfC,QAAQ,EAAE,EAAE;MACZE,QAAQ,EAAE,IAAI;MACdnC,KAAK,EAAE,IAAI;MACXqC,UAAU,EAAE,KAAK;MACjBE,iBAAiB,EAAE,EAAE;MACrBE,gBAAgB,EAAE,EAAE;MACpBhC,YAAY,EAAEA,YAAY;MAC1BW,cAAc,EAAEA;KACnB;IACD,IAAI7F,KAAK,CAACN,KAAK,EAAE;MACbnB,KAAK,CAACiI,UAAU,GAAGxG,KAAK,CAACN,KAAK,CAAC6G,WAAW;MAC1ChI,KAAK,CAAC0F,IAAI,GAAGjE,KAAK,CAACN,KAAK,CAACuE,IAAI;MAC7B1F,KAAK,CAACkI,WAAW,GAAGzG,KAAK,CAACN,KAAK,CAAC+G,WAAW;MAC3ClI,KAAK,CAACmI,QAAQ,GAAG1G,KAAK,CAACN,KAAK,CAACgH,QAAQ;MACrCnI,KAAK,CAACqI,QAAQ,GAAG5G,KAAK,CAACN,KAAK,CAACiH,SAAS;MACtCpI,KAAK,CAACyI,iBAAiB,GAAGhH,KAAK,CAACN,KAAK,CAACqH,kBAAkB;MACxDxI,KAAK,CAAC2I,gBAAgB,GAAGlH,KAAK,CAACN,KAAK,CAACuH,iBAAiB;IAC1D,CAAC,MAAM,IAAIjH,KAAK,CAACxB,iBAAiB,CAAC8D,MAAM,GAAG,CAAC,EAAE;MAC3C/D,KAAK,CAACiI,UAAU,GAAGxG,KAAK,CAACxB,iBAAiB,CAAC,CAAC,CAAC,CAAC2F,KAAK;IACvD;IACA,IAAI,CAAC5F,KAAK,GAAGA,KAAK;IAClB,IAAI,CAAC+J,UAAU,GAAG,EAAE;IACpB,IAAI,CAACI,cAAc,CAAC1I,KAAK,CAACtB,QAAQ,CAAC;EACvC;EA2QAiK,gCAAgCA,CAACC,SAAiB;IAC9C,IAAI,CAACF,cAAc,CAACE,SAAS,CAAClK,QAAQ,CAAC;EAC3C;EAEQgK,cAAcA,CAAChK,QAAoB;IACvC,IAAI,CAAC4J,UAAU,GAAG,EAAE;IACpB5J,QAAQ,CAAC2C,OAAO,CAAEwH,CAAC,IAAI;MACnB,IAAI,CAACP,UAAU,CAACO,CAAC,CAAClJ,EAAE,CAAC,GAAGkJ,CAAC;IAC7B,CAAC,CAAC;EACN;EAEApM,MAAMA,CAAA;IACF,oBACIrB,0DAAA;MAAMgI,SAAS,EAAC,uBAAuB;MAAC0F,QAAQ,EAAE,IAAI,CAAC3F;IAAM,gBACzD/H,0DAAA,CAACmI,2FAAqB;MAClB/E,iBAAiB,EAAE,IAAI,CAACwB,KAAK,CAACxB,iBAAiB;MAC/CkB,KAAK,EAAE,IAAI,CAACM,KAAK,CAACN,KAAK;MACvBX,QAAQ,EAAE,IAAI,CAACiB,KAAK,CAACjB,QAAQ;MAC7BkE,MAAM,EAAE,IAAI,CAACjD,KAAK,CAACiD,MAAM;MACzBuD,UAAU,EAAE,IAAI,CAACjI,KAAK,CAACiI,UAAU;MACjCvC,IAAI,EAAE,IAAI,CAAC1F,KAAK,CAAC0F,IAAI;MACrByC,QAAQ,EAAE,IAAI,CAACnI,KAAK,CAACmI,QAAQ;MAC7BD,WAAW,EAAE,IAAI,CAAClI,KAAK,CAACkI,WAAW;MACnCG,QAAQ,EAAE,IAAI,CAACrI,KAAK,CAACqI,QAAQ,IAAI,KAAK;MACtCnC,KAAK,EAAE,IAAI,CAAClG,KAAK,CAACkG,KAAK;MACvBqC,UAAU,EAAE,IAAI,CAACvI,KAAK,CAACuI,UAAU;MACjCpE,MAAM,EAAE,IAAI,CAACA,MAAM;MACnB4B,aAAa,EAAE,IAAI,CAACA,aAAa;MACjC6D,YAAY,EAAE,IAAI,CAACA;IAAY,EACjC,eACF/M,0DAAA,CAACoI,gGAAsB;MACnB9E,QAAQ,EAAE,IAAI,CAACsB,KAAK,CAACtB,QAAQ;MAC7BK,QAAQ,EAAE,IAAI,CAACiB,KAAK,CAACjB,QAAQ;MAC7BkE,MAAM,EAAE,IAAI,CAACjD,KAAK,CAACiD,MAAM;MACzB+D,iBAAiB,EAAE,IAAI,CAACzI,KAAK,CAACyI,iBAAiB;MAC/CE,gBAAgB,EAAE,IAAI,CAAC3I,KAAK,CAAC2I,gBAAgB;MAC7CxC,cAAc,EAAE,IAAI,CAACA;IAAc,EACrC,eACFtJ,0DAAA,CAACqI,0GAAuB;MACpB9E,MAAM,EAAE,IAAI,CAACqB,KAAK,CAACrB,MAAM;MACzBI,QAAQ,EAAE,IAAI,CAACiB,KAAK,CAACjB,QAAQ;MAC7BiI,iBAAiB,EAAE,IAAI,CAACzI,KAAK,CAACyI,iBAAiB;MAC/C9B,YAAY,EAAE,IAAI,CAAC3G,KAAK,CAAC2G,YAAY;MACrCc,UAAU,EAAE,IAAI,CAACA,UAAU;MAC3BnB,oBAAoB,EAAE,IAAI,CAACA,oBAAoB;MAC/CkE,2BAA2B,EACvB,IAAI,CAACxD;IAA4B,EAEvC,eACFnK,0DAAA,CAACsI,0FAAe;MACZhF,QAAQ,EAAE,IAAI,CAACsB,KAAK,CAACtB,QAAQ;MAC7BK,QAAQ,EAAE,IAAI,CAACiB,KAAK,CAACjB,QAAQ;MAC7BiI,iBAAiB,EAAE,IAAI,CAACzI,KAAK,CAACyI,iBAAiB;MAC/CE,gBAAgB,EAAE,IAAI,CAAC3I,KAAK,CAAC2I,gBAAgB;MAC7CrB,cAAc,EAAE,IAAI,CAACtH,KAAK,CAACsH,cAAc;MACzCG,UAAU,EAAE,IAAI,CAACA,UAAU;MAC3BP,sBAAsB,EAAE,IAAI,CAACA;IAAsB,EACrD,eACFrK,0DAAA,CAACuI,6FAA0B;MAACT,QAAQ,EAAE,IAAI,CAACA;IAAQ,EAAI,CACpD;EAEf;;AAGJ,+DAAe9F,mBAAmB;;;;;;;;;;;;;ACjdR;AAO1B,MAAMD,qBAAsB,SAAQ/B,4DAA2B;EAC3DqB,MAAMA,CAAA;IACF,MAAM6G,QAAQ,GAAIhE,CAAoC,IAAI;MACtDA,CAAC,CAACC,cAAc,EAAE;MAClB,IAAI,CAACS,KAAK,CAACsD,QAAQ,CAAChE,CAAC,CAAC4E,aAAa,CAACC,KAAK,CAAC;IAC9C,CAAC;IAED,MAAM6E,OAAO,GAAI1J,CAAqC,IAAI;MACtDA,CAAC,CAACC,cAAc,EAAE;MAClB,IAAI,CAACS,KAAK,CAACsD,QAAQ,CAAC,EAAE,CAAC;IAC3B,CAAC;IAED,MAAMwF,QAAQ,GAAG,SAAAA,CAAUxJ,CAAmC;MAC1DA,CAAC,CAACC,cAAc,EAAE;IACtB,CAAC;IAED,oBACInE,0DAAA;MAAKgI,SAAS,EAAC;IAAyB,gBACpChI,0DAAA;MAAMgI,SAAS,EAAC,aAAa;MAAC0F,QAAQ,EAAEA;IAAQ,gBAC5C1N,0DAAA;MAAMgI,SAAS,EAAC;IAAY,gBACxBhI,0DAAA;MAAO6N,OAAO,EAAC;IAAS,GAAE5G,OAAO,CAAC,SAAS,CAAC,CAAS,eACrDjH,0DAAA;MACIgI,SAAS,EAAC,cAAc;MACxBzD,EAAE,EAAC,SAAS;MACZwE,KAAK,EAAE,IAAI,CAACnE,KAAK,CAACpB,UAAU;MAC5B0E,QAAQ,EAAEA;IAAQ,EACpB,CACC,EAAC,GAAG,eACXlI,0DAAA;MACI8N,IAAI,EAAC,QAAQ;MACb9F,SAAS,EAAC,mBAAmB;MAC7BC,OAAO,EAAE2F;IAAO,GAEf3G,OAAO,CAAC,cAAc,CAAC,CACnB,CACN,CACL;EAEd;;AAGJ,+DAAelF,qBAAqB;;;;;;;;;;;;;AChDV;AAiB1B,MAAME,mBAAoB,SAAQjC,4DAA2B;EACjD+N,iBAAiBA,CAAA;IACrB,MAAMzG,MAAM,GAAIpD,CAAsC,IAAI;MACtDA,CAAC,CAACC,cAAc,EAAE;MAClB,IAAI,CAACS,KAAK,CAAC0C,MAAM,CAAC,IAAI,CAAC1C,KAAK,CAACN,KAAK,CAAC;IACvC,CAAC;IACD,MAAMiD,QAAQ,GAAIrD,CAAsC,IAAI;MACxDA,CAAC,CAACC,cAAc,EAAE;MAClB,MAAM6J,SAAS,GAAG/G,OAAO,CACrB,8FAA8F,CACjG;MACD,MAAMvC,IAAI,GAAG;QACTmE,IAAI,EAAE,IAAI,CAACjE,KAAK,CAACN,KAAK,CAACuE;OAC1B;MACD,MAAM1B,GAAG,GAAGC,WAAW,CAAC4G,SAAS,EAAEtJ,IAAI,EAAE,IAAI,CAAC;MAC9C,IAAIuJ,OAAO,CAAC9G,GAAG,CAAC,EAAE;QACd,IAAI,CAACvC,KAAK,CAAC2C,QAAQ,CAAC,IAAI,CAAC3C,KAAK,CAACN,KAAK,CAAC;MACzC;IACJ,CAAC;IACD,oBACItE,0DAAA;MAAKgI,SAAS,EAAC;IAAa,gBACxBhI,0DAAA;MAAKgI,SAAS,EAAC;IAAU,gBACrBhI,0DAAA;MACIgI,SAAS,EAAC,mCAAmC;MAC7C8F,IAAI,EAAC,QAAQ;MAAA,eACD,UAAU;MAAA,iBACR,MAAM;MAAA,iBACN;IAAO,GAEpB7G,OAAO,CAAC,SAAS,CAAC,oBAAEjH,0DAAA;MAAMgI,SAAS,EAAC;IAAO,EAAQ,CAC/C,eACThI,0DAAA;MAAIgI,SAAS,EAAC;IAAmC,gBAC7ChI,0DAAA;MAAGgI,SAAS,EAAC,eAAe;MAACC,OAAO,EAAEX;IAAM,GACvCL,OAAO,CAAC,MAAM,CAAC,CAChB,eACJjH,0DAAA;MAAGgI,SAAS,EAAC,eAAe;MAACC,OAAO,EAAEV;IAAQ,GACzCN,OAAO,CAAC,QAAQ,CAAC,CAClB,CACH,CACH,CACJ;EAEd;EAEQiH,gBAAgBA,CAACC,UAAoB;IACzC,MAAM7K,QAAQ,GAAG,IAAI,CAACsB,KAAK,CAACtB,QAAQ,CAACsD,MAAM,CAAE6G,CAAC,IAAI;MAC9C,OAAOU,UAAU,CAACjD,OAAO,CAACuC,CAAC,CAAClJ,EAAE,CAAC,KAAK,CAAC,CAAC;IAC1C,CAAC,CAAC;IACF,oBACIvE,0DAAA,aACKsD,QAAQ,CAACiD,GAAG,CAAEkH,CAAC,IAAI;MAChB,oBACIzN,0DAAA;QAAIqH,GAAG,EAAEoG,CAAC,CAAClJ;MAAE,gBACTvE,0DAAA;QAAGoO,IAAI,EAAEX,CAAC,CAACY;MAAa,GAAGZ,CAAC,CAACa,KAAK,CAAK,CACtC;IAEb,CAAC,CAAC,CACD;EAEb;EAEQC,cAAcA,CAAA;IAClB,MAAMC,QAAQ,GAAG,IAAI,CAAC5J,KAAK,CAACN,KAAK,CAAC0H,yBAAyB,CAACzF,GAAG,CAC1D6G,MAAM,IAAKA,MAAM,CAACX,eAAe,CACrC;IACD,MAAMlJ,MAAM,GAAG,IAAI,CAACqB,KAAK,CAACrB,MAAM,CAACqD,MAAM,CAAEsD,CAAC,IAAI;MAC1C,OAAOsE,QAAQ,CAACC,QAAQ,CAACvE,CAAC,CAAC3F,EAAE,CAAC;IAClC,CAAC,CAAC;IACF,oBACIvE,0DAAA,aACKuD,MAAM,CAACgD,GAAG,CAAE2D,CAAC,IAAI;MACd,oBACIlK,0DAAA;QAAIqH,GAAG,EAAE6C,CAAC,CAAC3F;MAAE,gBACTvE,0DAAA;QAAGoO,IAAI,EAAElE,CAAC,CAACmE;MAAa,GAAGnE,CAAC,CAACrB,IAAI,CAAK,CACrC;IAEb,CAAC,CAAC,CACD;EAEb;EAEAxH,MAAMA,CAAA;IACF,MAAM+J,UAAU,GAAG,IAAI,CAACxG,KAAK,CAACxB,iBAAiB,CAACuD,IAAI,CAAE+H,MAAM,IAAI;MAC5D,OAAOA,MAAM,CAAC3F,KAAK,KAAK,IAAI,CAACnE,KAAK,CAACN,KAAK,CAAC6G,WAAW;IACxD,CAAC,CAAC;IACF,IAAIwD,iBAAiB,GAAuB,IAAI;IAChD,IAAIC,eAAe,GAAuB,IAAI;IAC9C,IAAI,IAAI,CAAChK,KAAK,CAACN,KAAK,CAACuH,iBAAiB,EAAE;MACpC8C,iBAAiB,gBACb3O,0DAAA,CAAAA,uDAAA,qBACIA,0DAAA,aAAKiH,OAAO,CAAC,WAAW,CAAC,CAAM,EAC9B,IAAI,CAACiH,gBAAgB,CAAC,IAAI,CAACtJ,KAAK,CAACN,KAAK,CAACuH,iBAAiB,CAAC,CAEjE;IACL;IACA,IAAI,IAAI,CAACjH,KAAK,CAACN,KAAK,CAAC0H,yBAAyB,CAAC9E,MAAM,GAAG,CAAC,EAAE;MACvD0H,eAAe,gBACX5O,0DAAA,CAAAA,uDAAA,qBACIA,0DAAA,aAAKiH,OAAO,CAAC,SAAS,CAAC,CAAM,EAC5B,IAAI,CAACsH,cAAc,EAAE,CAE7B;IACL;IACA,oBACIvO,0DAAA;MAAIqH,GAAG,EAAE,GAAG,IAAI,CAACzC,KAAK,CAACN,KAAK,CAACC,EAAE;IAAE,gBAC7BvE,0DAAA,aAAK,IAAI,CAAC4E,KAAK,CAACN,KAAK,CAACuE,IAAI,CAAM,eAChC7I,0DAAA,aAAKoL,UAAU,GAAGA,UAAU,CAAC0D,YAAY,GAAG,EAAE,CAAM,eACpD9O,0DAAA,0BACIA,0DAAA;MACI+O,GAAG,EAAE,IAAI,CAACnK,KAAK,CAACN,KAAK,CAAC+E,KAAK,IAAIX,SAAS;MACxCsG,KAAK,EAAE;IAAG,EACZ,CACD,eACLhP,0DAAA,aACK,IAAI,CAACkO,gBAAgB,CAAC,IAAI,CAACtJ,KAAK,CAACN,KAAK,CAACqH,kBAAkB,CAAC,CAC1D,eACL3L,0DAAA,aACK2O,iBAAiB,EACjBC,eAAe,CACf,eACL5O,0DAAA,aACK,IAAI,CAAC4E,KAAK,CAACN,KAAK,CAACiH,SAAS,GACrBtE,OAAO,CAAC,QAAQ,CAAC,GACjBA,OAAO,CAAC,UAAU,CAAC,CACxB,eACLjH,0DAAA,aAAK,IAAI,CAAC+N,iBAAiB,EAAE,CAAM,CAClC;EAEb;;AAGJ,+DAAe9L,mBAAmB;;;;;;;;;;;;;;;;ACpJR;AAMpB,MAAOsG,0BAA2B,SAAQvI,4DAA2B;EACvEqB,MAAMA,CAAA;IACF,oBACIrB,0DAAA;MAAKgI,SAAS,EAAC;IAAsC,gBACjDhI,0DAAA;MAAKgI,SAAS,EAAC;IAAY,gBACvBhI,0DAAA;MACIgI,SAAS,EAAC,mBAAmB;MAC7BC,OAAO,EAAE,IAAI,CAACrD,KAAK,CAACkD;IAAQ,GAE3Bb,OAAO,CAAC,QAAQ,CAAC,CAClB,EAAC,GAAG,eACRjH,0DAAA;MAAQgI,SAAS,EAAC,iBAAiB;MAAC8F,IAAI,EAAC;IAAQ,GAC5C7G,OAAO,CAAC,MAAM,CAAC,CACX,CACP,CACJ;EAEd;;;;;;;;;;;;;;;;;;ACvBsB;AACQ;AAqB5B,MAAOqB,eAAgB,SAAQtI,4DAA2B;EACpDkP,4BAA4BA,CAACrE,MAAgB;IACjD,OAAO,IAAI,CAACjG,KAAK,CAACtB,QAAQ,CACrBsD,MAAM,CAAE6G,CAAC,IAAI;MACV,OACI,CAACA,CAAC,CAAC0B,SAAS,KACX1B,CAAC,CAAClJ,EAAE,KAAKsG,MAAM,CAACtG,EAAE,IAAIkJ,CAAC,CAAC5C,MAAM,KAAKA,MAAM,CAACtG,EAAE,CAAC;IAEtD,CAAC,CAAC,CACD6K,IAAI,CAAC,CAACC,CAAC,EAAE9C,CAAC,KAAI;MACX,OAAO8C,CAAC,CAACf,KAAK,CAACgB,aAAa,CAAC/C,CAAC,CAAC+B,KAAK,CAAC;IACzC,CAAC,CAAC,CACD/H,GAAG,CAAEkH,CAAC,IAAI;MACP,MAAM8B,GAAG,GAAiB;QACtBxG,KAAK,EAAE0E,CAAC,CAAClJ,EAAE;QACX6F,KAAK,EAAEqD,CAAC,CAACa;OACZ;MACD,OAAOiB,GAAG;IACd,CAAC,CAAC;EACV;EAEQC,eAAeA,CAACC,aAAuB,EAAEnF,aAAuB;IACpE,MAAMoF,cAAc,GAAG,IAAI,CAAC9K,KAAK,CAACtB,QAAQ,CACrCsD,MAAM,CAAE6G,CAAC,IAAI;MACV,OACI,CAACA,CAAC,CAAC0B,SAAS,KACX1B,CAAC,CAAClJ,EAAE,KAAKkL,aAAa,CAAClL,EAAE,IAAIkJ,CAAC,CAAC5C,MAAM,KAAK4E,aAAa,CAAClL,EAAE,CAAC;IAEpE,CAAC,CAAC,CACD6K,IAAI,CAAC,CAACC,CAAC,EAAE9C,CAAC,KAAI;MACX,OAAO8C,CAAC,CAACf,KAAK,CAACgB,aAAa,CAAC/C,CAAC,CAAC+B,KAAK,CAAC;IACzC,CAAC,CAAC;IACN,MAAMqB,cAAc,GAAG,IAAI,CAACT,4BAA4B,CAAC5E,aAAa,CAAC;IACvE,oBACItK,0DAAA;MAAOgI,SAAS,EAAC;IAAqC,gBAClDhI,0DAAA,gBACK0P,cAAc,CAACnJ,GAAG,CAAEmD,OAAO,IAAI;MAC5B,MAAMkG,WAAW,GAAG,CAChB,IAAI,CAAChL,KAAK,CAAC6F,cAAc,CAACf,OAAO,CAACnF,EAAE,CAAC,IAAI,EAAE,EAC7CqC,MAAM,CAAE8D,GAAG,IAAI;QACb,MAAMC,UAAU,GAAG,IAAI,CAAC/F,KAAK,CAACgG,UAAU,CAACF,GAAG,CAAC;QAC7C,OACIC,UAAU,CAACpG,EAAE,KAAK+F,aAAa,CAAC/F,EAAE,IAClCoG,UAAU,CAACE,MAAM,KAAKP,aAAa,CAAC/F,EAAE;MAE9C,CAAC,CAAC;MACF,oBACIvE,0DAAA;QAAIqH,GAAG,EAAEqC,OAAO,CAACnF;MAAE,gBACfvE,0DAAA,0BACIA,0DAAA;QACIoO,IAAI,EAAE1E,OAAO,CAAC2E,aAAa;QAC3BwB,MAAM,EAAC,QAAQ;QACfC,GAAG,EAAC;MAAY,GAEfpG,OAAO,CAAC4E,KAAK,CACd,CACH,eACLtO,0DAAA,0BACIA,0DAAA,CAACiP,oDAAM;QACHc,OAAO,EAAE,IAAI;QACbhH,KAAK,EAAE4G,cAAc,CAAC/I,MAAM,CAAE4C,CAAC,IAC3BoG,WAAW,CAACnB,QAAQ,CAACjF,CAAC,CAACT,KAAK,CAAC,CAChC;QACDQ,OAAO,EAAEoG,cAAc;QACvBzH,QAAQ,EAAE,IAAI,CAACtD,KAAK,CAACyF,sBAAsB,CAAC2F,IAAI,CAC5C,IAAI,EACJtG,OAAO,EACPY,aAAa,CAChB;QACD2F,UAAU,EAAE,IAAI,CAACrL,KAAK,CAACjB;MAAQ,EACjC,CACD,CACJ;IAEb,CAAC,CAAC,CACE,CACJ;EAEhB;EAEQuM,eAAeA,CAAA;IAKnB,IACI,IAAI,CAACtL,KAAK,CAACgH,iBAAiB,CAAC1E,MAAM,IAAI,CAAC,IACxC,IAAI,CAACtC,KAAK,CAACkH,gBAAgB,CAAC5E,MAAM,IAAI,CAAC,EACzC;MACE,oBACIlH,0DAAA;QAAKgI,SAAS,EAAC;MAAK,gBAChBhI,0DAAA;QAAKgI,SAAS,EAAC;MAAW,gBACtBhI,0DAAA,yBACIA,0DAAA,aACKiH,OAAO,CACJ,0FAA0F,CAC7F,CACA,CACL,CACF,CACJ;IAEd;IACA,MAAMkJ,kBAAkB,GAAoC,EAAE;IAC9D,MAAMC,QAAQ,GAAG,SAAAA,CACbX,aAAqB,EACrBnF,aAAqB;MAErB,OAAO,GAAGmF,aAAa,IAAInF,aAAa,EAAE;IAC9C,CAAC;IACD,IAAI,CAAC1F,KAAK,CAACgH,iBAAiB,CAAC3F,OAAO,CAAEkG,SAAS,IAAI;MAC/C,IAAI,CAACvH,KAAK,CAACkH,gBAAgB,CAAC7F,OAAO,CAAEoK,YAAY,IAAI;QACjD,MAAMhJ,GAAG,GAAG+I,QAAQ,CAACjE,SAAS,EAAEkE,YAAY,CAAC;QAC7CF,kBAAkB,CAAC9I,GAAG,CAAC,GAAG;UACtBoI,aAAa,EAAE,IAAI,CAAC7K,KAAK,CAACgG,UAAU,CAACuB,SAAS,CAAC;UAC/C7B,aAAa,EAAE,IAAI,CAAC1F,KAAK,CAACgG,UAAU,CAACyF,YAAY;SACpD;MACL,CAAC,CAAC;IACN,CAAC,CAAC;IACF,OAAOrH,MAAM,CAACsH,MAAM,CAACH,kBAAkB,CAAC,CAAC5J,GAAG,CAAC,CAACgK,WAAW,EAAEvF,CAAC,KAAI;MAC5D,oBACIhL,0DAAA;QAAKqH,GAAG,EAAE2D,CAAC;QAAEhD,SAAS,EAAC;MAAK,gBACxBhI,0DAAA;QAAKgI,SAAS,EAAC;MAAU,gBACrBhI,0DAAA,0BACIA,0DAAA,iBAASuQ,WAAW,CAACd,aAAa,CAACnB,KAAK,CAAU,EAAC,GAAG,eACtDtO,0DAAA,aAAKiH,OAAO,CAAC,kBAAkB,CAAC,CAAM,CACrC,CACH,eACNjH,0DAAA;QAAKgI,SAAS,EAAC;MAAU,gBACrBhI,0DAAA,0BACIA,0DAAA,iBAASuQ,WAAW,CAACjG,aAAa,CAACgE,KAAK,CAAU,EAAC,GAAG,eACtDtO,0DAAA,aAAKiH,OAAO,CAAC,qBAAqB,CAAC,CAAM,CACxC,CACH,eACNjH,0DAAA;QAAKgI,SAAS,EAAC;MAAW,GACrB,IAAI,CAACwH,eAAe,CACjBe,WAAW,CAACd,aAAa,EACzBc,WAAW,CAACjG,aAAa,CAC5B,CACC,CACJ;IAEd,CAAC,CAAC;EACN;EAEAjJ,MAAMA,CAAA;IACF,oBACIrB,0DAAA;MAAKgI,SAAS,EAAC;IAAsC,gBACjDhI,0DAAA,aAAKiH,OAAO,CAAC,kCAAkC,CAAC,CAAM,eACtDjH,0DAAA,yBACIA,0DAAA,aACKiH,OAAO,CACJ,8HAA8H,CACjI,CACA,CACL,EACH,IAAI,CAACiJ,eAAe,EAAE,CACrB;EAEd;;;;;;;;;;;;;;;;;;;ACrLsB;AACU;AAmC9B,MAAO/H,qBAAsB,SAAQnI,4DAA2B;EAC1DyQ,qBAAqBA,CAACzK,KAA6B;IACvD,MAAM0K,WAAW,GAAG,IAAI,CAAC9L,KAAK,CAACiD,MAAM,CAAC7B,KAAK,CAAC;IAC5C,MAAM2K,OAAO,GAAgC;MACzC,YAAY,EAAE,IAAI;MAClB,WAAW,EAAED,WAAW,GAAGA,WAAW,CAACxJ,MAAM,GAAG,CAAC,GAAG;KACvD;IACD,OAAOsJ,iDAAU,CAACG,OAAO,CAAC;EAC9B;EAEQC,WAAWA,CAAC5K,KAA6B;IAC7C,OAAO,CAAC,IAAI,CAACpB,KAAK,CAACiD,MAAM,CAAC7B,KAAK,CAAC,IAAI,EAAE,EAAEO,GAAG,CAAC,CAACsK,QAAQ,EAAE7F,CAAC,KAAI;MACxD,oBACIhL,0DAAA;QAAMqH,GAAG,EAAE2D,CAAC;QAAEhD,SAAS,EAAC;MAAY,gBAChChI,0DAAA;QAAGgI,SAAS,EAAC;MAAoB,EAAK,OAAE6I,QAAQ,CAC7C;IAEf,CAAC,CAAC;EACN;EAEQC,iBAAiBA,CAAA;IACrB,IAAI,CAAC,IAAI,CAAClM,KAAK,CAACN,KAAK,IAAI,CAAC,IAAI,CAACM,KAAK,CAACN,KAAK,CAAC+E,KAAK,EAAE;MAC9C,OAAO,IAAI;IACf;IACA,MAAM0H,SAAS,GAAG,IAAI,CAACnM,KAAK,CAACN,KAAK,CAAC+E,KAAK,CAAC2H,KAAK,CAAC,GAAG,CAAC;IACnD,MAAMC,QAAQ,GAAGF,SAAS,CAACA,SAAS,CAAC7J,MAAM,GAAG,CAAC,CAAC;IAChD,oBACIlH,0DAAA,eACKiH,OAAO,CAAC,YAAY,CAAC,EAAE,GAAG,eAC3BjH,0DAAA;MACI6P,MAAM,EAAC,QAAQ;MACfC,GAAG,EAAC,YAAY;MAChB1B,IAAI,EAAE,IAAI,CAACxJ,KAAK,CAACN,KAAK,CAAC+E;IAAK,GAE3B4H,QAAQ,CACT,EAAC,GAAG,eACRjR,0DAAA;MACI8N,IAAI,EAAC,UAAU;MACfvJ,EAAE,EAAC,4BAA4B;MAC/ByI,OAAO,EAAE,IAAI,CAACpI,KAAK,CAAC8G,UAAU;MAC9BxD,QAAQ,EAAE,IAAI,CAACtD,KAAK,CAACmI,YAAY;MACjCmE,QAAQ,EAAE,IAAI,CAACtM,KAAK,CAACjB;IAAQ,EAC/B,EAAC,GAAG,eACN3D,0DAAA;MAAO6N,OAAO,EAAC;IAA4B,GACtC5G,OAAO,CAAC,OAAO,CAAC,CACb,CACL;EAEf;EAEA5F,MAAMA,CAAA;IACF,MAAMiN,KAAK,GAAG,IAAI,CAAC1J,KAAK,CAACN,KAAK,GACxB2C,OAAO,CAAC,mBAAmB,CAAC,GAC5BA,OAAO,CAAC,qBAAqB,CAAC;IACpC,oBACIjH,0DAAA;MAAKgI,SAAS,EAAC;IAAsC,gBACjDhI,0DAAA,aAAKsO,KAAK,CAAM,eAChBtO,0DAAA;MAAKgI,SAAS,EAAE,IAAI,CAACyI,qBAAqB,CAAC,YAAY;IAAC,gBACpDzQ,0DAAA;MAAO6N,OAAO,EAAC,eAAe;MAAC7F,SAAS,EAAC;IAAe,GACnDf,OAAO,CAAC,aAAa,CAAC,CACnB,eACRjH,0DAAA,2BACIA,0DAAA;MACIuE,EAAE,EAAC,eAAe;MAClBsE,IAAI,EAAC,YAAY;MACjBb,SAAS,EAAC,cAAc;MACxBe,KAAK,EAAE,IAAI,CAACnE,KAAK,CAACwG,UAAU;MAC5BlD,QAAQ,EAAE,IAAI,CAACtD,KAAK,CAAC0C,MAAM;MAC3B4J,QAAQ,EAAE,IAAI,CAACtM,KAAK,CAACjB;IAAQ,GAE5B,IAAI,CAACiB,KAAK,CAACxB,iBAAiB,CAACmD,GAAG,CAAEmI,MAAM,IAAI;MACzC,oBACI1O,0DAAA;QACIqH,GAAG,EAAEqH,MAAM,CAAC3F,KAAK;QACjBA,KAAK,EAAE2F,MAAM,CAAC3F;MAAK,GAElB2F,MAAM,CAACI,YAAY,CACf;IAEjB,CAAC,CAAC,CACG,EACR,IAAI,CAAC8B,WAAW,CAAC,YAAY,CAAC,CAC7B,CACJ,eACN5Q,0DAAA;MAAKgI,SAAS,EAAE,IAAI,CAACyI,qBAAqB,CAAC,MAAM;IAAC,gBAC9CzQ,0DAAA;MAAO6N,OAAO,EAAC,SAAS;MAAC7F,SAAS,EAAC;IAAe,GAC7Cf,OAAO,CAAC,MAAM,CAAC,CACZ,eACRjH,0DAAA,2BACIA,0DAAA;MACIuE,EAAE,EAAC,SAAS;MACZsE,IAAI,EAAC,MAAM;MACXsI,SAAS,EAAE,GAAG;MACdnJ,SAAS,EAAC,cAAc;MACxBe,KAAK,EAAE,IAAI,CAACnE,KAAK,CAACiE,IAAI;MACtBX,QAAQ,EAAE,IAAI,CAACtD,KAAK,CAAC0C,MAAM;MAC3B4J,QAAQ,EAAE,IAAI,CAACtM,KAAK,CAACjB;IAAQ,EAC/B,EACD,IAAI,CAACiN,WAAW,CAAC,MAAM,CAAC,CACvB,CACJ,eACN5Q,0DAAA;MAAKgI,SAAS,EAAE,IAAI,CAACyI,qBAAqB,CAAC,UAAU;IAAC,gBAClDzQ,0DAAA;MAAO6N,OAAO,EAAC,aAAa;MAAC7F,SAAS,EAAC;IAAe,GACjDf,OAAO,CAAC,UAAU,CAAC,CAChB,eACRjH,0DAAA,2BACIA,0DAAA;MACIuE,EAAE,EAAC,aAAa;MAChBsE,IAAI,EAAC,UAAU;MACfuI,IAAI,EAAE,EAAE;MACRC,IAAI,EAAE,CAAC;MACPrJ,SAAS,EAAC,cAAc;MACxBe,KAAK,EAAE,IAAI,CAACnE,KAAK,CAAC0G,QAAQ;MAC1BpD,QAAQ,EAAE,IAAI,CAACtD,KAAK,CAAC0C,MAAM;MAC3B4J,QAAQ,EAAE,IAAI,CAACtM,KAAK,CAACjB;IAAQ,EACrB,EACX,IAAI,CAACiN,WAAW,CAAC,UAAU,CAAC,CAC3B,CACJ,eACN5Q,0DAAA;MAAKgI,SAAS,EAAE,IAAI,CAACyI,qBAAqB,CAAC,UAAU;IAAC,gBAClDzQ,0DAAA;MAAO6N,OAAO,EAAC,kBAAkB;MAAC7F,SAAS,EAAC;IAAe,GACtDf,OAAO,CAAC,eAAe,CAAC,CACrB,eACRjH,0DAAA,2BACIA,0DAAA;MACIuE,EAAE,EAAC,aAAa;MAChBsE,IAAI,EAAC,UAAU;MACfb,SAAS,EAAC,cAAc;MACxBe,KAAK,EAAEuI,MAAM,CAAC,IAAI,CAAC1M,KAAK,CAAC4G,QAAQ,CAAC;MAClCtD,QAAQ,EAAE,IAAI,CAACtD,KAAK,CAAC0C,MAAM;MAC3B4J,QAAQ,EAAE,IAAI,CAACtM,KAAK,CAACjB;IAAQ,GAE5B,CACG;MAAEmL,YAAY,EAAE,QAAQ;MAAE/F,KAAK,EAAE;IAAM,CAAE,EACzC;MAAE+F,YAAY,EAAE,UAAU;MAAE/F,KAAK,EAAE;IAAO,CAAE,CAC/C,CAACxC,GAAG,CAAC,CAACmI,MAAM,EAAE6C,KAAK,KAAI;MACpB,oBACIvR,0DAAA;QAAQqH,GAAG,EAAEkK,KAAK;QAAExI,KAAK,EAAE2F,MAAM,CAAC3F;MAAK,GAClC2F,MAAM,CAACI,YAAY,CACf;IAEjB,CAAC,CAAC,CACG,EACR,IAAI,CAAC8B,WAAW,CAAC,UAAU,CAAC,CAC3B,CACJ,eACN5Q,0DAAA;MAAKgI,SAAS,EAAE,IAAI,CAACyI,qBAAqB,CAAC,aAAa;IAAC,gBACrDzQ,0DAAA;MAAO6N,OAAO,EAAC,gBAAgB;MAAC7F,SAAS,EAAC;IAAe,GACpDf,OAAO,CAAC,aAAa,CAAC,CACnB,eACRjH,0DAAA,2BACIA,0DAAA;MACIuE,EAAE,EAAC,gBAAgB;MACnBsE,IAAI,EAAC,aAAa;MAClBuI,IAAI,EAAE,EAAE;MACRC,IAAI,EAAE,CAAC;MACPrJ,SAAS,EAAC,cAAc;MACxBe,KAAK,EAAE,IAAI,CAACnE,KAAK,CAACyG,WAAW;MAC7BnD,QAAQ,EAAE,IAAI,CAACtD,KAAK,CAAC0C,MAAM;MAC3B4J,QAAQ,EAAE,IAAI,CAACtM,KAAK,CAACjB;IAAQ,EACrB,EACX,IAAI,CAACiN,WAAW,CAAC,aAAa,CAAC,CAC9B,CACJ,eACN5Q,0DAAA;MAAKgI,SAAS,EAAE,IAAI,CAACyI,qBAAqB,CAAC,OAAO;IAAC,gBAC/CzQ,0DAAA;MAAO6N,OAAO,EAAC,UAAU;MAAC7F,SAAS,EAAC;IAAe,GAC9Cf,OAAO,CAAC,OAAO,CAAC,CACb,eACRjH,0DAAA,cACK,IAAI,CAAC8Q,iBAAiB,EAAE,eACzB9Q,0DAAA;MACIuE,EAAE,EAAC,UAAU;MACbuJ,IAAI,EAAC,MAAM;MACXjF,IAAI,EAAC,OAAO;MACZb,SAAS,EAAC,cAAc;MACxBE,QAAQ,EAAE,IAAI,CAACtD,KAAK,CAACsE,aAAa;MAClCgI,QAAQ,EAAE,IAAI,CAACtM,KAAK,CAACjB;IAAQ,EAC/B,EACD,IAAI,CAACiN,WAAW,CAAC,OAAO,CAAC,CACxB,CACJ,CACJ;EAEd;;;;;;;;;;;;;;;;;;;;AC3NsB;AACU;AACF;AAkB5B,MAAOxI,sBAAuB,SAAQpI,4DAA2B;EAC3DwR,6BAA6BA,CAAA;IACjC,OAAO,IAAI,CAAC5M,KAAK,CAACtB,QAAQ,CACrBsD,MAAM,CAAE6G,CAAC,IAAI;MACV,OAAO,CAACA,CAAC,CAACgE,QAAQ;IACtB,CAAC,CAAC,CACDrC,IAAI,CAAC,CAACC,CAAC,EAAE9C,CAAC,KAAI;MACX,OAAO8C,CAAC,CAACf,KAAK,CAACgB,aAAa,CAAC/C,CAAC,CAAC+B,KAAK,CAAC;IACzC,CAAC,CAAC,CACD/H,GAAG,CAAEkH,CAAC,IAAI;MACP,MAAM8B,GAAG,GAAiB;QACtBxG,KAAK,EAAE0E,CAAC,CAAClJ,EAAE;QACX6F,KAAK,EAAEqD,CAAC,CAACa;OACZ;MACD,OAAOiB,GAAG;IACd,CAAC,CAAC;EACV;EAEQkB,qBAAqBA,CACzBzK,KAA6B,EAC7B0L,MAAgB;IAEhB,MAAMhB,WAAW,GAAG,IAAI,CAAC9L,KAAK,CAACiD,MAAM,CAAC7B,KAAK,CAAC;IAC5C,MAAM2K,OAAO,GAAgC;MACzC,YAAY,EAAE,IAAI;MAClB,WAAW,EAAED,WAAW,GAAGA,WAAW,CAACxJ,MAAM,GAAG,CAAC,GAAG;KACvD;IACDwK,MAAM,CAACzL,OAAO,CAAE+B,SAAS,IAAI;MACzB2I,OAAO,CAAC3I,SAAS,CAAC,GAAG,IAAI;IAC7B,CAAC,CAAC;IACF,OAAOwI,iDAAU,CAACG,OAAO,CAAC;EAC9B;EAEQC,WAAWA,CAAC5K,KAA6B;IAC7C,OAAO,CAAC,IAAI,CAACpB,KAAK,CAACiD,MAAM,CAAC7B,KAAK,CAAC,IAAI,EAAE,EAAEO,GAAG,CAAC,CAACsK,QAAQ,EAAE7F,CAAC,KAAI;MACxD,oBACIhL,0DAAA;QAAMqH,GAAG,EAAE2D,CAAC;QAAEhD,SAAS,EAAC;MAAY,gBAChChI,0DAAA;QAAGgI,SAAS,EAAC;MAAoB,EAAK,OAAE6I,QAAQ,CAC7C;IAEf,CAAC,CAAC;EACN;EAEAxP,MAAMA,CAAA;IACF,MAAMsQ,0BAA0B,GAAG,IAAI,CAACH,6BAA6B,EAAE;IACvE,oBACIxR,0DAAA;MAAKgI,SAAS,EAAC;IAAsC,gBACjDhI,0DAAA,aAAKiH,OAAO,CAAC,mBAAmB,CAAC,CAAM,eACvCjH,0DAAA,yBACIA,0DAAA,aACKiH,OAAO,CACJ,0EAA0E,CAC7E,CACA,CACL,eACJjH,0DAAA;MAAKgI,SAAS,EAAC;IAAK,gBAChBhI,0DAAA;MACIgI,SAAS,EAAE,IAAI,CAACyI,qBAAqB,CACjC,oBAAoB,EACpB,CAAC,UAAU,CAAC;IACf,gBAEDzQ,0DAAA;MAAO6N,OAAO,EAAC,UAAU;MAAC7F,SAAS,EAAC;IAAe,GAC9Cf,OAAO,CAAC,UAAU,CAAC,CAChB,eACRjH,0DAAA,2BACIA,0DAAA,CAACiP,oDAAM;MACHpG,IAAI,EAAC,mBAAmB;MACxBkH,OAAO,EAAE,IAAI;MACbhH,KAAK,EAAE4I,0BAA0B,CAAC/K,MAAM,CAAE4C,CAAC,IACvC,IAAI,CAAC5E,KAAK,CAACgH,iBAAiB,CAAC6C,QAAQ,CACjCjF,CAAC,CAACT,KAAK,CACV,CACJ;MACDb,QAAQ,EAAE,IAAI,CAACtD,KAAK,CAAC0E,cAAc,CAAC0G,IAAI,CACpC,IAAI,EACJ,mBAAmB,CACtB;MACDzG,OAAO,EAAEoI,0BAA0B;MACnC1B,UAAU,EAAE,IAAI,CAACrL,KAAK,CAACjB;IAAQ,EACjC,EACD,IAAI,CAACiN,WAAW,CAAC,oBAAoB,CAAC,CACrC,CACJ,eACN5Q,0DAAA;MACIgI,SAAS,EAAE,IAAI,CAACyI,qBAAqB,CACjC,mBAAmB,EACnB,CAAC,UAAU,CAAC;IACf,gBAEDzQ,0DAAA;MAAO6N,OAAO,EAAC,UAAU;MAAC7F,SAAS,EAAC;IAAe,GAC9Cf,OAAO,CAAC,aAAa,CAAC,CACnB,eACRjH,0DAAA,2BACIA,0DAAA,CAACiP,oDAAM;MACHpG,IAAI,EAAC,mBAAmB;MACxBkH,OAAO,EAAE,IAAI;MACbhH,KAAK,EAAE4I,0BAA0B,CAAC/K,MAAM,CAAE4C,CAAC,IACvC,IAAI,CAAC5E,KAAK,CAACkH,gBAAgB,CAAC2C,QAAQ,CAChCjF,CAAC,CAACT,KAAK,CACV,CACJ;MACDb,QAAQ,EAAE,IAAI,CAACtD,KAAK,CAAC0E,cAAc,CAAC0G,IAAI,CACpC,IAAI,EACJ,kBAAkB,CACrB;MACDzG,OAAO,EAAEoI,0BAA0B;MACnC1B,UAAU,EAAE,IAAI,CAACrL,KAAK,CAACjB;IAAQ,EACjC,EACD,IAAI,CAACiN,WAAW,CAAC,mBAAmB,CAAC,CACpC,CACJ,CACJ,CACJ;EAEd;;;;;;;;;;;;;;;;;;ACvIsB;AACQ;AAiClC,MAAMgB,QAAQ,GACV3K,OAAO,CAAC;;mDAEuC,CAAC;AAE9C,MAAOoB,uBAAwB,SAAQrI,4DAA2B;EAC5D6R,qBAAqBA,CAAA;IACzB,MAAMC,YAAY,GAAG,IAAI,CAAClN,KAAK,CAACrB,MAAM,CACjC6L,IAAI,CAAC,CAACC,CAAC,EAAE9C,CAAC,KAAI;MACX,OAAO8C,CAAC,CAACxG,IAAI,CAACyG,aAAa,CAAC/C,CAAC,CAAC1D,IAAI,CAAC;IACvC,CAAC,CAAC,CACDtC,GAAG,CAAEkH,CAAC,IAAI;MACP,MAAM8B,GAAG,GAAiB;QACtBxG,KAAK,EAAE0E,CAAC,CAAClJ,EAAE;QACX6F,KAAK,EAAEqD,CAAC,CAAC5E;OACZ;MACD,OAAO0G,GAAG;IACd,CAAC,CAAC;IACN,OAAOuC,YAAY;EACvB;EAEQC,wBAAwBA,CAAA;IAC5B,MAAMC,eAAe,GAAmB,EAAE;IAC1C,KAAK,IAAIhH,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG,GAAG,EAAEA,CAAC,EAAE,EAAE;MAC1BgH,eAAe,CAACtF,IAAI,CAAC;QACjB3D,KAAK,EAAEiC,CAAC;QACRZ,KAAK,EAAE,GAAGY,CAAC;OACd,CAAC;IACN;IACA,OAAOgH,eAAe;EAC1B;EAEQxC,eAAeA,CAACC,aAAuB;IAC3C,MAAME,cAAc,GAAG,IAAI,CAACkC,qBAAqB,EAAE;IACnD,MAAMG,eAAe,GAAG,IAAI,CAACD,wBAAwB,EAAE;IACvD,MAAMjI,YAAY,GAAG,IAAI,CAAClF,KAAK,CAACkF,YAAY,CAAC2F,aAAa,CAAClL,EAAE,CAAC,IAAI,EAAE;IACpE,IACIuF,YAAY,CAAC5C,MAAM,IAAI,CAAC,IACxB4C,YAAY,CAACA,YAAY,CAAC5C,MAAM,GAAG,CAAC,CAAC,CAAC6C,OAAO,KAAK,IAAI,EACxD;MACED,YAAY,CAAC4C,IAAI,CAAC;QACd3C,OAAO,EAAE,IAAI;QACbC,QAAQ,EAAE;OACb,CAAC;IACN;IACA,oBACIhK,0DAAA;MACIqH,GAAG,EAAEoI,aAAa,CAAClL,EAAE;MACrByD,SAAS,EAAC;IAAqC,gBAE/ChI,0DAAA,gBACK8J,YAAY,CAACvD,GAAG,CAAC,CAAC0L,KAAK,EAAEjH,CAAC,KAAI;MAC3B,oBACIhL,0DAAA;QAAIqH,GAAG,EAAE2D;MAAC,gBACNhL,0DAAA,0BACIA,0DAAA;QACIoO,IAAI,EAAEqB,aAAa,CAACpB,aAAa;QACjCwB,MAAM,EAAC,QAAQ;QACfC,GAAG,EAAC;MAAY,GAEfL,aAAa,CAACnB,KAAK,CACpB,CACH,eACLtO,0DAAA,0BACIA,0DAAA,CAACiP,oDAAM;QACHiD,WAAW,EAAE,IAAI;QACjBnJ,KAAK,EAAE4G,cAAc,CAAC/I,MAAM,CACvB4C,CAAC,IAAKA,CAAC,CAACT,KAAK,KAAKkJ,KAAK,CAAClI,OAAO,CACnC;QACDR,OAAO,EAAEoG,cAAc;QACvBzH,QAAQ,EAAE,IAAI,CAACtD,KAAK,CAAC6E,oBAAoB,CAACuG,IAAI,CAC1C,IAAI,EACJP,aAAa,EACbzE,CAAC,CACJ;QACDiF,UAAU,EAAE,IAAI,CAACrL,KAAK,CAACjB;MAAQ,EACjC,CACD,eACL3D,0DAAA,0BACIA,0DAAA,CAACiP,oDAAM;QACHlG,KAAK,EAAEiJ,eAAe,CAACpL,MAAM,CACxB4C,CAAC,IACEyI,KAAK,CAAClI,OAAO,KAAK,IAAI,IACtBP,CAAC,CAACT,KAAK,KAAKkJ,KAAK,CAACjI,QAAQ,CACjC;QACDT,OAAO,EAAEyI,eAAe;QACxB9J,QAAQ,EAAE,IAAI,CAACtD,KAAK,CAAC+I,2BAA2B,CAACqC,IAAI,CACjD,IAAI,EACJP,aAAa,EACbzE,CAAC,CACJ;QACDiF,UAAU,EACN,IAAI,CAACrL,KAAK,CAACjB,QAAQ,IACnBsO,KAAK,CAAClI,OAAO,KAAK;MAAI,EAE5B,CACD,CACJ;IAEb,CAAC,CAAC,CACE,CACJ;EAEhB;EAEQmG,eAAeA,CAAA;IACnB,IAAI,IAAI,CAACtL,KAAK,CAACgH,iBAAiB,CAAC1E,MAAM,IAAI,CAAC,EAAE;MAC1C,oBACIlH,0DAAA;QAAKgI,SAAS,EAAC;MAAK,gBAChBhI,0DAAA;QAAKgI,SAAS,EAAC;MAAW,gBACtBhI,0DAAA,yBACIA,0DAAA,aACKiH,OAAO,CACJ,8DAA8D,CACjE,CACA,CACL,CACF,CACJ;IAEd;IACA,oBACIjH,0DAAA;MAAKgI,SAAS,EAAC;IAAK,gBAChBhI,0DAAA;MAAKgI,SAAS,EAAC;IAAU,gBACrBhI,0DAAA,0BACIA,0DAAA,iBAASiH,OAAO,CAAC,gBAAgB,CAAC,CAAU,CAC3C,CACH,eACNjH,0DAAA;MAAKgI,SAAS,EAAC;IAAU,gBACrBhI,0DAAA,0BACIA,0DAAA,iBAASiH,OAAO,CAAC,iBAAiB,CAAC,CAAU,CAC5C,CACH,eACNjH,0DAAA;MAAKgI,SAAS,EAAC;IAAU,gBACrBhI,0DAAA,0BACIA,0DAAA,iBAASiH,OAAO,CAAC,oBAAoB,CAAC,CAAU,CAC/C,CACH,eACNjH,0DAAA;MAAKgI,SAAS,EAAC;IAAW,GACrB,IAAI,CAACpD,KAAK,CAACgH,iBAAiB,CAACrF,GAAG,CAAE4L,eAAe,IAAI;MAClD,MAAM1C,aAAa,GACf,IAAI,CAAC7K,KAAK,CAACgG,UAAU,CAACuH,eAAe,CAAC;MAC1C,OAAO,IAAI,CAAC3C,eAAe,CAACC,aAAa,CAAC;IAC9C,CAAC,CAAC,CACA,CACJ;EAEd;EAEApO,MAAMA,CAAA;IACF,oBACIrB,0DAAA;MAAKgI,SAAS,EAAC;IAAsC,gBACjDhI,0DAAA,aAAKiH,OAAO,CAAC,yCAAyC,CAAC,CAAM,eAC7DjH,0DAAA,yBACIA,0DAAA,aAAK4R,QAAQ,CAAM,CACnB,EACH,IAAI,CAAC1B,eAAe,EAAE,CACrB;EAEd;;;;;;;;;;;;;;;;;;;;;;;;;;ACjM4B;AAkBd;AAElB,MAAMyC,WAAW,GAAG,aAAa;AAEjC,MAAMC,YAAY,GAAG,SAAAA,CAAA;EACjB,OAAOR,iDAAO,CAACS,GAAG,CAAC,WAAW,CAAC,IAAI,EAAE;AACzC,CAAC;AAED,MAAMC,SAAS,GAAUC,QAAgB,IAAIpO,gDAAA;EACzC,OAAOqO,KAAK,CAACD,QAAQ,EAAE;IACnBE,MAAM,EAAE,KAAK;IACbC,OAAO,EAAE;MACLC,MAAM,EAAE;;GAEf,CAAC;AACN,CAAC;AAEM,MAAM1R,oBAAoB,GAC7BsR,QAAgB,IAC0BpO,gDAAA;EAC1C,MAAMyO,IAAI,GAAG,MAAMN,SAAS,CAACC,QAAQ,CAAC;EACtC,OAAOV,8CAAK,CAACC,qDAAgB,CAACe,MAAM,CAAC,MAAMD,IAAI,CAACE,IAAI,EAAE,CAAC,CAAC;AAC5D,CAAC;AAEM,MAAM5R,gBAAgB,GACzBqR,QAAgB,IACSpO,gDAAA;EACzB,MAAMyO,IAAI,GAAG,MAAMN,SAAS,CAACC,QAAQ,CAAC;EACtC,OAAOV,8CAAK,CAACG,iDAAY,CAACa,MAAM,CAAC,MAAMD,IAAI,CAACE,IAAI,EAAE,CAAC,CAAC;AACxD,CAAC;AAEM,MAAM3R,YAAY,GAAUoR,QAAgB,IAAyBpO,gDAAA;EACxE,MAAMyO,IAAI,GAAG,MAAMN,SAAS,CAACC,QAAQ,CAAC;EACtC,OAAOV,8CAAK,CAACI,6CAAQ,CAACY,MAAM,CAAC,MAAMD,IAAI,CAACE,IAAI,EAAE,CAAC,CAAC;AACpD,CAAC;AAEM,MAAM1R,UAAU,GAAUmR,QAAgB,IAAuBpO,gDAAA;EACpE,MAAMyO,IAAI,GAAG,MAAMN,SAAS,CAACC,QAAQ,CAAC;EACtC,OAAOV,8CAAK,CAACK,2CAAM,CAACW,MAAM,CAAC,MAAMD,IAAI,CAACE,IAAI,EAAE,CAAC,CAAC;AAClD,CAAC;AAEM,MAAMC,mBAAmB,GAC5BR,QAAgB,IACYpO,gDAAA;EAC5B,MAAMyO,IAAI,GAAG,MAAMN,SAAS,CAACC,QAAQ,CAAC;EACtC,OAAOV,8CAAK,CAAC/J,oDAAe,CAAC+K,MAAM,CAAC,MAAMD,IAAI,CAACE,IAAI,EAAE,CAAC,CAAC;AAC3D,CAAC;AAEM,MAAME,2BAA2B,GACpCT,QAAgB,IACoBpO,gDAAA;EACpC,MAAMyO,IAAI,GAAG,MAAMN,SAAS,CAACC,QAAQ,CAAC;EACtC,OAAOV,8CAAK,CAAChK,4DAAuB,CAACgL,MAAM,CAAC,MAAMD,IAAI,CAACE,IAAI,EAAE,CAAC,CAAC;AACnE,CAAC;AAED,MAAMG,oBAAoB,GAAGA,CACzBV,QAAgB,EAChBzO,KAAmB,KACIK,gDAAA;EACvB,MAAM,CAACsO,MAAM,EAAES,GAAG,CAAC,GAAGpP,KAAK,CAACC,EAAE,GACxB,CAAC,OAAO,EAAE,GAAGwO,QAAQ,GAAGzO,KAAK,CAACC,EAAE,GAAG,CAAC,GACpC,CAAC,MAAM,EAAEwO,QAAQ,CAAC;EACxB,MAAMrO,IAAI,GAAAsE,MAAA,CAAAC,MAAA,KAAQ3E,KAAK,CAAE;EACzB,OAAOI,IAAI,CAAC2E,KAAK;EACjB,OAAO3E,IAAI,CAAC+G,QAAQ;EACpB,OAAO/G,IAAI,CAACgH,UAAU;EACtB,MAAM0H,IAAI,GAAG,MAAMJ,KAAK,CAACU,GAAG,EAAE;IAC1BT,MAAM,EAAEA,MAAM;IACdC,OAAO,EAAE;MACL,QAAQ,EAAE,kBAAkB;MAC5B,cAAc,EAAE,kBAAkB;MAClC,CAACP,WAAW,GAAGC,YAAY;KAC9B;IACD5N,IAAI,EAAE2O,IAAI,CAACC,SAAS,CAAClP,IAAI;GAC5B,CAAC;EACF,OAAO2N,8CAAK,CAACE,gDAAW,CAACc,MAAM,CAAC,MAAMD,IAAI,CAACE,IAAI,EAAE,CAAC,CAAC;AACvD,CAAC;AAED,MAAMO,qBAAqB,GAAGA,CAC1Bd,QAAgB,EAChBzO,KAAmB,KACJK,gDAAA;EACf,IAAI,CAACL,KAAK,CAACC,EAAE,EAAE;IACX,MAAM,IAAIsF,KAAK,CAAC,6CAA6C,CAAC;EAClE;EAEA,IAAI,CAACvF,KAAK,CAACmH,QAAQ,IAAI,CAACnH,KAAK,CAACoH,UAAU,EAAE;IACtC,OAAOnG,OAAO,CAACuO,OAAO,EAAE;EAC5B;EAEA,IAAIxP,KAAK,CAACmH,QAAQ,IAAI,CAACnH,KAAK,CAACoH,UAAU,EAAE;IACrC,MAAMqI,QAAQ,GAAG,IAAIC,QAAQ,EAAE;IAC/BD,QAAQ,CAACE,MAAM,CAAC,OAAO,EAAE3P,KAAK,CAACmH,QAAQ,EAAEnH,KAAK,CAACmH,QAAQ,CAAC5C,IAAI,CAAC;IAC7D,MAAMmK,KAAK,CAAC,GAAGD,QAAQ,GAAGzO,KAAK,CAACC,EAAE,GAAG,EAAE;MACnC0O,MAAM,EAAE,OAAO;MACfC,OAAO,EAAE;QACLC,MAAM,EAAE,kBAAkB;QAC1B,CAACR,WAAW,GAAGC,YAAY;OAC9B;MACD5N,IAAI,EAAE+O;KACT,CAAC;IACF;EACJ;EAEA,IAAIzP,KAAK,CAACoH,UAAU,EAAE;IAClB,MAAMsH,KAAK,CAAC,GAAGD,QAAQ,GAAGzO,KAAK,CAACC,EAAE,GAAG,EAAE;MACnC0O,MAAM,EAAE,OAAO;MACfC,OAAO,EAAE;QACL,QAAQ,EAAE,kBAAkB;QAC5B,cAAc,EAAE,kBAAkB;QAClC,CAACP,WAAW,GAAGC,YAAY;OAC9B;MACD5N,IAAI,EAAE2O,IAAI,CAACC,SAAS,CAAC;QACjBvK,KAAK,EAAE;OACV;KACJ,CAAC;IACF;EACJ;AACJ,CAAC;AAEM,MAAMxH,eAAe,GAAGA,CAC3BkR,QAAgB,EAChBrO,IAAkB,KACKC,gDAAA;EACvB,MAAML,KAAK,GAAG,MAAMmP,oBAAoB,CAACV,QAAQ,EAAErO,IAAI,CAAC;EACxDA,IAAI,CAACH,EAAE,GAAGD,KAAK,CAACC,EAAE,CAAC,CAAC;EACpB,MAAMsP,qBAAqB,CAACd,QAAQ,EAAErO,IAAI,CAAC;EAC3C,OAAOJ,KAAK;AAChB,CAAC;AAEM,MAAMxC,iBAAiB,GAAGA,CAC7BiR,QAAgB,EAChBzO,KAAmB,KACJK,gDAAA;EACf,IAAI,CAACL,KAAK,CAACC,EAAE,EAAE;IACX,MAAM,IAAIsF,KAAK,CAAC,qCAAqC,CAAC;EAC1D;EACA,MAAMmJ,KAAK,CAAC,GAAGD,QAAQ,GAAGzO,KAAK,CAACC,EAAE,GAAG,EAAE;IACnC0O,MAAM,EAAE,QAAQ;IAChBC,OAAO,EAAE;MACLC,MAAM,EAAE,kBAAkB;MAC1B,CAACR,WAAW,GAAGC,YAAY;;GAElC,CAAC;AACN,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AClK0B;AACsB;AACC;AAE3C,MAAMP,KAAK,GAAO7L,MAA2B,IAAO;EACvD,IAAI4N,wDAAM,CAAC5N,MAAM,CAAC,EAAE;IAChB,MAAM,IAAIqD,KAAK,CAACsK,+DAAO,CAAC3N,MAAM,CAAC/D,IAAI,CAAC,CAAC4R,IAAI,CAAC,IAAI,CAAC,CAAC;EACpD;EACA,OAAO7N,MAAM,CAAC9D,KAAK;AACvB,CAAC;AAED,MAAM4R,QAAQ,GAAwBxG,IAAQ,IAAI;EAC9C,OAAOoG,wCAAO,CAAC,CAACA,0CAAM,EAAEpG,IAAI,CAAC,CAAC;AAClC,CAAC;AAEM,MAAM2G,QAAQ,GAAwB3G,IAAQ,IAAI;EACrD,OAAOoG,wCAAO,CAAC,CAACA,4CAAW,EAAEpG,IAAI,CAAC,CAAC;AACvC,CAAC;AAED,MAAM4G,QAAS,SAAQR,uCAAY;EAE/BhR,YAAA;IACI,KAAK,CACD,QAAQ,EACP0R,CAAC,IAAe;MACb,OAAOA,CAAC,YAAYC,IAAI;IAC5B,CAAC,EACD,CAACC,CAAC,EAAEC,CAAC,KAAI;MACL,OAAO,IAAI,CAACC,EAAE,CAACF,CAAC,CAAC,GAAGZ,0CAAS,CAACY,CAAC,CAAC,GAAGZ,0CAAS,CAACY,CAAC,EAAEC,CAAC,CAAC;IACtD,CAAC,EACDb,2CAAU,CACb;IAXI,KAAAiB,IAAI,GAAG,YAAqB;EAYrC;;AAEJ,MAAM/L,IAAI,GAAG,IAAIsL,QAAQ,EAAE;AAEpB,MAAMU,eAAe,GAAGlB,+CAAW,CAAC;EACvCnL,KAAK,EAAEmL,yCAAQ;EACfpF,YAAY,EAAEoF,yCAAQoB;CACzB,CAAC;AACK,MAAMhD,gBAAgB,GAAG4B,gDAAe,CAACkB,eAAe,CAAC;AAEzD,MAAMI,SAAS,GAAsBC,SAAwB,IAAI;EACpE,OAAOvB,+CAAW,CAAC;IACfpG,IAAI,EAAE2H,SAAS;IACfC,QAAQ,EAAExB,0CAAS;IACnB0B,SAAS,EAAE1B,0CAAS;IACpB9J,KAAK,EAAE8J,yCAAQ;IACf2B,SAAS,EAAEpB,QAAQ,CAACP,yCAAQ;GAC/B,CAAC;AACN,CAAC;AAEM,MAAM4B,YAAY,GAAGN,SAAS,CAACtB,0CAAS,CAAC,SAAS,CAAC,CAAC;AAEpD,MAAM8B,YAAY,GAAGR,SAAS,CAACtB,0CAAS,CAAC,SAAS,CAAC,CAAC;AAEpD,MAAM+B,aAAa,GAAGT,SAAS,CAACtB,0CAAS,CAAC,UAAU,CAAC,CAAC;AAEtD,MAAMgC,WAAW,GAAGhC,+CAAc,CAAC,CACtCsB,SAAS,CAACtB,0CAAS,CAAC,QAAQ,CAAC,CAAC,EAC9BA,+CAAW,CAAC;EACRkC,UAAU,EAAE3B,QAAQ,CAACP,yCAAQ;CAChC,CAAC,CACL,CAAC;AAEK,MAAMoC,WAAW,GAAGpC,+CAAc,CAAC,CACtCsB,SAAS,CAACtB,0CAAS,CAAC,QAAQ,CAAC,CAAC,EAC9BA,+CAAW,CAAC;EACRzO,OAAO,EAAE6M;CACZ,CAAC,CACL,CAAC;AAEK,MAAMiE,KAAK,GAAGrC,wCAAO,CAAC,CACzB4B,YAAY,EACZE,YAAY,EACZC,aAAa,EACbC,WAAW,EACXI,WAAW,EACXpC,0CAAS,CACZ,CAAC;AAEK,MAAMuC,UAAU,GAAGvC,wCAAO,CAAC,CAC9BA,0CAAS,CAAC,KAAK,CAAC,EAChBA,0CAAS,CAAC,MAAM,CAAC,EACjBA,0CAAS,CAAC,SAAS,CAAC,EACpBA,0CAAS,CAAC,MAAM,CAAC,EACjBA,0CAAS,CAAC,KAAK,CAAC,EAChBA,0CAAS,CAAC,OAAO,CAAC,EAClBA,0CAAS,CAAC,QAAQ,CAAC,CACtB,CAAC;AAEK,MAAMwC,kBAAkB,GAAGxC,+CAAW,CAAC;EAC1CrL,IAAI,EAAEqL,yCAAQ;EACd7I,WAAW,EAAE6I,yCAAQ;EACrByC,OAAO,EAAEzC,gDAAe,CAACA,yCAAQ,CAAC;EAClC0C,MAAM,EAAE1C,gDAAe,CAACA,yCAAQ,CAAC;EACjC2C,OAAO,EAAE3C,+CAAW,CAAC;IACjB4C,GAAG,EAAErC,QAAQ,CAACP,yCAAQ,CAACA,yCAAQ,EAAEqC,KAAK,CAAC,CAAC;IACxCS,IAAI,EAAEvC,QAAQ,CAACP,yCAAQ,CAACA,yCAAQ,EAAEqC,KAAK,CAAC,CAAC;IACzCU,OAAO,EAAExC,QAAQ,CAACP,yCAAQ,CAACA,yCAAQ,EAAEqC,KAAK,CAAC,CAAC;IAC5CW,IAAI,EAAEzC,QAAQ,CAACP,yCAAQ,CAACA,yCAAQ,EAAEqC,KAAK,CAAC,CAAC;IACzCY,GAAG,EAAE1C,QAAQ,CAACP,yCAAQ,CAACA,yCAAQ,EAAEqC,KAAK,CAAC,CAAC;IACxCa,KAAK,EAAE3C,QAAQ,CAACP,yCAAQ,CAACA,yCAAQ,EAAEqC,KAAK,CAAC,CAAC;IAC1Cc,MAAM,EAAE5C,QAAQ,CAACP,yCAAQ,CAACA,yCAAQ,EAAEqC,KAAK,CAAC;GAC7C;CACJ,CAAC;AAEK,MAAMe,OAAO,GAAGpD,+CAAW,CAAC;EAC/B3P,EAAE,EAAE2P,yCAAQ;EACZ7F,aAAa,EAAE6F,yCAAQ;EACvBqD,aAAa,EAAEjD,QAAQ,CACnBJ,+CAAW,CAAC;IACR3P,EAAE,EAAE2P,yCAAQ;IACZrL,IAAI,EAAEqL,yCAAQoB;GACjB,CAAC,CACL;EACDhH,KAAK,EAAE4F,yCAAQ;EACfsD,IAAI,EAAEtD,yCAAQ;EACd/E,SAAS,EAAE+E,0CAAS;EACpBzC,QAAQ,EAAEyC,0CAAS;EACnBrJ,MAAM,EAAEyJ,QAAQ,CAACJ,yCAAQ,CAAC;EAC1BuD,QAAQ,EAAEvD,wCAAO,CAACA,yCAAQ;CAC7B,CAAC;AACK,MAAMzB,QAAQ,GAAGyB,wCAAO,CAACoD,OAAO,CAAC;AAEjC,MAAMK,KAAK,GAAGzD,+CAAW,CAAC;EAC7B3P,EAAE,EAAE2P,yCAAQ;EACZ7F,aAAa,EAAE6F,yCAAQ;EACvBrL,IAAI,EAAEqL,yCAAQ;EACdsD,IAAI,EAAEtD,yCAAQ;EACd7I,WAAW,EAAE6I,yCAAQoB;CACxB,CAAC;AACK,MAAM5C,MAAM,GAAGwB,wCAAO,CAACyD,KAAK,CAAC;AAE7B,MAAMC,cAAc,GAAG1D,+CAAW,CAAC;EACtC3P,EAAE,EAAE+P,QAAQ,CAACJ,yCAAQ,CAAC;EACtB1H,kBAAkB,EAAE0H,yCAAQ;EAC5BpH,kBAAkB,EAAEoH,wCAAO,CAACA,yCAAQ;CACvC,CAAC;AACK,MAAM5L,eAAe,GAAG4L,wCAAO,CAAC0D,cAAc,CAAC;AAE/C,MAAMC,sBAAsB,GAAG3D,+CAAW,CAAC;EAC9C3P,EAAE,EAAE+P,QAAQ,CAACJ,yCAAQ,CAAC;EACtB1H,kBAAkB,EAAE0H,yCAAQ;EAC5BzH,eAAe,EAAEyH,yCAAQ;EACzBlK,QAAQ,EAAEkK,yCAAQmC;CACrB,CAAC;AACK,MAAMhO,uBAAuB,GAAG6L,wCAAO,CAAC2D,sBAAsB,CAAC;AAE/D,MAAMtF,WAAW,GAAG2B,+CAAW,CAAC;EACnC3P,EAAE,EAAE+P,QAAQ,CAACJ,yCAAQ,CAAC;EACtB/I,WAAW,EAAE+I,yCAAQ;EACrBrL,IAAI,EAAEqL,yCAAQ;EACd7I,WAAW,EAAE6I,yCAAQ;EACrB3I,SAAS,EAAEkJ,QAAQ,CAACH,QAAQ,CAACJ,0CAAS,CAAC,CAAC;EACxC5I,QAAQ,EAAE4I,yCAAQ;EAClB7K,KAAK,EAAEoL,QAAQ,CAACH,QAAQ,CAACJ,yCAAQ,CAAC,CAAC;EACnCzI,QAAQ,EAAEgJ,QAAQ,CAACH,QAAQ,CAAClL,IAAI,CAAC,CAAC;EAClCsC,UAAU,EAAE+I,QAAQ,CAACP,0CAAS,CAAC;EAC/BvI,kBAAkB,EAAEuI,wCAAO,CAACA,yCAAQ,CAAC;EACrCrI,iBAAiB,EAAEqI,wCAAO,CAACA,yCAAQ,CAAC;EACpCnI,gBAAgB,EAAEmI,wCAAO,CAAC0D,cAAc,CAAC;EACzC5L,yBAAyB,EAAEkI,wCAAO,CAAC2D,sBAAsB;CAC5D,CAAC;AACK,MAAMrF,YAAY,GAAG0B,wCAAO,CAAC3B,WAAW,CAAC;;;;;;;;;;;ACpKhD;;;;;;;;;;;;ACAA;;;;;;;UCAA;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;UAEA;UACA;;;;;WC5BA;WACA;WACA;WACA;WACA,+BAA+B,wCAAwC;WACvE;WACA;WACA;WACA;WACA,iBAAiB,qBAAqB;WACtC;WACA;WACA;WACA;WACA,kBAAkB,qBAAqB;WACvC,oHAAoH,iDAAiD;WACrK;WACA,KAAK;WACL;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;;;;;WC7BA;WACA;WACA;WACA,eAAe,4BAA4B;WAC3C,eAAe;WACf,iCAAiC,WAAW;WAC5C;WACA;;;;;WCPA;WACA;WACA;WACA;WACA,yCAAyC,wCAAwC;WACjF;WACA;WACA;;;;;WCPA;WACA;WACA;WACA;WACA,GAAG;WACH;WACA;WACA,CAAC;;;;;WCPD,8CAA8C;;;;;WCA9C;WACA;WACA;WACA,uDAAuD,iBAAiB;WACxE;WACA,gDAAgD,aAAa;WAC7D;;;;;WCNA;WACA;WACA;WACA;WACA;;;;;WCJA;;WAEA;WACA;WACA;WACA;WACA;WACA;;WAEA;;WAEA;;WAEA;;WAEA;;WAEA;;WAEA,8CAA8C;;WAE9C;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,iCAAiC,mCAAmC;WACpE;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,MAAM,qBAAqB;WAC3B;WACA;WACA;WACA;WACA;WACA;WACA;WACA;;WAEA;WACA;WACA;;;;;UElDA;UACA;UACA;UACA,oFAAoF,kDAAkD;UACtI","sources":["webpack://django-oscar-bundles/./src/bundles.tsx","webpack://django-oscar-bundles/./src/bundles/BundleGroupTable.tsx","webpack://django-oscar-bundles/./src/bundles/molecules/BundleGroupEditForm.tsx","webpack://django-oscar-bundles/./src/bundles/molecules/BundleGroupSearchForm.tsx","webpack://django-oscar-bundles/./src/bundles/molecules/BundleGroupTableRow.tsx","webpack://django-oscar-bundles/./src/bundles/molecules/elements/BundleGroupEditForm_Actions.tsx","webpack://django-oscar-bundles/./src/bundles/molecules/elements/BundleGroupEditForm_ConcreteBundles.tsx","webpack://django-oscar-bundles/./src/bundles/molecules/elements/BundleGroupEditForm_MetaFields.tsx","webpack://django-oscar-bundles/./src/bundles/molecules/elements/BundleGroupEditForm_ParentProducts.tsx","webpack://django-oscar-bundles/./src/bundles/molecules/elements/BundleGroupEditForm_UserConfigurableBundles.tsx","webpack://django-oscar-bundles/./src/utils/api.ts","webpack://django-oscar-bundles/./src/utils/models.ts","webpack://django-oscar-bundles/./src/bundles/BundleGroupTable.scss","webpack://django-oscar-bundles/./src/bundles/molecules/BundleGroupEditForm.scss?d307","webpack://django-oscar-bundles/webpack/bootstrap","webpack://django-oscar-bundles/webpack/runtime/chunk loaded","webpack://django-oscar-bundles/webpack/runtime/compat get default export","webpack://django-oscar-bundles/webpack/runtime/define property getters","webpack://django-oscar-bundles/webpack/runtime/global","webpack://django-oscar-bundles/webpack/runtime/hasOwnProperty shorthand","webpack://django-oscar-bundles/webpack/runtime/make namespace object","webpack://django-oscar-bundles/webpack/runtime/node module decorator","webpack://django-oscar-bundles/webpack/runtime/jsonp chunk loading","webpack://django-oscar-bundles/webpack/before-startup","webpack://django-oscar-bundles/webpack/startup","webpack://django-oscar-bundles/webpack/after-startup"],"sourcesContent":["// Load polyfills needed for IE11 and other old browsers\nimport \"core-js/stable\";\nimport \"regenerator-runtime/runtime\";\nimport React from \"react\";\nimport { createRoot } from \"react-dom/client\";\nimport BundleGroupTable from \"./bundles/BundleGroupTable\";\n\ntype INamedInterpolationData = { [key: string]: string };\ntype IPositionalInterpolationData = string[];\ntype IInterpolateFn = ((\n    fmt: string,\n    obj: IPositionalInterpolationData,\n    named?: false,\n) => string) &\n    ((fmt: string, obj: INamedInterpolationData, named: true) => string);\ninterface IDjango {\n    readonly gettext: (msgid: string) => string;\n    readonly ngettext: (\n        singular: string,\n        plural: string,\n        count: number,\n    ) => string;\n    readonly gettext_noop: (msgid: string) => string;\n    readonly pgettext: (context: string, msgid: string) => string;\n    readonly npgettext: (\n        context: string,\n        singular: string,\n        plural: string,\n        count: number,\n    ) => string;\n    readonly interpolate: IInterpolateFn;\n\n    readonly pluralidx: (count: number) => number;\n\n    readonly jsi18n_initialized: boolean;\n    readonly catalog: {\n        [msgid: string]: string;\n    };\n    readonly formats: {\n        [msgid: string]: string | string[];\n    };\n    readonly get_format: (formatType: string) => string | string[];\n}\n\ndeclare global {\n    // Django i18n functions\n    const django: IDjango;\n    const pluralidx: IDjango[\"pluralidx\"];\n    const gettext: IDjango[\"gettext\"];\n    const ngettext: IDjango[\"ngettext\"];\n    const gettext_noop: IDjango[\"gettext_noop\"];\n    const pgettext: IDjango[\"pgettext\"];\n    const npgettext: IDjango[\"npgettext\"];\n    const interpolate: IDjango[\"interpolate\"];\n    const get_format: IDjango[\"get_format\"];\n}\n\nconst main = function () {\n    const elem = document.querySelector(\"#bundlegroup-table\") as HTMLDivElement;\n    const bundleGroupTypeURL = elem.dataset.bundlegrouptypeApi || \"\";\n    const bundleGroupURL = elem.dataset.bundlegroupApi || \"\";\n    const concreteBundleURL = elem.dataset.concretebundleApi || \"\";\n    const concreteBundleProductChoiceURL =\n        elem.dataset.concretebundleProductChoiceApi || \"\";\n    const userConfigurableBundleURL =\n        elem.dataset.userconfigurablebundleApi || \"\";\n    const userConfigurableBundleRangeChoiceURL =\n        elem.dataset.userconfigurablebundleRangeChoiceApi || \"\";\n    const root = createRoot(elem);\n    root.render(\n        <BundleGroupTable\n            bundleGroupTypeURL={bundleGroupTypeURL}\n            bundleGroupURL={bundleGroupURL}\n            concreteBundleURL={concreteBundleURL}\n            concreteBundleProductChoiceURL={concreteBundleProductChoiceURL}\n            userConfigurableBundleURL={userConfigurableBundleURL}\n            userConfigurableBundleRangeChoiceURL={\n                userConfigurableBundleRangeChoiceURL\n            }\n        />,\n    );\n};\n\nmain();\n","import React from \"react\";\nimport lunr from \"lunr\";\nimport Modal from \"react-modal\";\nimport {\n    listBundleGroupTypes,\n    listBundleGroups,\n    listProducts,\n    listRanges,\n    saveBundleGroup,\n    deleteBundleGroup,\n} from \"../utils/api\";\nimport {\n    IBundleGroup,\n    IProduct,\n    IRange,\n    IDRFSelectOptions,\n} from \"../utils/models.interfaces\";\nimport BundleGroupSearchForm from \"./molecules/BundleGroupSearchForm\";\nimport BundleGroupEditForm from \"./molecules/BundleGroupEditForm\";\nimport BundleGroupTableRow from \"./molecules/BundleGroupTableRow\";\n\nimport \"./BundleGroupTable.scss\";\n\nModal.setAppElement(\"#bundlegroup-table\");\n\nconst modalStyles = {\n    overlay: {\n        backgroundColor: \"rgba(51, 51, 51, 0.8)\",\n        zIndex: 2000,\n    },\n    content: {\n        top: \"50%\",\n        left: \"50%\",\n        right: \"auto\",\n        bottom: \"auto\",\n        marginRight: \"-50%\",\n        transform: \"translate(-50%, -50%)\",\n        minWidth: \"800px\",\n        maxWidth: \"1000px\",\n        maxHeight: \"90%\",\n    },\n};\n\nexport interface IProps {\n    bundleGroupTypeURL: string;\n    bundleGroupURL: string;\n    concreteBundleURL: string;\n    concreteBundleProductChoiceURL: string;\n    userConfigurableBundleURL: string;\n    userConfigurableBundleRangeChoiceURL: string;\n}\n\nexport interface IState {\n    bundleTypeChoices: IDRFSelectOptions;\n    groups: IBundleGroup[];\n    products: IProduct[];\n    ranges: IRange[];\n    searchText: string;\n    selectedGroup: number | null;\n    editModalOpen: boolean;\n    isSaving: boolean;\n    isLoading: boolean;\n    formErrors: {\n        name?: string[];\n        description?: string[];\n        image?: string[];\n        triggering_parents?: string[];\n        suggested_parents?: string[];\n    };\n}\n\nclass BundleGroupTable extends React.Component<IProps, IState> {\n    idx: lunr.Index | undefined;\n\n    state: IState = {\n        bundleTypeChoices: [],\n        groups: [],\n        products: [],\n        ranges: [],\n        searchText: \"\",\n        selectedGroup: null,\n        editModalOpen: false,\n        isSaving: false,\n        isLoading: true,\n        formErrors: {},\n    };\n\n    private readonly onSearchTextChange = (text: string) => {\n        this.setState({\n            searchText: text,\n        });\n    };\n\n    private readonly onCreate = (e: React.MouseEvent<HTMLElement>) => {\n        e.preventDefault();\n        this.openCreateModal();\n    };\n\n    private readonly onOpenEditModal = (group: IBundleGroup) => {\n        this.setState({\n            selectedGroup: group.id,\n            formErrors: {},\n            editModalOpen: true,\n        });\n    };\n\n    private readonly onCloseModal = () => {\n        this.setState({\n            selectedGroup: null,\n            formErrors: {},\n            editModalOpen: false,\n        });\n    };\n\n    private readonly onSaveBundleGroup = async (data: IBundleGroup) => {\n        this.setState({ isSaving: true });\n        try {\n            await saveBundleGroup(this.props.bundleGroupURL, data);\n            await this.loadData();\n            this.setState({ isSaving: false });\n            this.onCloseModal();\n        } catch (err) {\n            this.setState({\n                isSaving: false,\n                /* eslint-disable-next-line @typescript-eslint/no-unsafe-member-access,@typescript-eslint/no-explicit-any,@typescript-eslint/no-unsafe-assignment */\n                formErrors: (err as any).response.body,\n            });\n        }\n    };\n\n    private readonly onDeleteBundleGroup = async (data: IBundleGroup) => {\n        await deleteBundleGroup(this.props.bundleGroupURL, data);\n        return this.loadData();\n    };\n\n    componentDidMount() {\n        this.loadData().catch((err) => {\n            console.error(err);\n        });\n    }\n\n    private async loadData() {\n        this.setState({ isLoading: true });\n        const loading = Promise.all([\n            listBundleGroupTypes(this.props.bundleGroupTypeURL),\n            listBundleGroups(this.props.bundleGroupURL),\n            listProducts(this.props.concreteBundleProductChoiceURL),\n            listRanges(this.props.userConfigurableBundleRangeChoiceURL),\n        ]);\n        const [choices, groups, products, ranges] = await loading;\n        this.setBundleTypeChoices(choices);\n        this.setGroups(groups);\n        this.setProducts(products);\n        this.setRanges(ranges);\n        this.setState({ isLoading: false });\n    }\n\n    private openCreateModal() {\n        this.setState({\n            selectedGroup: null,\n            formErrors: {},\n            editModalOpen: true,\n        });\n    }\n\n    private setGroups(groups: IBundleGroup[]) {\n        // Update the search index\n        this.idx = lunr(function () {\n            this.ref(\"id\");\n            this.field(\"name\");\n            this.field(\"description\");\n            groups.forEach((g) => {\n                this.add(g);\n            });\n        });\n        // Update the component state\n        this.setState({\n            groups: groups,\n        });\n    }\n\n    private setBundleTypeChoices(choices: IDRFSelectOptions) {\n        this.setState({\n            bundleTypeChoices: choices,\n        });\n    }\n\n    private setProducts(products: IProduct[]) {\n        this.setState({\n            products: products,\n        });\n    }\n\n    private setRanges(ranges: IRange[]) {\n        this.setState({\n            ranges: ranges,\n        });\n    }\n\n    private getSearchResults(searchText: string) {\n        if (!this.idx) {\n            return [];\n        }\n        const results = this.idx.search(searchText);\n        return results\n            .map((result) => {\n                const gid = parseInt(result.ref, 10);\n                return this.state.groups.find((g) => {\n                    return g.id === gid;\n                });\n            })\n            .filter((group): group is IBundleGroup => {\n                return !!group;\n            });\n    }\n\n    private buildGroupRows() {\n        const searchText = this.state.searchText.trim();\n        const results = searchText\n            ? this.getSearchResults(searchText)\n            : this.state.groups;\n        const numTableColumns = 6;\n        if (this.state.isLoading) {\n            return (\n                <tr>\n                    <td colSpan={numTableColumns}>\n                        <em>{gettext(\"Loading…\")}</em>\n                    </td>\n                </tr>\n            );\n        }\n        if (results.length <= 0) {\n            const msg = searchText\n                ? interpolate(\n                      gettext(\n                          \"No bundle groups found for search: %(searchText)s\",\n                      ),\n                      { searchText: searchText },\n                      true,\n                  )\n                : gettext(\"No bundle groups found.\");\n            return (\n                <tr>\n                    <td colSpan={numTableColumns}>{msg}</td>\n                </tr>\n            );\n        }\n        return results.map((group) => {\n            return (\n                <BundleGroupTableRow\n                    key={`${group.id}`}\n                    bundleTypeChoices={this.state.bundleTypeChoices}\n                    group={group}\n                    products={this.state.products}\n                    ranges={this.state.ranges}\n                    onEdit={this.onOpenEditModal}\n                    onDelete={(bg) => {\n                        this.onDeleteBundleGroup(bg).catch((err) => {\n                            console.error(err);\n                        });\n                    }}\n                />\n            );\n        });\n    }\n\n    private buildEditModal() {\n        const group = this.state.groups.find((g) => {\n            return g.id === this.state.selectedGroup;\n        });\n        return (\n            <Modal\n                contentLabel={gettext(\"Edit Bundle Group\")}\n                style={modalStyles}\n                isOpen={this.state.editModalOpen}\n            >\n                <BundleGroupEditForm\n                    bundleTypeChoices={this.state.bundleTypeChoices}\n                    group={group || null}\n                    products={this.state.products}\n                    ranges={this.state.ranges}\n                    isSaving={this.state.isSaving}\n                    errors={this.state.formErrors}\n                    onCancel={this.onCloseModal}\n                    onSave={(bg) => {\n                        this.onSaveBundleGroup(bg).catch((err) => {\n                            console.error(err);\n                        });\n                    }}\n                />\n            </Modal>\n        );\n    }\n\n    render() {\n        return (\n            <div>\n                <div className=\"page-header\">\n                    <a\n                        className=\"btn btn-primary float-right\"\n                        onClick={this.onCreate}\n                    >\n                        <i className=\"fas fa-plus-circle\"></i>{\" \"}\n                        {gettext(\"Create new bundle group\")}\n                    </a>\n                    <h1>{gettext(\"Bundle Groups\")}</h1>\n                </div>\n                <div className=\"table-header\">\n                    <h3>\n                        <i className=\"fas fa-search\"></i>\n                        {gettext(\"Search Bundle Groups\")}\n                    </h3>\n                </div>\n                <BundleGroupSearchForm\n                    searchText={this.state.searchText}\n                    onChange={this.onSearchTextChange}\n                />\n\n                <table className=\"table table-striped table-bordered\">\n                    <tbody>\n                        <tr>\n                            <th>{gettext(\"Name\")}</th>\n                            <th>{gettext(\"Type\")}</th>\n                            <th>{gettext(\"Image\")}</th>\n                            <th>{gettext(\"Triggers\")}</th>\n                            <th>{gettext(\"Suggestions\")}</th>\n                            <th>{gettext(\"Active Status\")}</th>\n                            <th>{gettext(\"Actions\")}</th>\n                        </tr>\n                        {this.buildGroupRows()}\n                    </tbody>\n                </table>\n\n                {this.buildEditModal()}\n            </div>\n        );\n    }\n}\n\nexport default BundleGroupTable;\n","import React from \"react\";\nimport {\n    IBundleGroup,\n    IConcreteBundle,\n    IUserConfigurableBundle,\n    IProduct,\n    IRange,\n    IDRFSelectOptions,\n    SelectOption,\n} from \"../../utils/models.interfaces\";\nimport { BundleGroupMetaFields } from \"./elements/BundleGroupEditForm_MetaFields\";\nimport { ParentProductsEditForm } from \"./elements/BundleGroupEditForm_ParentProducts\";\nimport {\n    ILinkedRanges,\n    UserConfigurableBundles,\n} from \"./elements/BundleGroupEditForm_UserConfigurableBundles\";\nimport {\n    ILinkedProducts,\n    ConcreteBundles,\n} from \"./elements/BundleGroupEditForm_ConcreteBundles\";\nimport { BundleGroupEditFormActions } from \"./elements/BundleGroupEditForm_Actions\";\n\nimport \"./BundleGroupEditForm.scss\";\n\ninterface IProps {\n    bundleTypeChoices: IDRFSelectOptions;\n    group: IBundleGroup | null;\n    products: IProduct[];\n    ranges: IRange[];\n    isSaving: boolean;\n    errors: {\n        bundleType?: string[];\n        name?: string[];\n        headline?: string[];\n        description?: string[];\n        image?: string[];\n        triggering_parents?: string[];\n        suggested_parents?: string[];\n    };\n    onCancel: () => void;\n    onSave: (data: IBundleGroup) => void;\n}\n\ninterface IState {\n    bundleType: string;\n    name: string;\n    headline: string;\n    description: string;\n    isActive: boolean | undefined | null;\n    image: File | null;\n    clearImage: boolean;\n    triggeringParents: number[];\n    suggestedParents: number[];\n    linkedRanges: ILinkedRanges;\n    linkedProducts: ILinkedProducts;\n}\n\nconst _isSelectOptionArray = (\n    opts: SelectOption | ReadonlyArray<SelectOption> | null | undefined,\n): opts is ReadonlyArray<SelectOption> => {\n    return !!opts && (opts as ReadonlyArray<SelectOption>).length !== undefined;\n};\n\nconst _isSelectOption = (\n    opts: SelectOption | ReadonlyArray<SelectOption> | null | undefined,\n): opts is SelectOption => {\n    return !!opts && !_isSelectOptionArray(opts);\n};\n\nclass BundleGroupEditForm extends React.PureComponent<IProps, IState> {\n    private productIdx: { [id: number]: IProduct };\n\n    constructor(props: IProps) {\n        super(props);\n\n        // Build linked ranges data set\n        const linkedRanges: IState[\"linkedRanges\"] = {};\n        const configurableBundles = props.group\n            ? props.group.user_configurable_bundles\n            : [];\n        configurableBundles.forEach((bundle) => {\n            if (!linkedRanges[bundle.triggering_product]) {\n                linkedRanges[bundle.triggering_product] = [];\n            }\n            linkedRanges[bundle.triggering_product].push({\n                rangeID: bundle.suggested_range,\n                quantity: bundle.quantity,\n            });\n        });\n\n        // Build linked products data set\n        const linkedProducts: IState[\"linkedProducts\"] = {};\n        const concreteBundles = props.group ? props.group.concrete_bundles : [];\n        concreteBundles.forEach((bundle) => {\n            if (!linkedProducts[bundle.triggering_product]) {\n                linkedProducts[bundle.triggering_product] = [];\n            }\n            linkedProducts[bundle.triggering_product] = linkedProducts[\n                bundle.triggering_product\n            ]\n                .concat(bundle.suggested_products)\n                .filter((id, i, ids) => {\n                    return ids.indexOf(id) === i;\n                });\n        });\n\n        // Build initial state\n        const state: IState = {\n            bundleType: \"\",\n            name: \"\",\n            description: \"\",\n            headline: \"\",\n            isActive: true,\n            image: null,\n            clearImage: false,\n            triggeringParents: [],\n            suggestedParents: [],\n            linkedRanges: linkedRanges,\n            linkedProducts: linkedProducts,\n        };\n        if (props.group) {\n            state.bundleType = props.group.bundle_type;\n            state.name = props.group.name;\n            state.description = props.group.description;\n            state.headline = props.group.headline;\n            state.isActive = props.group.is_active;\n            state.triggeringParents = props.group.triggering_parents;\n            state.suggestedParents = props.group.suggested_parents;\n        } else if (props.bundleTypeChoices.length > 0) {\n            state.bundleType = props.bundleTypeChoices[0].value;\n        }\n        this.state = state;\n        this.productIdx = {};\n        this.fillProductIdx(props.products);\n    }\n\n    private readonly onEdit = (\n        e: React.FormEvent<\n            HTMLInputElement | HTMLTextAreaElement | HTMLSelectElement\n        >,\n    ) => {\n        const name = e.currentTarget.name as keyof IState;\n        const value = e.currentTarget.value;\n        this.setState((state) => {\n            return { ...state, [name]: value };\n        });\n    };\n\n    private readonly onSelectImage = (e: React.FormEvent<HTMLInputElement>) => {\n        if (!e.currentTarget.files) {\n            return;\n        }\n        const file = e.currentTarget.files[0];\n        this.setState({\n            image: file,\n        });\n    };\n\n    private readonly onSelectParent = (\n        name: \"triggeringParents\" | \"suggestedParents\",\n        opts: SelectOption | ReadonlyArray<SelectOption> | null | undefined,\n    ) => {\n        let options: ReadonlyArray<SelectOption>;\n        if (!opts) {\n            options = [];\n        } else if ((opts as ReadonlyArray<SelectOption>).length === undefined) {\n            options = [opts as SelectOption];\n        } else {\n            options = opts as ReadonlyArray<SelectOption>;\n        }\n        this.setState((state) => {\n            return {\n                ...state,\n                [name]: options.map((o) => {\n                    return o.value;\n                }),\n            };\n        });\n    };\n\n    private readonly onLinkedRangesChange = (\n        trigger: IProduct,\n        rangeIndex: number,\n        opts: SelectOption | ReadonlyArray<SelectOption> | null | undefined,\n    ) => {\n        let option: SelectOption | null = null;\n        if (_isSelectOption(opts)) {\n            option = opts;\n        } else if (_isSelectOptionArray(opts)) {\n            throw new Error(\n                \"Can not link multiple ranges to a single trigger parent\",\n            );\n        }\n        this.setState((state) => {\n            const linkedRanges = {\n                ...state.linkedRanges,\n            };\n            if (option) {\n                if (!linkedRanges[trigger.id]) {\n                    linkedRanges[trigger.id] = [];\n                }\n                linkedRanges[trigger.id][rangeIndex] = {\n                    ...(linkedRanges[trigger.id][rangeIndex] || {}),\n                    rangeID: option.value,\n                    quantity: 1,\n                };\n            } else {\n                linkedRanges[trigger.id].splice(rangeIndex, 1);\n                linkedRanges[trigger.id] = linkedRanges[trigger.id].filter(\n                    (r) => !!r,\n                );\n                if (linkedRanges[trigger.id].length <= 0) {\n                    delete linkedRanges[trigger.id];\n                }\n            }\n            return { ...state, linkedRanges: linkedRanges };\n        });\n    };\n\n    private readonly onLinkedRangesQuantityChange = (\n        trigger: IProduct,\n        rangeIndex: number,\n        opts: SelectOption | ReadonlyArray<SelectOption> | null | undefined,\n    ) => {\n        let option: SelectOption = { value: 1, label: \"1\" };\n        if (_isSelectOption(opts)) {\n            option = opts;\n        } else if (_isSelectOptionArray(opts)) {\n            throw new Error(\n                \"Can not link multiple quantities to a single range parent\",\n            );\n        }\n        this.setState((state) => {\n            const linkedRanges = {\n                ...state.linkedRanges,\n            };\n            if (\n                linkedRanges[trigger.id] &&\n                linkedRanges[trigger.id][rangeIndex]\n            ) {\n                linkedRanges[trigger.id][rangeIndex] = {\n                    ...linkedRanges[trigger.id][rangeIndex],\n                    quantity: option.value,\n                };\n            }\n            return { ...state, linkedRanges: linkedRanges };\n        });\n    };\n\n    private readonly onLinkedProductsChange = (\n        trigger: IProduct,\n        suggestParent: IProduct,\n        opts: SelectOption | ReadonlyArray<SelectOption> | null | undefined,\n    ) => {\n        let options: ReadonlyArray<SelectOption>;\n        if (!opts) {\n            options = [];\n        } else if (_isSelectOption(opts)) {\n            options = [opts];\n        } else {\n            options = opts;\n        }\n        const ids = options.map((o) => {\n            return o.value;\n        });\n        this.setState((state) => {\n            const oldIDs = (state.linkedProducts[trigger.id] || []).filter(\n                (sid) => {\n                    const suggestion = this.getProduct(sid);\n                    return (\n                        suggestion.id !== suggestParent.id &&\n                        suggestion.parent !== suggestParent.id\n                    );\n                },\n            );\n            const newIDs = oldIDs.concat(ids).filter((id, i, _ids) => {\n                return _ids.indexOf(id) === i;\n            });\n            const linkedProducts = {\n                ...state.linkedProducts,\n                [trigger.id]: newIDs,\n            };\n            return { ...state, linkedProducts: linkedProducts };\n        });\n    };\n\n    private readonly onCancel = (e: React.MouseEvent<HTMLElement>) => {\n        e.preventDefault();\n        this.props.onCancel();\n    };\n\n    private readonly onSave = (e: React.FormEvent<HTMLFormElement>) => {\n        e.preventDefault();\n\n        const data: IBundleGroup = {\n            id: this.props.group ? this.props.group.id : null,\n            bundle_type: this.state.bundleType,\n            name: this.state.name,\n            description: this.state.description,\n            headline: this.state.headline,\n            is_active: this.state.isActive,\n            image: this.props.group ? this.props.group.image : \"\",\n            newImage: this.state.clearImage ? null : this.state.image,\n            clearImage: this.state.clearImage,\n            triggering_parents: this.state.triggeringParents,\n            suggested_parents: this.state.suggestedParents,\n            concrete_bundles: [],\n            user_configurable_bundles: [],\n        };\n\n        Object.keys(this.state.linkedRanges).forEach((tID) => {\n            const triggerID = parseInt(tID, 10);\n            const tProduct = this.getProduct(triggerID);\n            if (\n                data.triggering_parents.indexOf(tProduct.id) === -1 &&\n                (!tProduct.parent ||\n                    data.triggering_parents.indexOf(tProduct.parent) === -1)\n            ) {\n                return;\n            }\n            const linkedRanges = this.state.linkedRanges[triggerID];\n            linkedRanges.forEach(({ rangeID, quantity }) => {\n                if (!rangeID || !quantity) {\n                    return;\n                }\n                let preExistingBundle: IUserConfigurableBundle | undefined =\n                    undefined;\n                if (this.props.group) {\n                    preExistingBundle =\n                        this.props.group.user_configurable_bundles.find((b) => {\n                            return (\n                                b.triggering_product === triggerID &&\n                                b.suggested_range === rangeID\n                            );\n                        });\n                }\n                data.user_configurable_bundles.push({\n                    id: preExistingBundle ? preExistingBundle.id : null,\n                    triggering_product: triggerID,\n                    suggested_range: rangeID,\n                    quantity: quantity,\n                });\n            });\n        });\n\n        Object.keys(this.state.linkedProducts).forEach((tID) => {\n            const triggerID = parseInt(tID, 10);\n            const tProduct = this.getProduct(triggerID);\n            if (\n                data.triggering_parents.indexOf(tProduct.id) === -1 &&\n                (!tProduct.parent ||\n                    data.triggering_parents.indexOf(tProduct.parent) === -1)\n            ) {\n                return;\n            }\n\n            let preExistingBundle: IConcreteBundle | undefined = undefined;\n            if (this.props.group) {\n                preExistingBundle = this.props.group.concrete_bundles.find(\n                    (b) => {\n                        return b.triggering_product === triggerID;\n                    },\n                );\n            }\n\n            const suggestionIDs = this.state.linkedProducts[triggerID].filter(\n                (sID) => {\n                    const sProduct = this.getProduct(sID);\n                    return (\n                        data.suggested_parents.indexOf(sProduct.id) !== -1 ||\n                        (sProduct.parent &&\n                            data.suggested_parents.indexOf(sProduct.parent) !==\n                                -1)\n                    );\n                },\n            );\n\n            if (suggestionIDs.length <= 0) {\n                return;\n            }\n\n            data.concrete_bundles.push({\n                id: preExistingBundle ? preExistingBundle.id : null,\n                triggering_product: triggerID,\n                suggested_products: suggestionIDs,\n            });\n        });\n\n        this.props.onSave(data);\n    };\n\n    private readonly onClearImage = (e: React.FormEvent<HTMLInputElement>) => {\n        this.setState({\n            clearImage: e.currentTarget.checked,\n        });\n    };\n\n    private readonly getProduct = (productID: number) => {\n        return this.productIdx[productID];\n    };\n\n    UNSAFE_componentWillReceiveProps(nextProps: IProps) {\n        this.fillProductIdx(nextProps.products);\n    }\n\n    private fillProductIdx(products: IProduct[]) {\n        this.productIdx = {};\n        products.forEach((p) => {\n            this.productIdx[p.id] = p;\n        });\n    }\n\n    render() {\n        return (\n            <form className=\"row bundle-group-edit\" onSubmit={this.onSave}>\n                <BundleGroupMetaFields\n                    bundleTypeChoices={this.props.bundleTypeChoices}\n                    group={this.props.group}\n                    isSaving={this.props.isSaving}\n                    errors={this.props.errors}\n                    bundleType={this.state.bundleType}\n                    name={this.state.name}\n                    headline={this.state.headline}\n                    description={this.state.description}\n                    isActive={this.state.isActive || false}\n                    image={this.state.image}\n                    clearImage={this.state.clearImage}\n                    onEdit={this.onEdit}\n                    onSelectImage={this.onSelectImage}\n                    onClearImage={this.onClearImage}\n                />\n                <ParentProductsEditForm\n                    products={this.props.products}\n                    isSaving={this.props.isSaving}\n                    errors={this.props.errors}\n                    triggeringParents={this.state.triggeringParents}\n                    suggestedParents={this.state.suggestedParents}\n                    onSelectParent={this.onSelectParent}\n                />\n                <UserConfigurableBundles\n                    ranges={this.props.ranges}\n                    isSaving={this.props.isSaving}\n                    triggeringParents={this.state.triggeringParents}\n                    linkedRanges={this.state.linkedRanges}\n                    getProduct={this.getProduct}\n                    onLinkedRangesChange={this.onLinkedRangesChange}\n                    onLinkedRangeQuantityChange={\n                        this.onLinkedRangesQuantityChange\n                    }\n                />\n                <ConcreteBundles\n                    products={this.props.products}\n                    isSaving={this.props.isSaving}\n                    triggeringParents={this.state.triggeringParents}\n                    suggestedParents={this.state.suggestedParents}\n                    linkedProducts={this.state.linkedProducts}\n                    getProduct={this.getProduct}\n                    onLinkedProductsChange={this.onLinkedProductsChange}\n                />\n                <BundleGroupEditFormActions onCancel={this.onCancel} />\n            </form>\n        );\n    }\n}\n\nexport default BundleGroupEditForm;\n","import React from \"react\";\n\nexport interface IProps {\n    searchText: string;\n    onChange: (searchText: string) => void;\n}\n\nclass BundleGroupSearchForm extends React.PureComponent<IProps> {\n    render() {\n        const onChange = (e: React.FormEvent<HTMLInputElement>) => {\n            e.preventDefault();\n            this.props.onChange(e.currentTarget.value);\n        };\n\n        const onClear = (e: React.FormEvent<HTMLButtonElement>) => {\n            e.preventDefault();\n            this.props.onChange(\"\");\n        };\n\n        const onSubmit = function (e: React.FormEvent<HTMLFormElement>) {\n            e.preventDefault();\n        };\n\n        return (\n            <div className=\"card card-body bg-light\">\n                <form className=\"form-inline\" onSubmit={onSubmit}>\n                    <span className=\"form-group\">\n                        <label htmlFor=\"id_text\">{gettext(\"Search:\")}</label>\n                        <input\n                            className=\"form-control\"\n                            id=\"id_text\"\n                            value={this.props.searchText}\n                            onChange={onChange}\n                        />\n                    </span>{\" \"}\n                    <button\n                        type=\"button\"\n                        className=\"btn btn-secondary\"\n                        onClick={onClear}\n                    >\n                        {gettext(\"Clear Search\")}\n                    </button>\n                </form>\n            </div>\n        );\n    }\n}\n\nexport default BundleGroupSearchForm;\n","import React from \"react\";\nimport {\n    IBundleGroup,\n    IProduct,\n    IRange,\n    IDRFSelectOptions,\n} from \"../../utils/models.interfaces\";\n\nexport interface IProps {\n    bundleTypeChoices: IDRFSelectOptions;\n    group: IBundleGroup;\n    products: IProduct[];\n    ranges: IRange[];\n    onEdit: (group: IBundleGroup) => void;\n    onDelete: (group: IBundleGroup) => void;\n}\n\nclass BundleGroupTableRow extends React.PureComponent<IProps> {\n    private buildGroupActions() {\n        const onEdit = (e: React.MouseEvent<HTMLAnchorElement>) => {\n            e.preventDefault();\n            this.props.onEdit(this.props.group);\n        };\n        const onDelete = (e: React.MouseEvent<HTMLAnchorElement>) => {\n            e.preventDefault();\n            const msgFormat = gettext(\n                \"Are you sure you want to delete this bundle group (%(name)s) and all its associated bundles?\",\n            );\n            const data = {\n                name: this.props.group.name,\n            };\n            const msg = interpolate(msgFormat, data, true);\n            if (confirm(msg)) {\n                this.props.onDelete(this.props.group);\n            }\n        };\n        return (\n            <div className=\"btn-toolbar\">\n                <div className=\"dropdown\">\n                    <button\n                        className=\"btn btn-secondary dropdown-toggle\"\n                        type=\"button\"\n                        data-toggle=\"dropdown\"\n                        aria-haspopup=\"true\"\n                        aria-expanded=\"false\"\n                    >\n                        {gettext(\"Actions\")} <span className=\"caret\"></span>\n                    </button>\n                    <ul className=\"dropdown-menu dropdown-menu-right\">\n                        <a className=\"dropdown-item\" onClick={onEdit}>\n                            {gettext(\"Edit\")}\n                        </a>\n                        <a className=\"dropdown-item\" onClick={onDelete}>\n                            {gettext(\"Delete\")}\n                        </a>\n                    </ul>\n                </div>\n            </div>\n        );\n    }\n\n    private buildProductList(productIDs: number[]) {\n        const products = this.props.products.filter((p) => {\n            return productIDs.indexOf(p.id) !== -1;\n        });\n        return (\n            <ul>\n                {products.map((p) => {\n                    return (\n                        <li key={p.id}>\n                            <a href={p.dashboard_url}>{p.title}</a>\n                        </li>\n                    );\n                })}\n            </ul>\n        );\n    }\n\n    private buildRangeList() {\n        const rangeIDs = this.props.group.user_configurable_bundles.map(\n            (bundle) => bundle.suggested_range,\n        );\n        const ranges = this.props.ranges.filter((r) => {\n            return rangeIDs.includes(r.id);\n        });\n        return (\n            <ul>\n                {ranges.map((r) => {\n                    return (\n                        <li key={r.id}>\n                            <a href={r.dashboard_url}>{r.name}</a>\n                        </li>\n                    );\n                })}\n            </ul>\n        );\n    }\n\n    render() {\n        const bundleType = this.props.bundleTypeChoices.find((choice) => {\n            return choice.value === this.props.group.bundle_type;\n        });\n        let suggestedProducts: JSX.Element | null = null;\n        let suggestedRanges: JSX.Element | null = null;\n        if (this.props.group.suggested_parents) {\n            suggestedProducts = (\n                <>\n                    <em>{gettext(\"Products:\")}</em>\n                    {this.buildProductList(this.props.group.suggested_parents)}\n                </>\n            );\n        }\n        if (this.props.group.user_configurable_bundles.length > 0) {\n            suggestedRanges = (\n                <>\n                    <em>{gettext(\"Ranges:\")}</em>\n                    {this.buildRangeList()}\n                </>\n            );\n        }\n        return (\n            <tr key={`${this.props.group.id}`}>\n                <td>{this.props.group.name}</td>\n                <td>{bundleType ? bundleType.display_name : \"\"}</td>\n                <td>\n                    <img\n                        src={this.props.group.image || undefined}\n                        width={100}\n                    />\n                </td>\n                <td>\n                    {this.buildProductList(this.props.group.triggering_parents)}\n                </td>\n                <td>\n                    {suggestedProducts}\n                    {suggestedRanges}\n                </td>\n                <td>\n                    {this.props.group.is_active\n                        ? gettext(\"Active\")\n                        : gettext(\"Inactive\")}\n                </td>\n                <td>{this.buildGroupActions()}</td>\n            </tr>\n        );\n    }\n}\n\nexport default BundleGroupTableRow;\n","import React from \"react\";\n\ninterface IProps {\n    onCancel: (e: React.MouseEvent<HTMLElement>) => void;\n}\n\nexport class BundleGroupEditFormActions extends React.PureComponent<IProps> {\n    render() {\n        return (\n            <div className=\"col-sm-12 bundle-group-edit__section\">\n                <div className=\"form-group\">\n                    <a\n                        className=\"btn btn-secondary\"\n                        onClick={this.props.onCancel}\n                    >\n                        {gettext(\"Cancel\")}\n                    </a>{\" \"}\n                    <button className=\"btn btn-primary\" type=\"submit\">\n                        {gettext(\"Save\")}\n                    </button>\n                </div>\n            </div>\n        );\n    }\n}\n","import React from \"react\";\nimport Select from \"react-select\";\nimport { IProduct, SelectOption } from \"../../../utils/models.interfaces\";\n\nexport type ILinkedProducts = {\n    [triggeringProductID: number]: number[];\n};\n\ninterface IProps {\n    products: IProduct[];\n    isSaving: boolean;\n    triggeringParents: number[];\n    suggestedParents: number[];\n    linkedProducts: ILinkedProducts;\n    getProduct: (productID: number) => IProduct;\n    onLinkedProductsChange: (\n        trigger: IProduct,\n        suggestParent: IProduct,\n        opts: SelectOption | ReadonlyArray<SelectOption> | null | undefined,\n    ) => void;\n}\n\nexport class ConcreteBundles extends React.PureComponent<IProps> {\n    private getChildProductSelectOptions(parent: IProduct) {\n        return this.props.products\n            .filter((p) => {\n                return (\n                    !p.is_parent &&\n                    (p.id === parent.id || p.parent === parent.id)\n                );\n            })\n            .sort((a, b) => {\n                return a.title.localeCompare(b.title);\n            })\n            .map((p) => {\n                const opt: SelectOption = {\n                    value: p.id,\n                    label: p.title,\n                };\n                return opt;\n            });\n    }\n\n    private buildBundleRows(triggerParent: IProduct, suggestParent: IProduct) {\n        const triggerOptions = this.props.products\n            .filter((p) => {\n                return (\n                    !p.is_parent &&\n                    (p.id === triggerParent.id || p.parent === triggerParent.id)\n                );\n            })\n            .sort((a, b) => {\n                return a.title.localeCompare(b.title);\n            });\n        const suggestOptions = this.getChildProductSelectOptions(suggestParent);\n        return (\n            <table className=\"table bundle-group-edit__link-table\">\n                <tbody>\n                    {triggerOptions.map((trigger) => {\n                        const selectValue = (\n                            this.props.linkedProducts[trigger.id] || []\n                        ).filter((sid) => {\n                            const suggestion = this.props.getProduct(sid);\n                            return (\n                                suggestion.id === suggestParent.id ||\n                                suggestion.parent === suggestParent.id\n                            );\n                        });\n                        return (\n                            <tr key={trigger.id}>\n                                <th>\n                                    <a\n                                        href={trigger.dashboard_url}\n                                        target=\"_blank\"\n                                        rel=\"noreferrer\"\n                                    >\n                                        {trigger.title}\n                                    </a>\n                                </th>\n                                <td>\n                                    <Select\n                                        isMulti={true}\n                                        value={suggestOptions.filter((o) =>\n                                            selectValue.includes(o.value),\n                                        )}\n                                        options={suggestOptions}\n                                        onChange={this.props.onLinkedProductsChange.bind(\n                                            this,\n                                            trigger,\n                                            suggestParent,\n                                        )}\n                                        isDisabled={this.props.isSaving}\n                                    />\n                                </td>\n                            </tr>\n                        );\n                    })}\n                </tbody>\n            </table>\n        );\n    }\n\n    private buildParentRows() {\n        type ICombination = {\n            triggerParent: IProduct;\n            suggestParent: IProduct;\n        };\n        if (\n            this.props.triggeringParents.length <= 0 ||\n            this.props.suggestedParents.length <= 0\n        ) {\n            return (\n                <div className=\"row\">\n                    <div className=\"col-sm-12\">\n                        <p>\n                            <em>\n                                {gettext(\n                                    \"Select at least one trigger product and one suggested product to begin linking variants.\",\n                                )}\n                            </em>\n                        </p>\n                    </div>\n                </div>\n            );\n        }\n        const parentCombinations: { [key: string]: ICombination } = {};\n        const buildKey = function (\n            triggerParent: number,\n            suggestParent: number,\n        ) {\n            return `${triggerParent}-${suggestParent}`;\n        };\n        this.props.triggeringParents.forEach((triggerID) => {\n            this.props.suggestedParents.forEach((suggestionID) => {\n                const key = buildKey(triggerID, suggestionID);\n                parentCombinations[key] = {\n                    triggerParent: this.props.getProduct(triggerID),\n                    suggestParent: this.props.getProduct(suggestionID),\n                };\n            });\n        });\n        return Object.values(parentCombinations).map((combination, i) => {\n            return (\n                <div key={i} className=\"row\">\n                    <div className=\"col-sm-6\">\n                        <h3>\n                            <strong>{combination.triggerParent.title}</strong>{\" \"}\n                            <em>{gettext(\"(Trigger Parent)\")}</em>\n                        </h3>\n                    </div>\n                    <div className=\"col-sm-6\">\n                        <h3>\n                            <strong>{combination.suggestParent.title}</strong>{\" \"}\n                            <em>{gettext(\"(Suggestion Parent)\")}</em>\n                        </h3>\n                    </div>\n                    <div className=\"col-sm-12\">\n                        {this.buildBundleRows(\n                            combination.triggerParent,\n                            combination.suggestParent,\n                        )}\n                    </div>\n                </div>\n            );\n        });\n    }\n\n    render() {\n        return (\n            <div className=\"col-sm-12 bundle-group-edit__section\">\n                <h1>{gettext(\"Product Links (Concrete Bundles)\")}</h1>\n                <p>\n                    <em>\n                        {gettext(\n                            \"Concrete bundles are bundles which link products to other specific products. They can not be customized by the end-consumer.\",\n                        )}\n                    </em>\n                </p>\n                {this.buildParentRows()}\n            </div>\n        );\n    }\n}\n","import React from \"react\";\nimport classNames from \"classnames\";\nimport {\n    IBundleGroup,\n    IDRFSelectOptions,\n} from \"../../../utils/models.interfaces\";\n\ninterface IProps {\n    bundleTypeChoices: IDRFSelectOptions;\n    group: IBundleGroup | null;\n    isSaving: boolean;\n    errors: {\n        bundleType?: string[];\n        isActive?: string[];\n        name?: string[];\n        headline?: string[];\n        description?: string[];\n        image?: string[];\n    };\n    bundleType: string;\n    name: string;\n    headline: string;\n    isActive: boolean;\n    description: string;\n    image: File | null;\n    clearImage: boolean;\n\n    onEdit: (\n        e: React.FormEvent<\n            HTMLInputElement | HTMLTextAreaElement | HTMLSelectElement\n        >,\n    ) => void;\n    onSelectImage: (e: React.FormEvent<HTMLInputElement>) => void;\n    onClearImage: (e: React.FormEvent<HTMLInputElement>) => void;\n}\n\nexport class BundleGroupMetaFields extends React.PureComponent<IProps> {\n    private buildFormGroupClasses(field: keyof IProps[\"errors\"]) {\n        const fieldErrors = this.props.errors[field];\n        const classes: { [name: string]: boolean } = {\n            \"form-group\": true,\n            \"has-error\": fieldErrors ? fieldErrors.length > 0 : false,\n        };\n        return classNames(classes);\n    }\n\n    private buildErrors(field: keyof IProps[\"errors\"]) {\n        return (this.props.errors[field] || []).map((errorMsg, i) => {\n            return (\n                <span key={i} className=\"help-block\">\n                    <i className=\"fas fa-exclamation\"></i> {errorMsg}\n                </span>\n            );\n        });\n    }\n\n    private buildCurrentImage() {\n        if (!this.props.group || !this.props.group.image) {\n            return null;\n        }\n        const pathParts = this.props.group.image.split(\"/\");\n        const fileName = pathParts[pathParts.length - 1];\n        return (\n            <span>\n                {gettext(\"Currently:\")}{\" \"}\n                <a\n                    target=\"_blank\"\n                    rel=\"noreferrer\"\n                    href={this.props.group.image}\n                >\n                    {fileName}\n                </a>{\" \"}\n                <input\n                    type=\"checkbox\"\n                    id=\"bundle-edit-form-clear-img\"\n                    checked={this.props.clearImage}\n                    onChange={this.props.onClearImage}\n                    disabled={this.props.isSaving}\n                />{\" \"}\n                <label htmlFor=\"bundle-edit-form-clear-img\">\n                    {gettext(\"Clear\")}\n                </label>\n            </span>\n        );\n    }\n\n    render() {\n        const title = this.props.group\n            ? gettext(\"Edit Bundle Group\")\n            : gettext(\"Create Bundle Group\");\n        return (\n            <div className=\"col-sm-12 bundle-group-edit__section\">\n                <h1>{title}</h1>\n                <div className={this.buildFormGroupClasses(\"bundleType\")}>\n                    <label htmlFor=\"id_bundleType\" className=\"control-label\">\n                        {gettext(\"Bundle Type\")}\n                    </label>\n                    <div>\n                        <select\n                            id=\"id_bundleType\"\n                            name=\"bundleType\"\n                            className=\"form-control\"\n                            value={this.props.bundleType}\n                            onChange={this.props.onEdit}\n                            disabled={this.props.isSaving}\n                        >\n                            {this.props.bundleTypeChoices.map((choice) => {\n                                return (\n                                    <option\n                                        key={choice.value}\n                                        value={choice.value}\n                                    >\n                                        {choice.display_name}\n                                    </option>\n                                );\n                            })}\n                        </select>\n                        {this.buildErrors(\"bundleType\")}\n                    </div>\n                </div>\n                <div className={this.buildFormGroupClasses(\"name\")}>\n                    <label htmlFor=\"id_name\" className=\"control-label\">\n                        {gettext(\"Name\")}\n                    </label>\n                    <div>\n                        <input\n                            id=\"id_name\"\n                            name=\"name\"\n                            maxLength={200}\n                            className=\"form-control\"\n                            value={this.props.name}\n                            onChange={this.props.onEdit}\n                            disabled={this.props.isSaving}\n                        />\n                        {this.buildErrors(\"name\")}\n                    </div>\n                </div>\n                <div className={this.buildFormGroupClasses(\"headline\")}>\n                    <label htmlFor=\"id_headline\" className=\"control-label\">\n                        {gettext(\"Headline\")}\n                    </label>\n                    <div>\n                        <textarea\n                            id=\"id_headline\"\n                            name=\"headline\"\n                            cols={40}\n                            rows={4}\n                            className=\"form-control\"\n                            value={this.props.headline}\n                            onChange={this.props.onEdit}\n                            disabled={this.props.isSaving}\n                        ></textarea>\n                        {this.buildErrors(\"headline\")}\n                    </div>\n                </div>\n                <div className={this.buildFormGroupClasses(\"isActive\")}>\n                    <label htmlFor=\"id_active_status\" className=\"control-label\">\n                        {gettext(\"Active Status\")}\n                    </label>\n                    <div>\n                        <select\n                            id=\"id_isActive\"\n                            name=\"isActive\"\n                            className=\"form-control\"\n                            value={String(this.props.isActive)}\n                            onChange={this.props.onEdit}\n                            disabled={this.props.isSaving}\n                        >\n                            {[\n                                { display_name: \"Active\", value: \"true\" },\n                                { display_name: \"Inactive\", value: \"false\" },\n                            ].map((choice, index) => {\n                                return (\n                                    <option key={index} value={choice.value}>\n                                        {choice.display_name}\n                                    </option>\n                                );\n                            })}\n                        </select>\n                        {this.buildErrors(\"isActive\")}\n                    </div>\n                </div>\n                <div className={this.buildFormGroupClasses(\"description\")}>\n                    <label htmlFor=\"id_description\" className=\"control-label\">\n                        {gettext(\"Description\")}\n                    </label>\n                    <div>\n                        <textarea\n                            id=\"id_description\"\n                            name=\"description\"\n                            cols={40}\n                            rows={4}\n                            className=\"form-control\"\n                            value={this.props.description}\n                            onChange={this.props.onEdit}\n                            disabled={this.props.isSaving}\n                        ></textarea>\n                        {this.buildErrors(\"description\")}\n                    </div>\n                </div>\n                <div className={this.buildFormGroupClasses(\"image\")}>\n                    <label htmlFor=\"id_image\" className=\"control-label\">\n                        {gettext(\"Image\")}\n                    </label>\n                    <div>\n                        {this.buildCurrentImage()}\n                        <input\n                            id=\"id_image\"\n                            type=\"file\"\n                            name=\"image\"\n                            className=\"form-control\"\n                            onChange={this.props.onSelectImage}\n                            disabled={this.props.isSaving}\n                        />\n                        {this.buildErrors(\"image\")}\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n","import React from \"react\";\nimport classNames from \"classnames\";\nimport Select from \"react-select\";\nimport { IProduct, SelectOption } from \"../../../utils/models.interfaces\";\n\ninterface IProps {\n    products: IProduct[];\n    isSaving: boolean;\n    errors: {\n        triggering_parents?: string[];\n        suggested_parents?: string[];\n    };\n    triggeringParents: number[];\n    suggestedParents: number[];\n    onSelectParent: (\n        name: \"triggeringParents\" | \"suggestedParents\",\n        opts: SelectOption | ReadonlyArray<SelectOption> | null | undefined,\n    ) => void;\n}\n\nexport class ParentProductsEditForm extends React.PureComponent<IProps> {\n    private getParentProductSelectOptions() {\n        return this.props.products\n            .filter((p) => {\n                return !p.is_child;\n            })\n            .sort((a, b) => {\n                return a.title.localeCompare(b.title);\n            })\n            .map((p) => {\n                const opt: SelectOption = {\n                    value: p.id,\n                    label: p.title,\n                };\n                return opt;\n            });\n    }\n\n    private buildFormGroupClasses(\n        field: keyof IProps[\"errors\"],\n        extras: string[],\n    ) {\n        const fieldErrors = this.props.errors[field];\n        const classes: { [name: string]: boolean } = {\n            \"form-group\": true,\n            \"has-error\": fieldErrors ? fieldErrors.length > 0 : false,\n        };\n        extras.forEach((className) => {\n            classes[className] = true;\n        });\n        return classNames(classes);\n    }\n\n    private buildErrors(field: keyof IProps[\"errors\"]) {\n        return (this.props.errors[field] || []).map((errorMsg, i) => {\n            return (\n                <span key={i} className=\"help-block\">\n                    <i className=\"fas fa-exclamation\"></i> {errorMsg}\n                </span>\n            );\n        });\n    }\n\n    render() {\n        const parentProductSelectOptions = this.getParentProductSelectOptions();\n        return (\n            <div className=\"col-sm-12 bundle-group-edit__section\">\n                <h1>{gettext(\"Relevant Products\")}</h1>\n                <p>\n                    <em>\n                        {gettext(\n                            \"Select the parent and standalone products revelant to this bundle group.\",\n                        )}\n                    </em>\n                </p>\n                <div className=\"row\">\n                    <div\n                        className={this.buildFormGroupClasses(\n                            \"triggering_parents\",\n                            [\"col-sm-6\"],\n                        )}\n                    >\n                        <label htmlFor=\"id_image\" className=\"control-label\">\n                            {gettext(\"Triggers\")}\n                        </label>\n                        <div>\n                            <Select\n                                name=\"triggeringParents\"\n                                isMulti={true}\n                                value={parentProductSelectOptions.filter((o) =>\n                                    this.props.triggeringParents.includes(\n                                        o.value,\n                                    ),\n                                )}\n                                onChange={this.props.onSelectParent.bind(\n                                    this,\n                                    \"triggeringParents\",\n                                )}\n                                options={parentProductSelectOptions}\n                                isDisabled={this.props.isSaving}\n                            />\n                            {this.buildErrors(\"triggering_parents\")}\n                        </div>\n                    </div>\n                    <div\n                        className={this.buildFormGroupClasses(\n                            \"suggested_parents\",\n                            [\"col-sm-6\"],\n                        )}\n                    >\n                        <label htmlFor=\"id_image\" className=\"control-label\">\n                            {gettext(\"Suggestions\")}\n                        </label>\n                        <div>\n                            <Select\n                                name=\"suggestedProducts\"\n                                isMulti={true}\n                                value={parentProductSelectOptions.filter((o) =>\n                                    this.props.suggestedParents.includes(\n                                        o.value,\n                                    ),\n                                )}\n                                onChange={this.props.onSelectParent.bind(\n                                    this,\n                                    \"suggestedParents\",\n                                )}\n                                options={parentProductSelectOptions}\n                                isDisabled={this.props.isSaving}\n                            />\n                            {this.buildErrors(\"suggested_parents\")}\n                        </div>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n","import React from \"react\";\nimport Select from \"react-select\";\nimport {\n    IProduct,\n    IRange,\n    SelectOption,\n} from \"../../../utils/models.interfaces\";\n\ntype ILinkedRange = {\n    rangeID: number | null;\n    quantity: number;\n};\nexport type ILinkedRanges = {\n    [triggeringProductID: number]: ILinkedRange[];\n};\n\ninterface IProps {\n    ranges: IRange[];\n    isSaving: boolean;\n    triggeringParents: number[];\n    linkedRanges: ILinkedRanges;\n    getProduct: (productID: number) => IProduct;\n    onLinkedRangesChange: (\n        trigger: IProduct,\n        rangeIndex: number,\n        opts: SelectOption | ReadonlyArray<SelectOption> | null | undefined,\n    ) => void;\n    onLinkedRangeQuantityChange: (\n        trigger: IProduct,\n        rangeIndex: number,\n        opts: SelectOption | ReadonlyArray<SelectOption> | null | undefined,\n    ) => void;\n}\n\nconst helpText =\n    gettext(`User configurable bundles are bundles which link parent/standalone products to ranges of \\\nother products. Their intent is to represent a group of products related to the suggesting parent, rather than a \\\nspecific one-to-one mapping of product to product.`);\n\nexport class UserConfigurableBundles extends React.PureComponent<IProps> {\n    private getRangeSelectOptions() {\n        const rangeOptions = this.props.ranges\n            .sort((a, b) => {\n                return a.name.localeCompare(b.name);\n            })\n            .map((p) => {\n                const opt: SelectOption = {\n                    value: p.id,\n                    label: p.name,\n                };\n                return opt;\n            });\n        return rangeOptions;\n    }\n\n    private getQuantitySelectOptions() {\n        const quantityOptions: SelectOption[] = [];\n        for (let i = 1; i < 100; i++) {\n            quantityOptions.push({\n                value: i,\n                label: `${i}`,\n            });\n        }\n        return quantityOptions;\n    }\n\n    private buildBundleRows(triggerParent: IProduct) {\n        const suggestOptions = this.getRangeSelectOptions();\n        const quantityOptions = this.getQuantitySelectOptions();\n        const linkedRanges = this.props.linkedRanges[triggerParent.id] || [];\n        if (\n            linkedRanges.length <= 0 ||\n            linkedRanges[linkedRanges.length - 1].rangeID !== null\n        ) {\n            linkedRanges.push({\n                rangeID: null,\n                quantity: 1,\n            });\n        }\n        return (\n            <table\n                key={triggerParent.id}\n                className=\"table bundle-group-edit__link-table\"\n            >\n                <tbody>\n                    {linkedRanges.map((range, i) => {\n                        return (\n                            <tr key={i}>\n                                <th>\n                                    <a\n                                        href={triggerParent.dashboard_url}\n                                        target=\"_blank\"\n                                        rel=\"noreferrer\"\n                                    >\n                                        {triggerParent.title}\n                                    </a>\n                                </th>\n                                <td>\n                                    <Select\n                                        isClearable={true}\n                                        value={suggestOptions.filter(\n                                            (o) => o.value === range.rangeID,\n                                        )}\n                                        options={suggestOptions}\n                                        onChange={this.props.onLinkedRangesChange.bind(\n                                            this,\n                                            triggerParent,\n                                            i,\n                                        )}\n                                        isDisabled={this.props.isSaving}\n                                    />\n                                </td>\n                                <td>\n                                    <Select\n                                        value={quantityOptions.filter(\n                                            (o) =>\n                                                range.rangeID !== null &&\n                                                o.value === range.quantity,\n                                        )}\n                                        options={quantityOptions}\n                                        onChange={this.props.onLinkedRangeQuantityChange.bind(\n                                            this,\n                                            triggerParent,\n                                            i,\n                                        )}\n                                        isDisabled={\n                                            this.props.isSaving ||\n                                            range.rangeID === null\n                                        }\n                                    />\n                                </td>\n                            </tr>\n                        );\n                    })}\n                </tbody>\n            </table>\n        );\n    }\n\n    private buildParentRows() {\n        if (this.props.triggeringParents.length <= 0) {\n            return (\n                <div className=\"row\">\n                    <div className=\"col-sm-12\">\n                        <p>\n                            <em>\n                                {gettext(\n                                    \"Select at least one trigger product to begin linking ranges.\",\n                                )}\n                            </em>\n                        </p>\n                    </div>\n                </div>\n            );\n        }\n        return (\n            <div className=\"row\">\n                <div className=\"col-sm-4\">\n                    <h3>\n                        <strong>{gettext(\"Trigger Parent\")}</strong>\n                    </h3>\n                </div>\n                <div className=\"col-sm-4\">\n                    <h3>\n                        <strong>{gettext(\"Suggested Range\")}</strong>\n                    </h3>\n                </div>\n                <div className=\"col-sm-4\">\n                    <h3>\n                        <strong>{gettext(\"Suggested Quantity\")}</strong>\n                    </h3>\n                </div>\n                <div className=\"col-sm-12\">\n                    {this.props.triggeringParents.map((triggerParentID) => {\n                        const triggerParent =\n                            this.props.getProduct(triggerParentID);\n                        return this.buildBundleRows(triggerParent);\n                    })}\n                </div>\n            </div>\n        );\n    }\n\n    render() {\n        return (\n            <div className=\"col-sm-12 bundle-group-edit__section\">\n                <h1>{gettext(\"Range Links (User Configurable Bundles)\")}</h1>\n                <p>\n                    <em>{helpText}</em>\n                </p>\n                {this.buildParentRows()}\n            </div>\n        );\n    }\n}\n","import cookies from \"js-cookie\";\nimport {\n    IDRFSelectOption,\n    IBundleGroup,\n    IProduct,\n    IRange,\n    IConcreteBundle,\n    IUserConfigurableBundle,\n} from \"./models.interfaces\";\nimport {\n    check,\n    DRFSelectOptions,\n    BundleGroup,\n    BundleGroups,\n    Products,\n    Ranges,\n    ConcreteBundles,\n    UserConfigurableBundles,\n} from \"./models\";\n\nconst CSRF_HEADER = \"X-CSRFToken\";\n\nconst getCSRFToken = function (): string {\n    return cookies.get(\"csrftoken\") || \"\";\n};\n\nconst fetchData = async (endpoint: string) => {\n    return fetch(endpoint, {\n        method: \"GET\",\n        headers: {\n            Accept: \"application/json\",\n        },\n    });\n};\n\nexport const listBundleGroupTypes = async (\n    endpoint: string,\n): Promise<ReadonlyArray<IDRFSelectOption>> => {\n    const resp = await fetchData(endpoint);\n    return check(DRFSelectOptions.decode(await resp.json()));\n};\n\nexport const listBundleGroups = async (\n    endpoint: string,\n): Promise<IBundleGroup[]> => {\n    const resp = await fetchData(endpoint);\n    return check(BundleGroups.decode(await resp.json()));\n};\n\nexport const listProducts = async (endpoint: string): Promise<IProduct[]> => {\n    const resp = await fetchData(endpoint);\n    return check(Products.decode(await resp.json()));\n};\n\nexport const listRanges = async (endpoint: string): Promise<IRange[]> => {\n    const resp = await fetchData(endpoint);\n    return check(Ranges.decode(await resp.json()));\n};\n\nexport const listConcreteBundles = async (\n    endpoint: string,\n): Promise<IConcreteBundle[]> => {\n    const resp = await fetchData(endpoint);\n    return check(ConcreteBundles.decode(await resp.json()));\n};\n\nexport const listUserConfigurableBundles = async (\n    endpoint: string,\n): Promise<IUserConfigurableBundle[]> => {\n    const resp = await fetchData(endpoint);\n    return check(UserConfigurableBundles.decode(await resp.json()));\n};\n\nconst _saveBundleGroupData = async (\n    endpoint: string,\n    group: IBundleGroup,\n): Promise<IBundleGroup> => {\n    const [method, url] = group.id\n        ? [\"PATCH\", `${endpoint}${group.id}/`]\n        : [\"POST\", endpoint];\n    const data = { ...group };\n    delete data.image;\n    delete data.newImage;\n    delete data.clearImage;\n    const resp = await fetch(url, {\n        method: method,\n        headers: {\n            \"Accept\": \"application/json\",\n            \"Content-Type\": \"application/json\",\n            [CSRF_HEADER]: getCSRFToken(),\n        },\n        body: JSON.stringify(data),\n    });\n    return check(BundleGroup.decode(await resp.json()));\n};\n\nconst _saveBundleGroupImage = async (\n    endpoint: string,\n    group: IBundleGroup,\n): Promise<void> => {\n    if (!group.id) {\n        throw new Error(\"Can not save image for unsaved bundle group\");\n    }\n\n    if (!group.newImage && !group.clearImage) {\n        return Promise.resolve();\n    }\n\n    if (group.newImage && !group.clearImage) {\n        const formData = new FormData();\n        formData.append(`image`, group.newImage, group.newImage.name);\n        await fetch(`${endpoint}${group.id}/`, {\n            method: \"PATCH\",\n            headers: {\n                Accept: \"application/json\",\n                [CSRF_HEADER]: getCSRFToken(),\n            },\n            body: formData,\n        });\n        return;\n    }\n\n    if (group.clearImage) {\n        await fetch(`${endpoint}${group.id}/`, {\n            method: \"PATCH\",\n            headers: {\n                \"Accept\": \"application/json\",\n                \"Content-Type\": \"application/json\",\n                [CSRF_HEADER]: getCSRFToken(),\n            },\n            body: JSON.stringify({\n                image: null,\n            }),\n        });\n        return;\n    }\n};\n\nexport const saveBundleGroup = async (\n    endpoint: string,\n    data: IBundleGroup,\n): Promise<IBundleGroup> => {\n    const group = await _saveBundleGroupData(endpoint, data);\n    data.id = group.id; // Update bundle group ID if it was just created\n    await _saveBundleGroupImage(endpoint, data);\n    return group;\n};\n\nexport const deleteBundleGroup = async (\n    endpoint: string,\n    group: IBundleGroup,\n): Promise<void> => {\n    if (!group.id) {\n        throw new Error(\"Can not delete unsaved bundle group\");\n    }\n    await fetch(`${endpoint}${group.id}/`, {\n        method: \"DELETE\",\n        headers: {\n            Accept: \"application/json\",\n            [CSRF_HEADER]: getCSRFToken(),\n        },\n    });\n};\n","import * as t from \"io-ts\";\nimport { failure } from \"io-ts/lib/PathReporter\";\nimport { Either, isLeft } from \"fp-ts/lib/Either\";\n\nexport const check = <T>(result: Either<t.Errors, T>): T => {\n    if (isLeft(result)) {\n        throw new Error(failure(result.left).join(\"\\n\"));\n    }\n    return result.right;\n};\n\nconst nullable = <RT extends t.Mixed>(type: RT) => {\n    return t.union([t.null, type]);\n};\n\nexport const optional = <RT extends t.Mixed>(type: RT) => {\n    return t.union([t.undefined, type]);\n};\n\nclass FileType extends t.Type<File> {\n    readonly _tag = \"NumberType\" as const;\n    constructor() {\n        super(\n            \"number\",\n            (f): f is File => {\n                return f instanceof File;\n            },\n            (u, c) => {\n                return this.is(u) ? t.success(u) : t.failure(u, c);\n            },\n            t.identity,\n        );\n    }\n}\nconst file = new FileType();\n\nexport const DRFSelectOption = t.interface({\n    value: t.string,\n    display_name: t.string,\n});\nexport const DRFSelectOptions = t.readonlyArray(DRFSelectOption);\n\nexport const BaseField = <T extends string>(fieldType: t.LiteralC<T>) => {\n    return t.interface({\n        type: fieldType,\n        required: t.boolean,\n        read_only: t.boolean,\n        label: t.string,\n        help_text: optional(t.string),\n    });\n};\n\nexport const IntegerField = BaseField(t.literal(\"integer\"));\n\nexport const BooleanField = BaseField(t.literal(\"boolean\"));\n\nexport const DatetimeField = BaseField(t.literal(\"datetime\"));\n\nexport const StringField = t.intersection([\n    BaseField(t.literal(\"string\")),\n    t.interface({\n        max_length: optional(t.number),\n    }),\n]);\n\nexport const ChoiceField = t.intersection([\n    BaseField(t.literal(\"choice\")),\n    t.interface({\n        choices: DRFSelectOptions,\n    }),\n]);\n\nexport const Field = t.union([\n    IntegerField,\n    BooleanField,\n    DatetimeField,\n    StringField,\n    ChoiceField,\n    t.unknown,\n]);\n\nexport const HTTPMethod = t.union([\n    t.literal(\"GET\"),\n    t.literal(\"HEAD\"),\n    t.literal(\"OPTIONS\"),\n    t.literal(\"POST\"),\n    t.literal(\"PUT\"),\n    t.literal(\"PATCH\"),\n    t.literal(\"DELETE\"),\n]);\n\nexport const DRFOptionsResponse = t.interface({\n    name: t.string,\n    description: t.string,\n    renders: t.readonlyArray(t.string),\n    parses: t.readonlyArray(t.string),\n    actions: t.interface({\n        GET: optional(t.record(t.string, Field)),\n        HEAD: optional(t.record(t.string, Field)),\n        OPTIONS: optional(t.record(t.string, Field)),\n        POST: optional(t.record(t.string, Field)),\n        PUT: optional(t.record(t.string, Field)),\n        PATCH: optional(t.record(t.string, Field)),\n        DELETE: optional(t.record(t.string, Field)),\n    }),\n});\n\nexport const Product = t.interface({\n    id: t.number,\n    dashboard_url: t.string,\n    product_class: nullable(\n        t.interface({\n            id: t.number,\n            name: t.string,\n        }),\n    ),\n    title: t.string,\n    slug: t.string,\n    is_parent: t.boolean,\n    is_child: t.boolean,\n    parent: nullable(t.number),\n    children: t.array(t.number),\n});\nexport const Products = t.array(Product);\n\nexport const Range = t.interface({\n    id: t.number,\n    dashboard_url: t.string,\n    name: t.string,\n    slug: t.string,\n    description: t.string,\n});\nexport const Ranges = t.array(Range);\n\nexport const ConcreteBundle = t.interface({\n    id: nullable(t.number),\n    triggering_product: t.number,\n    suggested_products: t.array(t.number),\n});\nexport const ConcreteBundles = t.array(ConcreteBundle);\n\nexport const UserConfigurableBundle = t.interface({\n    id: nullable(t.number),\n    triggering_product: t.number,\n    suggested_range: t.number,\n    quantity: t.number,\n});\nexport const UserConfigurableBundles = t.array(UserConfigurableBundle);\n\nexport const BundleGroup = t.interface({\n    id: nullable(t.number),\n    bundle_type: t.string,\n    name: t.string,\n    description: t.string,\n    is_active: optional(nullable(t.boolean)),\n    headline: t.string,\n    image: optional(nullable(t.string)),\n    newImage: optional(nullable(file)),\n    clearImage: optional(t.boolean),\n    triggering_parents: t.array(t.number),\n    suggested_parents: t.array(t.number),\n    concrete_bundles: t.array(ConcreteBundle),\n    user_configurable_bundles: t.array(UserConfigurableBundle),\n});\nexport const BundleGroups = t.array(BundleGroup);\n","// extracted by mini-css-extract-plugin\nexport {};","// extracted by mini-css-extract-plugin\nexport {};","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nmd = function(module) {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t\"bundles\": 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkdjango_oscar_bundles\"] = self[\"webpackChunkdjango_oscar_bundles\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [\"vendor\"], function() { return __webpack_require__(\"./src/bundles.tsx\"); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n",""],"names":["React","createRoot","BundleGroupTable","main","elem","document","querySelector","bundleGroupTypeURL","dataset","bundlegrouptypeApi","bundleGroupURL","bundlegroupApi","concreteBundleURL","concretebundleApi","concreteBundleProductChoiceURL","concretebundleProductChoiceApi","userConfigurableBundleURL","userconfigurablebundleApi","userConfigurableBundleRangeChoiceURL","userconfigurablebundleRangeChoiceApi","root","render","createElement","lunr","Modal","listBundleGroupTypes","listBundleGroups","listProducts","listRanges","saveBundleGroup","deleteBundleGroup","BundleGroupSearchForm","BundleGroupEditForm","BundleGroupTableRow","setAppElement","modalStyles","overlay","backgroundColor","zIndex","content","top","left","right","bottom","marginRight","transform","minWidth","maxWidth","maxHeight","Component","constructor","state","bundleTypeChoices","groups","products","ranges","searchText","selectedGroup","editModalOpen","isSaving","isLoading","formErrors","onSearchTextChange","text","setState","onCreate","e","preventDefault","openCreateModal","onOpenEditModal","group","id","onCloseModal","onSaveBundleGroup","data","__awaiter","props","loadData","err","response","body","onDeleteBundleGroup","componentDidMount","catch","console","error","loading","Promise","all","choices","setBundleTypeChoices","setGroups","setProducts","setRanges","idx","ref","field","forEach","g","add","getSearchResults","results","search","map","result","gid","parseInt","find","filter","buildGroupRows","trim","numTableColumns","colSpan","gettext","length","msg","interpolate","key","onEdit","onDelete","bg","buildEditModal","contentLabel","style","isOpen","errors","onCancel","onSave","className","onClick","onChange","BundleGroupMetaFields","ParentProductsEditForm","UserConfigurableBundles","ConcreteBundles","BundleGroupEditFormActions","_isSelectOptionArray","opts","undefined","_isSelectOption","PureComponent","name","currentTarget","value","Object","assign","onSelectImage","files","file","image","onSelectParent","options","o","onLinkedRangesChange","trigger","rangeIndex","option","Error","linkedRanges","rangeID","quantity","splice","r","onLinkedRangesQuantityChange","label","onLinkedProductsChange","suggestParent","ids","oldIDs","linkedProducts","sid","suggestion","getProduct","parent","newIDs","concat","i","_ids","indexOf","bundle_type","bundleType","description","headline","is_active","isActive","newImage","clearImage","triggering_parents","triggeringParents","suggested_parents","suggestedParents","concrete_bundles","user_configurable_bundles","keys","tID","triggerID","tProduct","_ref","preExistingBundle","b","triggering_product","suggested_range","push","suggestionIDs","sID","sProduct","suggested_products","onClearImage","checked","productID","productIdx","configurableBundles","bundle","concreteBundles","fillProductIdx","UNSAFE_componentWillReceiveProps","nextProps","p","onSubmit","onLinkedRangeQuantityChange","onClear","htmlFor","type","buildGroupActions","msgFormat","confirm","buildProductList","productIDs","href","dashboard_url","title","buildRangeList","rangeIDs","includes","choice","suggestedProducts","suggestedRanges","Fragment","display_name","src","width","Select","getChildProductSelectOptions","is_parent","sort","a","localeCompare","opt","buildBundleRows","triggerParent","triggerOptions","suggestOptions","selectValue","target","rel","isMulti","bind","isDisabled","buildParentRows","parentCombinations","buildKey","suggestionID","values","combination","classNames","buildFormGroupClasses","fieldErrors","classes","buildErrors","errorMsg","buildCurrentImage","pathParts","split","fileName","disabled","maxLength","cols","rows","String","index","getParentProductSelectOptions","is_child","extras","parentProductSelectOptions","helpText","getRangeSelectOptions","rangeOptions","getQuantitySelectOptions","quantityOptions","range","isClearable","triggerParentID","cookies","check","DRFSelectOptions","BundleGroup","BundleGroups","Products","Ranges","CSRF_HEADER","getCSRFToken","get","fetchData","endpoint","fetch","method","headers","Accept","resp","decode","json","listConcreteBundles","listUserConfigurableBundles","_saveBundleGroupData","url","JSON","stringify","_saveBundleGroupImage","resolve","formData","FormData","append","t","failure","isLeft","join","nullable","union","null","optional","FileType","Type","f","File","u","c","is","success","identity","_tag","DRFSelectOption","interface","string","readonlyArray","BaseField","fieldType","required","boolean","read_only","help_text","IntegerField","literal","BooleanField","DatetimeField","StringField","intersection","max_length","number","ChoiceField","Field","unknown","HTTPMethod","DRFOptionsResponse","renders","parses","actions","GET","record","HEAD","OPTIONS","POST","PUT","PATCH","DELETE","Product","product_class","slug","children","array","Range","ConcreteBundle","UserConfigurableBundle"],"sourceRoot":""}
