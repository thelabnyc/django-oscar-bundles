{"version":3,"file":"bundles.js","mappings":"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","sources":["webpack://django-oscar-bundles/webpack/runtime/chunk loaded","webpack://django-oscar-bundles/webpack/runtime/create fake namespace object","webpack://django-oscar-bundles/./src/utils/models.ts","webpack://django-oscar-bundles/./src/utils/api.ts","webpack://django-oscar-bundles/./src/bundles/molecules/BundleGroupSearchForm.tsx","webpack://django-oscar-bundles/./src/bundles/molecules/elements/BundleGroupEditForm_MetaFields.tsx","webpack://django-oscar-bundles/./src/bundles/molecules/elements/BundleGroupEditForm_ParentProducts.tsx","webpack://django-oscar-bundles/./src/bundles/molecules/elements/BundleGroupEditForm_UserConfigurableBundles.tsx","webpack://django-oscar-bundles/./src/bundles/molecules/elements/BundleGroupEditForm_ConcreteBundles.tsx","webpack://django-oscar-bundles/./src/bundles/molecules/elements/BundleGroupEditForm_Actions.tsx","webpack://django-oscar-bundles/./src/bundles/molecules/BundleGroupEditForm.tsx","webpack://django-oscar-bundles/./src/bundles/molecules/BundleGroupTableRow.tsx","webpack://django-oscar-bundles/./src/bundles/BundleGroupTable.tsx","webpack://django-oscar-bundles/./src/bundles.tsx","webpack://django-oscar-bundles/webpack/bootstrap","webpack://django-oscar-bundles/webpack/runtime/compat get default export","webpack://django-oscar-bundles/webpack/runtime/define property getters","webpack://django-oscar-bundles/webpack/runtime/global","webpack://django-oscar-bundles/webpack/runtime/hasOwnProperty shorthand","webpack://django-oscar-bundles/webpack/runtime/make namespace object","webpack://django-oscar-bundles/webpack/runtime/jsonp chunk loading","webpack://django-oscar-bundles/webpack/startup"],"sourcesContent":["var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","var getProto = Object.getPrototypeOf ? function(obj) { return Object.getPrototypeOf(obj); } : function(obj) { return obj.__proto__; };\nvar leafPrototypes;\n// create a fake namespace object\n// mode & 1: value is a module id, require it\n// mode & 2: merge all properties of value into the ns\n// mode & 4: return value when already ns object\n// mode & 16: return value when it's Promise-like\n// mode & 8|1: behave like require\n__webpack_require__.t = function(value, mode) {\n\tif(mode & 1) value = this(value);\n\tif(mode & 8) return value;\n\tif(typeof value === 'object' && value) {\n\t\tif((mode & 4) && value.__esModule) return value;\n\t\tif((mode & 16) && typeof value.then === 'function') return value;\n\t}\n\tvar ns = Object.create(null);\n\t__webpack_require__.r(ns);\n\tvar def = {};\n\tleafPrototypes = leafPrototypes || [null, getProto({}), getProto([]), getProto(getProto)];\n\tfor(var current = mode & 2 && value; typeof current == 'object' && !~leafPrototypes.indexOf(current); current = getProto(current)) {\n\t\tObject.getOwnPropertyNames(current).forEach(function(key) { def[key] = function() { return value[key]; }; });\n\t}\n\tdef['default'] = function() { return value; };\n\t__webpack_require__.d(ns, def);\n\treturn ns;\n};","import * as t from \"io-ts\";\nimport { failure } from \"io-ts/lib/PathReporter\";\nimport { Either, isLeft } from \"fp-ts/lib/Either\";\n\nexport const check = <T>(result: Either<t.Errors, T>): T => {\n    if (isLeft(result)) {\n        throw new Error(failure(result.left).join(\"\\n\"));\n    }\n    return result.right;\n};\n\nconst nullable = <RT extends t.Mixed>(type: RT) => {\n    return t.union([t.null, type]);\n};\n\nexport const optional = <RT extends t.Mixed>(type: RT) => {\n    return t.union([t.undefined, type]);\n};\n\nclass FileType extends t.Type<File> {\n    readonly _tag: \"NumberType\" = \"NumberType\";\n    constructor() {\n        super(\n            \"number\",\n            (f): f is File => {\n                return f instanceof File;\n            },\n            (u, c) => {\n                return this.is(u) ? t.success(u) : t.failure(u, c);\n            },\n            t.identity\n        );\n    }\n}\nconst file = new FileType();\n\nexport const DRFSelectOption = t.interface({\n    value: t.string,\n    display_name: t.string,\n});\nexport const DRFSelectOptions = t.readonlyArray(DRFSelectOption);\n\nexport const BaseField = <T extends string>(fieldType: t.LiteralC<T>) => {\n    return t.interface({\n        type: fieldType,\n        required: t.boolean,\n        read_only: t.boolean,\n        label: t.string,\n        help_text: optional(t.string),\n    });\n};\n\nexport const IntegerField = BaseField(t.literal(\"integer\"));\n\nexport const BooleanField = BaseField(t.literal(\"boolean\"));\n\nexport const DatetimeField = BaseField(t.literal(\"datetime\"));\n\nexport const StringField = t.intersection([\n    BaseField(t.literal(\"string\")),\n    t.interface({\n        max_length: optional(t.number),\n    }),\n]);\n\nexport const ChoiceField = t.intersection([\n    BaseField(t.literal(\"choice\")),\n    t.interface({\n        choices: DRFSelectOptions,\n    }),\n]);\n\nexport const Field = t.union([\n    IntegerField,\n    BooleanField,\n    DatetimeField,\n    StringField,\n    ChoiceField,\n    t.unknown,\n]);\n\nexport const HTTPMethod = t.union([\n    t.literal(\"GET\"),\n    t.literal(\"HEAD\"),\n    t.literal(\"OPTIONS\"),\n    t.literal(\"POST\"),\n    t.literal(\"PUT\"),\n    t.literal(\"PATCH\"),\n    t.literal(\"DELETE\"),\n]);\n\nexport const DRFOptionsResponse = t.interface({\n    name: t.string,\n    description: t.string,\n    renders: t.readonlyArray(t.string),\n    parses: t.readonlyArray(t.string),\n    actions: t.interface({\n        GET: optional(t.record(t.string, Field)),\n        HEAD: optional(t.record(t.string, Field)),\n        OPTIONS: optional(t.record(t.string, Field)),\n        POST: optional(t.record(t.string, Field)),\n        PUT: optional(t.record(t.string, Field)),\n        PATCH: optional(t.record(t.string, Field)),\n        DELETE: optional(t.record(t.string, Field)),\n    }),\n});\n\nexport const Product = t.interface({\n    id: t.number,\n    dashboard_url: t.string,\n    product_class: nullable(\n        t.interface({\n            id: t.number,\n            name: t.string,\n        })\n    ),\n    title: t.string,\n    slug: t.string,\n    is_parent: t.boolean,\n    is_child: t.boolean,\n    parent: nullable(t.number),\n    children: t.array(t.number),\n});\nexport const Products = t.array(Product);\n\nexport const Range = t.interface({\n    id: t.number,\n    dashboard_url: t.string,\n    name: t.string,\n    slug: t.string,\n    description: t.string,\n});\nexport const Ranges = t.array(Range);\n\nexport const ConcreteBundle = t.interface({\n    id: nullable(t.number),\n    triggering_product: t.number,\n    suggested_products: t.array(t.number),\n});\nexport const ConcreteBundles = t.array(ConcreteBundle);\n\nexport const UserConfigurableBundle = t.interface({\n    id: nullable(t.number),\n    triggering_product: t.number,\n    suggested_range: t.number,\n    quantity: t.number,\n});\nexport const UserConfigurableBundles = t.array(UserConfigurableBundle);\n\nexport const BundleGroup = t.interface({\n    id: nullable(t.number),\n    bundle_type: t.string,\n    name: t.string,\n    description: t.string,\n    headline: t.string,\n    image: optional(nullable(t.string)),\n    newImage: optional(nullable(file)),\n    clearImage: optional(t.boolean),\n    triggering_parents: t.array(t.number),\n    suggested_parents: t.array(t.number),\n    concrete_bundles: t.array(ConcreteBundle),\n    user_configurable_bundles: t.array(UserConfigurableBundle),\n});\nexport const BundleGroups = t.array(BundleGroup);\n","import cookies from \"js-cookie\";\nimport {\n    IDRFSelectOption,\n    IBundleGroup,\n    IProduct,\n    IRange,\n    IConcreteBundle,\n    IUserConfigurableBundle,\n} from \"./models.interfaces\";\nimport {\n    check,\n    ChoiceField,\n    DRFOptionsResponse,\n    BundleGroup,\n    BundleGroups,\n    Products,\n    Ranges,\n    ConcreteBundles,\n    UserConfigurableBundles,\n} from \"./models\";\n\nconst CSRF_HEADER = \"X-CSRFToken\";\n\nconst getCSRFToken = function (): string {\n    return cookies.get(\"csrftoken\") || \"\";\n};\n\nconst fetchData = async (endpoint: string) => {\n    return fetch(endpoint, {\n        method: \"GET\",\n        headers: {\n            Accept: \"application/json\",\n        },\n    });\n};\n\nexport const getBundleTypeChoices = async (\n    endpoint: string\n): Promise<ReadonlyArray<IDRFSelectOption>> => {\n    const resp = await fetch(endpoint, {\n        method: \"OPTIONS\",\n        headers: {\n            Accept: \"application/json\",\n        },\n    });\n    const body = check(DRFOptionsResponse.decode(await resp.json()));\n    if (!body.actions.POST) {\n        return [];\n    }\n    const field = check(ChoiceField.decode(body.actions.POST.bundle_type));\n    const choices = field.choices;\n    return choices;\n};\n\nexport const listBundleGroups = async (\n    endpoint: string\n): Promise<IBundleGroup[]> => {\n    const resp = await fetchData(endpoint);\n    return check(BundleGroups.decode(resp.body));\n};\n\nexport const listProducts = async (endpoint: string): Promise<IProduct[]> => {\n    const resp = await fetchData(endpoint);\n    return check(Products.decode(resp.body));\n};\n\nexport const listRanges = async (endpoint: string): Promise<IRange[]> => {\n    const resp = await fetchData(endpoint);\n    return check(Ranges.decode(resp.body));\n};\n\nexport const listConcreteBundles = async (\n    endpoint: string\n): Promise<IConcreteBundle[]> => {\n    const resp = await fetchData(endpoint);\n    return check(ConcreteBundles.decode(resp.body));\n};\n\nexport const listUserConfigurableBundles = async (\n    endpoint: string\n): Promise<IUserConfigurableBundle[]> => {\n    const resp = await fetchData(endpoint);\n    return check(UserConfigurableBundles.decode(resp.body));\n};\n\nconst _saveBundleGroupData = async (\n    endpoint: string,\n    group: IBundleGroup\n): Promise<IBundleGroup> => {\n    const [method, url] = group.id\n        ? [\"PATCH\", `${endpoint}${group.id}/`]\n        : [\"POST\", endpoint];\n    const data = { ...group };\n    delete data.image;\n    delete data.newImage;\n    delete data.clearImage;\n    const resp = await fetch(url, {\n        method: method,\n        headers: {\n            \"Accept\": \"application/json\",\n            \"Content-Type\": \"application/json\",\n            [CSRF_HEADER]: getCSRFToken(),\n        },\n        body: JSON.stringify(data),\n    });\n    return check(BundleGroup.decode(resp.body));\n};\n\nconst _saveBundleGroupImage = async (\n    endpoint: string,\n    group: IBundleGroup\n): Promise<void> => {\n    if (!group.id) {\n        throw new Error(\"Can not save image for unsaved bundle group\");\n    }\n\n    if (!group.newImage && !group.clearImage) {\n        return Promise.resolve();\n    }\n\n    if (group.newImage && !group.clearImage) {\n        const formData = new FormData();\n        formData.append(`image`, group.newImage, group.newImage.name);\n        await fetch(`${endpoint}${group.id}/`, {\n            method: \"PATCH\",\n            headers: {\n                Accept: \"application/json\",\n                [CSRF_HEADER]: getCSRFToken(),\n            },\n            body: formData,\n        });\n        return;\n    }\n\n    if (group.clearImage) {\n        await fetch(`${endpoint}${group.id}/`, {\n            method: \"PATCH\",\n            headers: {\n                \"Accept\": \"application/json\",\n                \"Content-Type\": \"application/json\",\n                [CSRF_HEADER]: getCSRFToken(),\n            },\n            body: JSON.stringify({\n                image: null,\n            }),\n        });\n        return;\n    }\n};\n\nexport const saveBundleGroup = async (\n    endpoint: string,\n    data: IBundleGroup\n): Promise<IBundleGroup> => {\n    const group = await _saveBundleGroupData(endpoint, data);\n    data.id = group.id; // Update bundle group ID if it was just created\n    await _saveBundleGroupImage(endpoint, data);\n    return group;\n};\n\nexport const deleteBundleGroup = async (\n    endpoint: string,\n    group: IBundleGroup\n): Promise<void> => {\n    if (!group.id) {\n        throw new Error(\"Can not delete unsaved bundle group\");\n    }\n    await fetch(`${endpoint}${group.id}/`, {\n        method: \"DELETE\",\n        headers: {\n            Accept: \"application/json\",\n            [CSRF_HEADER]: getCSRFToken(),\n        },\n    });\n};\n","import React from \"react\";\n\nexport interface IProps {\n    searchText: string;\n    onChange: (searchText: string) => void;\n}\n\nexport interface IState {}\n\nclass BundleGroupSearchForm extends React.PureComponent<IProps, IState> {\n    render() {\n        const self = this;\n\n        const onChange = function (e: React.FormEvent<HTMLInputElement>) {\n            e.preventDefault();\n            self.props.onChange(e.currentTarget.value);\n        };\n\n        const onClear = function (e: React.FormEvent<HTMLButtonElement>) {\n            e.preventDefault();\n            self.props.onChange(\"\");\n        };\n\n        const onSubmit = function (e: React.FormEvent<HTMLFormElement>) {\n            e.preventDefault();\n        };\n\n        return (\n            <div className=\"card card-body bg-light\">\n                <form className=\"form-inline\" onSubmit={onSubmit}>\n                    <span className=\"form-group\">\n                        <label htmlFor=\"id_text\">{gettext(\"Search:\")}</label>\n                        <input\n                            className=\"form-control\"\n                            id=\"id_text\"\n                            value={this.props.searchText}\n                            onChange={onChange}\n                        />\n                    </span>{\" \"}\n                    <button\n                        type=\"button\"\n                        className=\"btn btn-secondary\"\n                        onClick={onClear}\n                    >\n                        {gettext(\"Clear Search\")}\n                    </button>\n                </form>\n            </div>\n        );\n    }\n}\n\nexport default BundleGroupSearchForm;\n","import React from \"react\";\nimport classNames from \"classnames\";\nimport {\n    IBundleGroup,\n    IDRFSelectOptions,\n} from \"../../../utils/models.interfaces\";\n\ninterface IProps {\n    bundleTypeChoices: IDRFSelectOptions;\n    group: IBundleGroup | null;\n    isSaving: boolean;\n    errors: {\n        bundleType?: string[];\n        name?: string[];\n        headline?: string[];\n        description?: string[];\n        image?: string[];\n    };\n    bundleType: string;\n    name: string;\n    headline: string;\n    description: string;\n    image: File | null;\n    clearImage: boolean;\n\n    onEdit: (\n        e: React.FormEvent<\n            HTMLInputElement | HTMLTextAreaElement | HTMLSelectElement\n        >\n    ) => void;\n    onSelectImage: (e: React.FormEvent<HTMLInputElement>) => void;\n    onClearImage: (e: React.FormEvent<HTMLInputElement>) => void;\n}\n\ninterface IState {}\n\nexport class BundleGroupMetaFields extends React.PureComponent<IProps, IState> {\n    private buildFormGroupClasses(field: keyof IProps[\"errors\"]) {\n        const fieldErrors = this.props.errors[field];\n        const classes: { [name: string]: boolean } = {\n            \"form-group\": true,\n            \"has-error\": fieldErrors ? fieldErrors.length > 0 : false,\n        };\n        return classNames(classes);\n    }\n\n    private buildErrors(field: keyof IProps[\"errors\"]) {\n        return (this.props.errors[field] || []).map((errorMsg, i) => {\n            return (\n                <span key={i} className=\"help-block\">\n                    <i className=\"fas fa-exclamation\"></i> {errorMsg}\n                </span>\n            );\n        });\n    }\n\n    private buildCurrentImage() {\n        if (!this.props.group || !this.props.group.image) {\n            return null;\n        }\n        const pathParts = this.props.group.image.split(\"/\");\n        const fileName = pathParts[pathParts.length - 1];\n        return (\n            <span>\n                {gettext(\"Currently:\")}{\" \"}\n                <a target=\"_blank\" href={this.props.group.image}>\n                    {fileName}\n                </a>{\" \"}\n                <input\n                    type=\"checkbox\"\n                    id=\"bundle-edit-form-clear-img\"\n                    checked={this.props.clearImage}\n                    onChange={this.props.onClearImage}\n                    disabled={this.props.isSaving}\n                />{\" \"}\n                <label htmlFor=\"bundle-edit-form-clear-img\">\n                    {gettext(\"Clear\")}\n                </label>\n            </span>\n        );\n    }\n\n    render() {\n        const title = this.props.group\n            ? gettext(\"Edit Bundle Group\")\n            : gettext(\"Create Bundle Group\");\n        return (\n            <div className=\"col-sm-12 bundle-group-edit__section\">\n                <h1>{title}</h1>\n                <div className={this.buildFormGroupClasses(\"bundleType\")}>\n                    <label htmlFor=\"id_bundleType\" className=\"control-label\">\n                        {gettext(\"Bundle Type\")}\n                    </label>\n                    <div>\n                        <select\n                            id=\"id_bundleType\"\n                            name=\"bundleType\"\n                            className=\"form-control\"\n                            value={this.props.bundleType}\n                            onChange={this.props.onEdit}\n                            disabled={this.props.isSaving}\n                        >\n                            {this.props.bundleTypeChoices.map((choice) => {\n                                return (\n                                    <option\n                                        key={choice.value}\n                                        value={choice.value}\n                                    >\n                                        {choice.display_name}\n                                    </option>\n                                );\n                            })}\n                        </select>\n                        {this.buildErrors(\"bundleType\")}\n                    </div>\n                </div>\n                <div className={this.buildFormGroupClasses(\"name\")}>\n                    <label htmlFor=\"id_name\" className=\"control-label\">\n                        {gettext(\"Name\")}\n                    </label>\n                    <div>\n                        <input\n                            id=\"id_name\"\n                            name=\"name\"\n                            maxLength={200}\n                            className=\"form-control\"\n                            value={this.props.name}\n                            onChange={this.props.onEdit}\n                            disabled={this.props.isSaving}\n                        />\n                        {this.buildErrors(\"name\")}\n                    </div>\n                </div>\n                <div className={this.buildFormGroupClasses(\"headline\")}>\n                    <label htmlFor=\"id_headline\" className=\"control-label\">\n                        {gettext(\"Headline\")}\n                    </label>\n                    <div>\n                        <textarea\n                            id=\"id_headline\"\n                            name=\"headline\"\n                            cols={40}\n                            rows={4}\n                            className=\"form-control\"\n                            value={this.props.headline}\n                            onChange={this.props.onEdit}\n                            disabled={this.props.isSaving}\n                        ></textarea>\n                        {this.buildErrors(\"headline\")}\n                    </div>\n                </div>\n                <div className={this.buildFormGroupClasses(\"description\")}>\n                    <label htmlFor=\"id_description\" className=\"control-label\">\n                        {gettext(\"Description\")}\n                    </label>\n                    <div>\n                        <textarea\n                            id=\"id_description\"\n                            name=\"description\"\n                            cols={40}\n                            rows={4}\n                            className=\"form-control\"\n                            value={this.props.description}\n                            onChange={this.props.onEdit}\n                            disabled={this.props.isSaving}\n                        ></textarea>\n                        {this.buildErrors(\"description\")}\n                    </div>\n                </div>\n                <div className={this.buildFormGroupClasses(\"image\")}>\n                    <label htmlFor=\"id_image\" className=\"control-label\">\n                        {gettext(\"Image\")}\n                    </label>\n                    <div>\n                        {this.buildCurrentImage()}\n                        <input\n                            id=\"id_image\"\n                            type=\"file\"\n                            name=\"image\"\n                            className=\"form-control\"\n                            onChange={this.props.onSelectImage}\n                            disabled={this.props.isSaving}\n                        />\n                        {this.buildErrors(\"image\")}\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n","import React from \"react\";\nimport classNames from \"classnames\";\nimport Select from \"react-select\";\nimport { IProduct, SelectOption } from \"../../../utils/models.interfaces\";\n\ninterface IProps {\n    products: IProduct[];\n    isSaving: boolean;\n    errors: {\n        triggering_parents?: string[];\n        suggested_parents?: string[];\n    };\n    triggeringParents: number[];\n    suggestedParents: number[];\n    onSelectParent: (\n        name: \"triggeringParents\" | \"suggestedParents\",\n        opts: SelectOption | ReadonlyArray<SelectOption> | null | undefined\n    ) => void;\n}\n\ninterface IState {}\n\nexport class ParentProductsEditForm extends React.PureComponent<\n    IProps,\n    IState\n> {\n    private getParentProductSelectOptions() {\n        return this.props.products\n            .filter((p) => {\n                return !p.is_child;\n            })\n            .sort((a, b) => {\n                return a.title.localeCompare(b.title);\n            })\n            .map((p) => {\n                const opt: SelectOption = {\n                    value: p.id,\n                    label: p.title,\n                };\n                return opt;\n            });\n    }\n\n    private buildFormGroupClasses(\n        field: keyof IProps[\"errors\"],\n        extras: string[]\n    ) {\n        const fieldErrors = this.props.errors[field];\n        const classes: { [name: string]: boolean } = {\n            \"form-group\": true,\n            \"has-error\": fieldErrors ? fieldErrors.length > 0 : false,\n        };\n        extras.forEach((className) => {\n            classes[className] = true;\n        });\n        return classNames(classes);\n    }\n\n    private buildErrors(field: keyof IProps[\"errors\"]) {\n        return (this.props.errors[field] || []).map((errorMsg, i) => {\n            return (\n                <span key={i} className=\"help-block\">\n                    <i className=\"fas fa-exclamation\"></i> {errorMsg}\n                </span>\n            );\n        });\n    }\n\n    render() {\n        const parentProductSelectOptions = this.getParentProductSelectOptions();\n        return (\n            <div className=\"col-sm-12 bundle-group-edit__section\">\n                <h1>{gettext(\"Relevant Products\")}</h1>\n                <p>\n                    <em>\n                        {gettext(\n                            \"Select the parent and standalone products revelant to this bundle group.\"\n                        )}\n                    </em>\n                </p>\n                <div className=\"row\">\n                    <div\n                        className={this.buildFormGroupClasses(\n                            \"triggering_parents\",\n                            [\"col-sm-6\"]\n                        )}\n                    >\n                        <label htmlFor=\"id_image\" className=\"control-label\">\n                            {gettext(\"Triggers\")}\n                        </label>\n                        <div>\n                            <Select\n                                name=\"triggeringParents\"\n                                isMulti={true}\n                                value={parentProductSelectOptions.filter((o) =>\n                                    this.props.triggeringParents.includes(\n                                        o.value\n                                    )\n                                )}\n                                onChange={this.props.onSelectParent.bind(\n                                    this,\n                                    \"triggeringParents\"\n                                )}\n                                options={parentProductSelectOptions}\n                                isDisabled={this.props.isSaving}\n                            />\n                            {this.buildErrors(\"triggering_parents\")}\n                        </div>\n                    </div>\n                    <div\n                        className={this.buildFormGroupClasses(\n                            \"suggested_parents\",\n                            [\"col-sm-6\"]\n                        )}\n                    >\n                        <label htmlFor=\"id_image\" className=\"control-label\">\n                            {gettext(\"Suggestions\")}\n                        </label>\n                        <div>\n                            <Select\n                                name=\"suggestedProducts\"\n                                isMulti={true}\n                                value={parentProductSelectOptions.filter((o) =>\n                                    this.props.suggestedParents.includes(\n                                        o.value\n                                    )\n                                )}\n                                onChange={this.props.onSelectParent.bind(\n                                    this,\n                                    \"suggestedParents\"\n                                )}\n                                options={parentProductSelectOptions}\n                                isDisabled={this.props.isSaving}\n                            />\n                            {this.buildErrors(\"suggested_parents\")}\n                        </div>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n","import React from \"react\";\nimport Select from \"react-select\";\nimport {\n    IProduct,\n    IRange,\n    SelectOption,\n} from \"../../../utils/models.interfaces\";\n\ntype ILinkedRange = {\n    rangeID: number | null;\n    quantity: number;\n};\nexport type ILinkedRanges = {\n    [triggeringProductID: number]: ILinkedRange[];\n};\n\ninterface IProps {\n    ranges: IRange[];\n    isSaving: boolean;\n    triggeringParents: number[];\n    linkedRanges: ILinkedRanges;\n    getProduct: (productID: number) => IProduct;\n    onLinkedRangesChange: (\n        trigger: IProduct,\n        rangeIndex: number,\n        opts: SelectOption | ReadonlyArray<SelectOption> | null | undefined\n    ) => void;\n    onLinkedRangeQuantityChange: (\n        trigger: IProduct,\n        rangeIndex: number,\n        opts: SelectOption | ReadonlyArray<SelectOption> | null | undefined\n    ) => void;\n}\n\ninterface IState {}\n\nconst helpText =\n    gettext(`User configurable bundles are bundles which link parent/standalone products to ranges of \\\nother products. Their intent is to represent a group of products related to the suggesting parent, rather than a \\\nspecific one-to-one mapping of product to product.`);\n\nexport class UserConfigurableBundles extends React.PureComponent<\n    IProps,\n    IState\n> {\n    private getRangeSelectOptions() {\n        const rangeOptions = this.props.ranges\n            .sort((a, b) => {\n                return a.name.localeCompare(b.name);\n            })\n            .map((p) => {\n                const opt: SelectOption = {\n                    value: p.id,\n                    label: p.name,\n                };\n                return opt;\n            });\n        return rangeOptions;\n    }\n\n    private getQuantitySelectOptions() {\n        const quantityOptions: SelectOption[] = [];\n        for (let i = 1; i < 100; i++) {\n            quantityOptions.push({\n                value: i,\n                label: `${i}`,\n            });\n        }\n        return quantityOptions;\n    }\n\n    private buildBundleRows(triggerParent: IProduct) {\n        const suggestOptions = this.getRangeSelectOptions();\n        const quantityOptions = this.getQuantitySelectOptions();\n        const linkedRanges = this.props.linkedRanges[triggerParent.id] || [];\n        if (\n            linkedRanges.length <= 0 ||\n            linkedRanges[linkedRanges.length - 1].rangeID !== null\n        ) {\n            linkedRanges.push({\n                rangeID: null,\n                quantity: 1,\n            });\n        }\n        return (\n            <table\n                key={triggerParent.id}\n                className=\"table bundle-group-edit__link-table\"\n            >\n                <tbody>\n                    {linkedRanges.map((range, i) => {\n                        return (\n                            <tr key={i}>\n                                <th>\n                                    <a\n                                        href={triggerParent.dashboard_url}\n                                        target=\"_blank\"\n                                    >\n                                        {triggerParent.title}\n                                    </a>\n                                </th>\n                                <td>\n                                    <Select\n                                        isClearable={true}\n                                        value={suggestOptions.filter(\n                                            (o) => o.value === range.rangeID\n                                        )}\n                                        options={suggestOptions}\n                                        onChange={this.props.onLinkedRangesChange.bind(\n                                            this,\n                                            triggerParent,\n                                            i\n                                        )}\n                                        isDisabled={this.props.isSaving}\n                                    />\n                                </td>\n                                <td>\n                                    <Select\n                                        value={quantityOptions.filter(\n                                            (o) =>\n                                                range.rangeID !== null &&\n                                                o.value === range.quantity\n                                        )}\n                                        options={quantityOptions}\n                                        onChange={this.props.onLinkedRangeQuantityChange.bind(\n                                            this,\n                                            triggerParent,\n                                            i\n                                        )}\n                                        isDisabled={\n                                            this.props.isSaving ||\n                                            range.rangeID === null\n                                        }\n                                    />\n                                </td>\n                            </tr>\n                        );\n                    })}\n                </tbody>\n            </table>\n        );\n    }\n\n    private buildParentRows() {\n        if (this.props.triggeringParents.length <= 0) {\n            return (\n                <div className=\"row\">\n                    <div className=\"col-sm-12\">\n                        <p>\n                            <em>\n                                {gettext(\n                                    \"Select at least one trigger product to begin linking ranges.\"\n                                )}\n                            </em>\n                        </p>\n                    </div>\n                </div>\n            );\n        }\n        return (\n            <div className=\"row\">\n                <div className=\"col-sm-4\">\n                    <h3>\n                        <strong>{gettext(\"Trigger Parent\")}</strong>\n                    </h3>\n                </div>\n                <div className=\"col-sm-4\">\n                    <h3>\n                        <strong>{gettext(\"Suggested Range\")}</strong>\n                    </h3>\n                </div>\n                <div className=\"col-sm-4\">\n                    <h3>\n                        <strong>{gettext(\"Suggested Quantity\")}</strong>\n                    </h3>\n                </div>\n                <div className=\"col-sm-12\">\n                    {this.props.triggeringParents.map((triggerParentID) => {\n                        const triggerParent =\n                            this.props.getProduct(triggerParentID);\n                        return this.buildBundleRows(triggerParent);\n                    })}\n                </div>\n            </div>\n        );\n    }\n\n    render() {\n        return (\n            <div className=\"col-sm-12 bundle-group-edit__section\">\n                <h1>{gettext(\"Range Links (User Configurable Bundles)\")}</h1>\n                <p>\n                    <em>{helpText}</em>\n                </p>\n                {this.buildParentRows()}\n            </div>\n        );\n    }\n}\n","import React from \"react\";\nimport Select from \"react-select\";\nimport { IProduct, SelectOption } from \"../../../utils/models.interfaces\";\n\nexport type ILinkedProducts = {\n    [triggeringProductID: number]: number[];\n};\n\ninterface IProps {\n    products: IProduct[];\n    isSaving: boolean;\n    triggeringParents: number[];\n    suggestedParents: number[];\n    linkedProducts: ILinkedProducts;\n    getProduct: (productID: number) => IProduct;\n    onLinkedProductsChange: (\n        trigger: IProduct,\n        suggestParent: IProduct,\n        opts: SelectOption | ReadonlyArray<SelectOption> | null | undefined\n    ) => void;\n}\n\ninterface IState {}\n\nexport class ConcreteBundles extends React.PureComponent<IProps, IState> {\n    private getChildProductSelectOptions(parent: IProduct) {\n        return this.props.products\n            .filter((p) => {\n                return (\n                    !p.is_parent &&\n                    (p.id === parent.id || p.parent === parent.id)\n                );\n            })\n            .sort((a, b) => {\n                return a.title.localeCompare(b.title);\n            })\n            .map((p) => {\n                const opt: SelectOption = {\n                    value: p.id,\n                    label: p.title,\n                };\n                return opt;\n            });\n    }\n\n    private buildBundleRows(triggerParent: IProduct, suggestParent: IProduct) {\n        const triggerOptions = this.props.products\n            .filter((p) => {\n                return (\n                    !p.is_parent &&\n                    (p.id === triggerParent.id || p.parent === triggerParent.id)\n                );\n            })\n            .sort((a, b) => {\n                return a.title.localeCompare(b.title);\n            });\n        const suggestOptions = this.getChildProductSelectOptions(suggestParent);\n        return (\n            <table className=\"table bundle-group-edit__link-table\">\n                <tbody>\n                    {triggerOptions.map((trigger) => {\n                        const selectValue = (\n                            this.props.linkedProducts[trigger.id] || []\n                        ).filter((sid) => {\n                            const suggestion = this.props.getProduct(sid);\n                            return (\n                                suggestion.id === suggestParent.id ||\n                                suggestion.parent === suggestParent.id\n                            );\n                        });\n                        return (\n                            <tr key={trigger.id}>\n                                <th>\n                                    <a\n                                        href={trigger.dashboard_url}\n                                        target=\"_blank\"\n                                    >\n                                        {trigger.title}\n                                    </a>\n                                </th>\n                                <td>\n                                    <Select\n                                        isMulti={true}\n                                        value={suggestOptions.filter((o) =>\n                                            selectValue.includes(o.value)\n                                        )}\n                                        options={suggestOptions}\n                                        onChange={this.props.onLinkedProductsChange.bind(\n                                            this,\n                                            trigger,\n                                            suggestParent\n                                        )}\n                                        isDisabled={this.props.isSaving}\n                                    />\n                                </td>\n                            </tr>\n                        );\n                    })}\n                </tbody>\n            </table>\n        );\n    }\n\n    private buildParentRows() {\n        type ICombination = {\n            triggerParent: IProduct;\n            suggestParent: IProduct;\n        };\n        if (\n            this.props.triggeringParents.length <= 0 ||\n            this.props.suggestedParents.length <= 0\n        ) {\n            return (\n                <div className=\"row\">\n                    <div className=\"col-sm-12\">\n                        <p>\n                            <em>\n                                {gettext(\n                                    \"Select at least one trigger product and one suggested product to begin linking variants.\"\n                                )}\n                            </em>\n                        </p>\n                    </div>\n                </div>\n            );\n        }\n        const parentCombinations: { [key: string]: ICombination } = {};\n        const buildKey = function (\n            triggerParent: number,\n            suggestParent: number\n        ) {\n            return `${triggerParent}-${suggestParent}`;\n        };\n        this.props.triggeringParents.forEach((triggerID) => {\n            this.props.suggestedParents.forEach((suggestionID) => {\n                const key = buildKey(triggerID, suggestionID);\n                parentCombinations[key] = {\n                    triggerParent: this.props.getProduct(triggerID),\n                    suggestParent: this.props.getProduct(suggestionID),\n                };\n            });\n        });\n        return Object.values(parentCombinations).map((combination, i) => {\n            return (\n                <div key={i} className=\"row\">\n                    <div className=\"col-sm-6\">\n                        <h3>\n                            <strong>{combination.triggerParent.title}</strong>{\" \"}\n                            <em>{gettext(\"(Trigger Parent)\")}</em>\n                        </h3>\n                    </div>\n                    <div className=\"col-sm-6\">\n                        <h3>\n                            <strong>{combination.suggestParent.title}</strong>{\" \"}\n                            <em>{gettext(\"(Suggestion Parent)\")}</em>\n                        </h3>\n                    </div>\n                    <div className=\"col-sm-12\">\n                        {this.buildBundleRows(\n                            combination.triggerParent,\n                            combination.suggestParent\n                        )}\n                    </div>\n                </div>\n            );\n        });\n    }\n\n    render() {\n        return (\n            <div className=\"col-sm-12 bundle-group-edit__section\">\n                <h1>{gettext(\"Product Links (Concrete Bundles)\")}</h1>\n                <p>\n                    <em>\n                        {gettext(\n                            \"Concrete bundles are bundles which link products to other specific products. They can not be customized by the end-consumer.\"\n                        )}\n                    </em>\n                </p>\n                {this.buildParentRows()}\n            </div>\n        );\n    }\n}\n","import React from \"react\";\n\ninterface IProps {\n    onCancel: (e: React.MouseEvent<HTMLElement>) => void;\n}\n\ninterface IState {}\n\nexport class BundleGroupEditFormActions extends React.PureComponent<\n    IProps,\n    IState\n> {\n    render() {\n        return (\n            <div className=\"col-sm-12 bundle-group-edit__section\">\n                <div className=\"form-group\">\n                    <a\n                        className=\"btn btn-secondary\"\n                        onClick={this.props.onCancel}\n                    >\n                        {gettext(\"Cancel\")}\n                    </a>{\" \"}\n                    <button className=\"btn btn-primary\" type=\"submit\">\n                        {gettext(\"Save\")}\n                    </button>\n                </div>\n            </div>\n        );\n    }\n}\n","import React from \"react\";\nimport {\n    IBundleGroup,\n    IConcreteBundle,\n    IUserConfigurableBundle,\n    IProduct,\n    IRange,\n    IDRFSelectOptions,\n    SelectOption,\n} from \"../../utils/models.interfaces\";\nimport { BundleGroupMetaFields } from \"./elements/BundleGroupEditForm_MetaFields\";\nimport { ParentProductsEditForm } from \"./elements/BundleGroupEditForm_ParentProducts\";\nimport {\n    ILinkedRanges,\n    UserConfigurableBundles,\n} from \"./elements/BundleGroupEditForm_UserConfigurableBundles\";\nimport {\n    ILinkedProducts,\n    ConcreteBundles,\n} from \"./elements/BundleGroupEditForm_ConcreteBundles\";\nimport { BundleGroupEditFormActions } from \"./elements/BundleGroupEditForm_Actions\";\n\nimport \"./BundleGroupEditForm.scss\";\n\ninterface IProps {\n    bundleTypeChoices: IDRFSelectOptions;\n    group: IBundleGroup | null;\n    products: IProduct[];\n    ranges: IRange[];\n    isSaving: boolean;\n    errors: {\n        bundleType?: string[];\n        name?: string[];\n        headline?: string[];\n        description?: string[];\n        image?: string[];\n        triggering_parents?: string[];\n        suggested_parents?: string[];\n    };\n    onCancel: () => void;\n    onSave: (data: IBundleGroup) => void;\n}\n\ninterface IState {\n    bundleType: string;\n    name: string;\n    headline: string;\n    description: string;\n    image: File | null;\n    clearImage: boolean;\n    triggeringParents: number[];\n    suggestedParents: number[];\n    linkedRanges: ILinkedRanges;\n    linkedProducts: ILinkedProducts;\n}\n\nconst _isSelectOptionArray = (\n    opts: SelectOption | ReadonlyArray<SelectOption> | null | undefined\n): opts is ReadonlyArray<SelectOption> => {\n    return !!opts && (opts as ReadonlyArray<SelectOption>).length !== undefined;\n};\n\nconst _isSelectOption = (\n    opts: SelectOption | ReadonlyArray<SelectOption> | null | undefined\n): opts is SelectOption => {\n    return !!opts && !_isSelectOptionArray(opts);\n};\n\nclass BundleGroupEditForm extends React.PureComponent<IProps, IState> {\n    private productIdx: { [id: number]: IProduct };\n\n    constructor(props: IProps) {\n        super(props);\n\n        // Build linked ranges data set\n        const linkedRanges: IState[\"linkedRanges\"] = {};\n        const configurableBundles = props.group\n            ? props.group.user_configurable_bundles\n            : [];\n        configurableBundles.forEach((bundle) => {\n            if (!linkedRanges[bundle.triggering_product]) {\n                linkedRanges[bundle.triggering_product] = [];\n            }\n            linkedRanges[bundle.triggering_product].push({\n                rangeID: bundle.suggested_range,\n                quantity: bundle.quantity,\n            });\n        });\n\n        // Build linked products data set\n        const linkedProducts: IState[\"linkedProducts\"] = {};\n        const concreteBundles = props.group ? props.group.concrete_bundles : [];\n        concreteBundles.forEach((bundle) => {\n            if (!linkedProducts[bundle.triggering_product]) {\n                linkedProducts[bundle.triggering_product] = [];\n            }\n            linkedProducts[bundle.triggering_product] = linkedProducts[\n                bundle.triggering_product\n            ]\n                .concat(bundle.suggested_products)\n                .filter((id, i, ids) => {\n                    return ids.indexOf(id) === i;\n                });\n        });\n\n        // Build initial state\n        const state: IState = {\n            bundleType: \"\",\n            name: \"\",\n            description: \"\",\n            headline: \"\",\n            image: null,\n            clearImage: false,\n            triggeringParents: [],\n            suggestedParents: [],\n            linkedRanges: linkedRanges,\n            linkedProducts: linkedProducts,\n        };\n        if (props.group) {\n            state.bundleType = props.group.bundle_type;\n            state.name = props.group.name;\n            state.description = props.group.description;\n            state.headline = props.group.headline;\n            state.triggeringParents = props.group.triggering_parents;\n            state.suggestedParents = props.group.suggested_parents;\n        } else if (props.bundleTypeChoices.length > 0) {\n            state.bundleType = props.bundleTypeChoices[0].value;\n        }\n        this.state = state;\n        this.productIdx = {};\n        this.fillProductIdx(props.products);\n    }\n\n    private readonly onEdit = (\n        e: React.FormEvent<\n            HTMLInputElement | HTMLTextAreaElement | HTMLSelectElement\n        >\n    ) => {\n        const name = e.currentTarget.name as keyof IState;\n        const value = e.currentTarget.value;\n        this.setState((state) => {\n            return { ...state, [name]: value };\n        });\n    };\n\n    private readonly onSelectImage = (e: React.FormEvent<HTMLInputElement>) => {\n        if (!e.currentTarget.files) {\n            return;\n        }\n        const file = e.currentTarget.files[0];\n        this.setState({\n            image: file,\n        });\n    };\n\n    private readonly onSelectParent = (\n        name: \"triggeringParents\" | \"suggestedParents\",\n        opts: SelectOption | ReadonlyArray<SelectOption> | null | undefined\n    ) => {\n        let options: ReadonlyArray<SelectOption>;\n        if (!opts) {\n            options = [];\n        } else if ((opts as ReadonlyArray<SelectOption>).length === undefined) {\n            options = [opts as SelectOption];\n        } else {\n            options = opts as ReadonlyArray<SelectOption>;\n        }\n        this.setState((state) => {\n            return {\n                ...state,\n                [name]: options.map((o) => {\n                    return o.value;\n                }),\n            };\n        });\n    };\n\n    private readonly onLinkedRangesChange = (\n        trigger: IProduct,\n        rangeIndex: number,\n        opts: SelectOption | ReadonlyArray<SelectOption> | null | undefined\n    ) => {\n        let option: SelectOption | null = null;\n        if (_isSelectOption(opts)) {\n            option = opts;\n        } else if (_isSelectOptionArray(opts)) {\n            throw new Error(\n                \"Can not link multiple ranges to a single trigger parent\"\n            );\n        }\n        this.setState((state) => {\n            const linkedRanges = {\n                ...state.linkedRanges,\n            };\n            if (option) {\n                if (!linkedRanges[trigger.id]) {\n                    linkedRanges[trigger.id] = [];\n                }\n                linkedRanges[trigger.id][rangeIndex] = {\n                    ...(linkedRanges[trigger.id][rangeIndex] || {}),\n                    rangeID: option.value,\n                    quantity: 1,\n                };\n            } else {\n                delete linkedRanges[trigger.id][rangeIndex];\n                linkedRanges[trigger.id] = linkedRanges[trigger.id].filter(\n                    (r) => !!r\n                );\n                if (linkedRanges[trigger.id].length <= 0) {\n                    delete linkedRanges[trigger.id];\n                }\n            }\n            return { ...state, linkedRanges: linkedRanges };\n        });\n    };\n\n    private readonly onLinkedRangesQuantityChange = (\n        trigger: IProduct,\n        rangeIndex: number,\n        opts: SelectOption | ReadonlyArray<SelectOption> | null | undefined\n    ) => {\n        let option: SelectOption = { value: 1, label: \"1\" };\n        if (_isSelectOption(opts)) {\n            option = opts;\n        } else if (_isSelectOptionArray(opts)) {\n            throw new Error(\n                \"Can not link multiple quantities to a single range parent\"\n            );\n        }\n        this.setState((state) => {\n            const linkedRanges = {\n                ...state.linkedRanges,\n            };\n            if (\n                linkedRanges[trigger.id] &&\n                linkedRanges[trigger.id][rangeIndex]\n            ) {\n                linkedRanges[trigger.id][rangeIndex] = {\n                    ...linkedRanges[trigger.id][rangeIndex],\n                    quantity: option.value,\n                };\n            }\n            return { ...state, linkedRanges: linkedRanges };\n        });\n    };\n\n    private readonly onLinkedProductsChange = (\n        trigger: IProduct,\n        suggestParent: IProduct,\n        opts: SelectOption | ReadonlyArray<SelectOption> | null | undefined\n    ) => {\n        let options: ReadonlyArray<SelectOption>;\n        if (!opts) {\n            options = [];\n        } else if (_isSelectOption(opts)) {\n            options = [opts];\n        } else {\n            options = opts;\n        }\n        const ids = options.map((o) => {\n            return o.value;\n        });\n        this.setState((state) => {\n            const oldIDs = (state.linkedProducts[trigger.id] || []).filter(\n                (sid) => {\n                    const suggestion = this.getProduct(sid);\n                    return (\n                        suggestion.id !== suggestParent.id &&\n                        suggestion.parent !== suggestParent.id\n                    );\n                }\n            );\n            const newIDs = oldIDs.concat(ids).filter((id, i, _ids) => {\n                return _ids.indexOf(id) === i;\n            });\n            const linkedProducts = {\n                ...state.linkedProducts,\n                [trigger.id]: newIDs,\n            };\n            return { ...state, linkedProducts: linkedProducts };\n        });\n    };\n\n    private readonly onCancel = (e: React.MouseEvent<HTMLElement>) => {\n        e.preventDefault();\n        this.props.onCancel();\n    };\n\n    private readonly onSave = (e: React.FormEvent<HTMLFormElement>) => {\n        e.preventDefault();\n\n        const data: IBundleGroup = {\n            id: this.props.group ? this.props.group.id : null,\n            bundle_type: this.state.bundleType,\n            name: this.state.name,\n            description: this.state.description,\n            headline: this.state.headline,\n            image: this.props.group ? this.props.group.image : \"\",\n            newImage: this.state.clearImage ? null : this.state.image,\n            clearImage: this.state.clearImage,\n            triggering_parents: this.state.triggeringParents,\n            suggested_parents: this.state.suggestedParents,\n            concrete_bundles: [],\n            user_configurable_bundles: [],\n        };\n\n        Object.keys(this.state.linkedRanges).forEach((tID) => {\n            const triggerID = parseInt(tID, 10);\n            const tProduct = this.getProduct(triggerID);\n            if (\n                data.triggering_parents.indexOf(tProduct.id) === -1 &&\n                (!tProduct.parent ||\n                    data.triggering_parents.indexOf(tProduct.parent) === -1)\n            ) {\n                return;\n            }\n            const linkedRanges = this.state.linkedRanges[triggerID];\n            linkedRanges.forEach(({ rangeID, quantity }) => {\n                if (!rangeID || !quantity) {\n                    return;\n                }\n                let preExistingBundle: IUserConfigurableBundle | undefined =\n                    undefined;\n                if (this.props.group) {\n                    preExistingBundle =\n                        this.props.group.user_configurable_bundles.find((b) => {\n                            return (\n                                b.triggering_product === triggerID &&\n                                b.suggested_range === rangeID\n                            );\n                        });\n                }\n                data.user_configurable_bundles.push({\n                    id: preExistingBundle ? preExistingBundle.id : null,\n                    triggering_product: triggerID,\n                    suggested_range: rangeID,\n                    quantity: quantity,\n                });\n            });\n        });\n\n        Object.keys(this.state.linkedProducts).forEach((tID) => {\n            const triggerID = parseInt(tID, 10);\n            const tProduct = this.getProduct(triggerID);\n            if (\n                data.triggering_parents.indexOf(tProduct.id) === -1 &&\n                (!tProduct.parent ||\n                    data.triggering_parents.indexOf(tProduct.parent) === -1)\n            ) {\n                return;\n            }\n\n            let preExistingBundle: IConcreteBundle | undefined = undefined;\n            if (this.props.group) {\n                preExistingBundle = this.props.group.concrete_bundles.find(\n                    (b) => {\n                        return b.triggering_product === triggerID;\n                    }\n                );\n            }\n\n            const suggestionIDs = this.state.linkedProducts[triggerID].filter(\n                (sID) => {\n                    const sProduct = this.getProduct(sID);\n                    return (\n                        data.suggested_parents.indexOf(sProduct.id) !== -1 ||\n                        (sProduct.parent &&\n                            data.suggested_parents.indexOf(sProduct.parent) !==\n                                -1)\n                    );\n                }\n            );\n\n            if (suggestionIDs.length <= 0) {\n                return;\n            }\n\n            data.concrete_bundles.push({\n                id: preExistingBundle ? preExistingBundle.id : null,\n                triggering_product: triggerID,\n                suggested_products: suggestionIDs,\n            });\n        });\n\n        this.props.onSave(data);\n    };\n\n    private readonly onClearImage = (e: React.FormEvent<HTMLInputElement>) => {\n        this.setState({\n            clearImage: e.currentTarget.checked,\n        });\n    };\n\n    private readonly getProduct = (productID: number) => {\n        return this.productIdx[productID];\n    };\n\n    componentWillReceiveProps(nextProps: IProps) {\n        this.fillProductIdx(nextProps.products);\n    }\n\n    private fillProductIdx(products: IProduct[]) {\n        this.productIdx = {};\n        products.forEach((p) => {\n            this.productIdx[p.id] = p;\n        });\n    }\n\n    render() {\n        return (\n            <form className=\"row bundle-group-edit\" onSubmit={this.onSave}>\n                <BundleGroupMetaFields\n                    bundleTypeChoices={this.props.bundleTypeChoices}\n                    group={this.props.group}\n                    isSaving={this.props.isSaving}\n                    errors={this.props.errors}\n                    bundleType={this.state.bundleType}\n                    name={this.state.name}\n                    headline={this.state.headline}\n                    description={this.state.description}\n                    image={this.state.image}\n                    clearImage={this.state.clearImage}\n                    onEdit={this.onEdit}\n                    onSelectImage={this.onSelectImage}\n                    onClearImage={this.onClearImage}\n                />\n                <ParentProductsEditForm\n                    products={this.props.products}\n                    isSaving={this.props.isSaving}\n                    errors={this.props.errors}\n                    triggeringParents={this.state.triggeringParents}\n                    suggestedParents={this.state.suggestedParents}\n                    onSelectParent={this.onSelectParent}\n                />\n                <UserConfigurableBundles\n                    ranges={this.props.ranges}\n                    isSaving={this.props.isSaving}\n                    triggeringParents={this.state.triggeringParents}\n                    linkedRanges={this.state.linkedRanges}\n                    getProduct={this.getProduct}\n                    onLinkedRangesChange={this.onLinkedRangesChange}\n                    onLinkedRangeQuantityChange={\n                        this.onLinkedRangesQuantityChange\n                    }\n                />\n                <ConcreteBundles\n                    products={this.props.products}\n                    isSaving={this.props.isSaving}\n                    triggeringParents={this.state.triggeringParents}\n                    suggestedParents={this.state.suggestedParents}\n                    linkedProducts={this.state.linkedProducts}\n                    getProduct={this.getProduct}\n                    onLinkedProductsChange={this.onLinkedProductsChange}\n                />\n                <BundleGroupEditFormActions onCancel={this.onCancel} />\n            </form>\n        );\n    }\n}\n\nexport default BundleGroupEditForm;\n","import React from \"react\";\nimport {\n    IBundleGroup,\n    IProduct,\n    IRange,\n    IDRFSelectOptions,\n} from \"../../utils/models.interfaces\";\n\nexport interface IProps {\n    bundleTypeChoices: IDRFSelectOptions;\n    group: IBundleGroup;\n    products: IProduct[];\n    ranges: IRange[];\n    onEdit: (group: IBundleGroup) => void;\n    onDelete: (group: IBundleGroup) => void;\n}\n\nexport interface IState {}\n\nclass BundleGroupTableRow extends React.PureComponent<IProps, IState> {\n    private buildGroupActions() {\n        const self = this;\n        const onEdit = function (e: React.MouseEvent<HTMLAnchorElement>) {\n            e.preventDefault();\n            self.props.onEdit(self.props.group);\n        };\n        const onDelete = function (e: React.MouseEvent<HTMLAnchorElement>) {\n            e.preventDefault();\n            const msgFormat = gettext(\n                \"Are you sure you want to delete this bundle group (%(name)s) and all its associated bundles?\"\n            );\n            const data = {\n                name: self.props.group.name,\n            };\n            const msg = interpolate(msgFormat, data, true);\n            if (confirm(msg)) {\n                self.props.onDelete(self.props.group);\n            }\n        };\n        return (\n            <div className=\"btn-toolbar\">\n                <div className=\"dropdown\">\n                    <button\n                        className=\"btn btn-secondary dropdown-toggle\"\n                        type=\"button\"\n                        data-toggle=\"dropdown\"\n                        aria-haspopup=\"true\"\n                        aria-expanded=\"false\"\n                    >\n                        {gettext(\"Actions\")} <span className=\"caret\"></span>\n                    </button>\n                    <ul className=\"dropdown-menu dropdown-menu-right\">\n                        <a className=\"dropdown-item\" onClick={onEdit}>\n                            {gettext(\"Edit\")}\n                        </a>\n                        <a className=\"dropdown-item\" onClick={onDelete}>\n                            {gettext(\"Delete\")}\n                        </a>\n                    </ul>\n                </div>\n            </div>\n        );\n    }\n\n    private buildProductList(productIDs: number[]) {\n        const products = this.props.products.filter((p) => {\n            return productIDs.indexOf(p.id) !== -1;\n        });\n        return (\n            <ul>\n                {products.map((p) => {\n                    return (\n                        <li key={p.id}>\n                            <a href={p.dashboard_url}>{p.title}</a>\n                        </li>\n                    );\n                })}\n            </ul>\n        );\n    }\n\n    private buildRangeList() {\n        const rangeIDs = this.props.group.user_configurable_bundles.map(\n            (bundle) => bundle.suggested_range\n        );\n        const ranges = this.props.ranges.filter((r) => {\n            return rangeIDs.includes(r.id);\n        });\n        return (\n            <ul>\n                {ranges.map((r) => {\n                    return (\n                        <li key={r.id}>\n                            <a href={r.dashboard_url}>{r.name}</a>\n                        </li>\n                    );\n                })}\n            </ul>\n        );\n    }\n\n    render() {\n        const self = this;\n        const bundleType = this.props.bundleTypeChoices.find((choice) => {\n            return choice.value === self.props.group.bundle_type;\n        });\n        let suggestedProducts: JSX.Element | null = null;\n        let suggestedRanges: JSX.Element | null = null;\n        if (this.props.group.suggested_parents) {\n            suggestedProducts = (\n                <>\n                    <em>{gettext(\"Products:\")}</em>\n                    {this.buildProductList(this.props.group.suggested_parents)}\n                </>\n            );\n        }\n        if (this.props.group.user_configurable_bundles.length > 0) {\n            suggestedRanges = (\n                <>\n                    <em>{gettext(\"Ranges:\")}</em>\n                    {this.buildRangeList()}\n                </>\n            );\n        }\n        return (\n            <tr key={`${this.props.group.id}`}>\n                <td>{this.props.group.name}</td>\n                <td>{bundleType ? bundleType.display_name : \"\"}</td>\n                <td>\n                    <img\n                        src={this.props.group.image || undefined}\n                        width={100}\n                    />\n                </td>\n                <td>\n                    {this.buildProductList(this.props.group.triggering_parents)}\n                </td>\n                <td>\n                    {suggestedProducts}\n                    {suggestedRanges}\n                </td>\n                <td>{this.buildGroupActions()}</td>\n            </tr>\n        );\n    }\n}\n\nexport default BundleGroupTableRow;\n","import React from \"react\";\nimport lunr from \"lunr\";\nimport Modal from \"react-modal\";\nimport {\n    getBundleTypeChoices,\n    listBundleGroups,\n    listProducts,\n    listRanges,\n    saveBundleGroup,\n    deleteBundleGroup,\n} from \"../utils/api\";\nimport {\n    IBundleGroup,\n    IProduct,\n    IRange,\n    IDRFSelectOptions,\n} from \"../utils/models.interfaces\";\nimport BundleGroupSearchForm from \"./molecules/BundleGroupSearchForm\";\nimport BundleGroupEditForm from \"./molecules/BundleGroupEditForm\";\nimport BundleGroupTableRow from \"./molecules/BundleGroupTableRow\";\n\nimport \"./BundleGroupTable.scss\";\n\nModal.setAppElement(\"#bundlegroup-table\");\n\nconst modalStyles = {\n    overlay: {\n        backgroundColor: \"rgba(51, 51, 51, 0.8)\",\n        zIndex: 2000,\n    },\n    content: {\n        top: \"50%\",\n        left: \"50%\",\n        right: \"auto\",\n        bottom: \"auto\",\n        marginRight: \"-50%\",\n        transform: \"translate(-50%, -50%)\",\n        minWidth: \"800px\",\n        maxWidth: \"1000px\",\n        maxHeight: \"90%\",\n    },\n};\n\nexport interface IProps {\n    bundleGroupURL: string;\n    concreteBundleURL: string;\n    concreteBundleProductChoiceURL: string;\n    userConfigurableBundleURL: string;\n    userConfigurableBundleRangeChoiceURL: string;\n}\n\nexport interface IState {\n    bundleTypeChoices: IDRFSelectOptions;\n    groups: IBundleGroup[];\n    products: IProduct[];\n    ranges: IRange[];\n    searchText: string;\n    selectedGroup: number | null;\n    editModalOpen: boolean;\n    isSaving: boolean;\n    isLoading: boolean;\n    formErrors: {\n        name?: string[];\n        description?: string[];\n        image?: string[];\n        triggering_parents?: string[];\n        suggested_parents?: string[];\n    };\n}\n\nclass BundleGroupTable extends React.Component<IProps, IState> {\n    idx: lunr.Index | undefined;\n\n    state: IState = {\n        bundleTypeChoices: [],\n        groups: [],\n        products: [],\n        ranges: [],\n        searchText: \"\",\n        selectedGroup: null,\n        editModalOpen: false,\n        isSaving: false,\n        isLoading: true,\n        formErrors: {},\n    };\n\n    private readonly onSearchTextChange = (text: string) => {\n        this.setState({\n            searchText: text,\n        });\n    };\n\n    private readonly onCreate = (e: React.MouseEvent<HTMLElement>) => {\n        e.preventDefault();\n        this.openCreateModal();\n    };\n\n    private readonly onOpenEditModal = (group: IBundleGroup) => {\n        this.setState({\n            selectedGroup: group.id,\n            formErrors: {},\n            editModalOpen: true,\n        });\n    };\n\n    private readonly onCloseModal = () => {\n        this.setState({\n            selectedGroup: null,\n            formErrors: {},\n            editModalOpen: false,\n        });\n    };\n\n    private readonly onSaveBundleGroup = async (data: IBundleGroup) => {\n        this.setState({ isSaving: true });\n        try {\n            await saveBundleGroup(this.props.bundleGroupURL, data);\n            await this.loadData();\n            this.setState({ isSaving: false });\n            this.onCloseModal();\n        } catch (err) {\n            this.setState({\n                isSaving: false,\n                /* tslint:disable-next-line */\n                formErrors: (err as any).response.body,\n            });\n        }\n    };\n\n    private readonly onDeleteBundleGroup = async (data: IBundleGroup) => {\n        await deleteBundleGroup(this.props.bundleGroupURL, data);\n        return this.loadData();\n    };\n\n    componentDidMount() {\n        this.loadData();\n    }\n\n    private async loadData() {\n        this.setState({ isLoading: true });\n        const loading = Promise.all([\n            getBundleTypeChoices(this.props.bundleGroupURL),\n            listBundleGroups(this.props.bundleGroupURL),\n            listProducts(this.props.concreteBundleProductChoiceURL),\n            listRanges(this.props.userConfigurableBundleRangeChoiceURL),\n        ]);\n        const [choices, groups, products, ranges] = await loading;\n        this.setBundleTypeChoices(choices);\n        this.setGroups(groups);\n        this.setProducts(products);\n        this.setRanges(ranges);\n        this.setState({ isLoading: false });\n    }\n\n    private openCreateModal() {\n        this.setState({\n            selectedGroup: null,\n            formErrors: {},\n            editModalOpen: true,\n        });\n    }\n\n    private setGroups(groups: IBundleGroup[]) {\n        // Update the search index\n        this.idx = lunr(function () {\n            const builder = this;\n            builder.ref(\"id\");\n            builder.field(\"name\");\n            builder.field(\"description\");\n            groups.forEach((g) => {\n                builder.add(g);\n            });\n        });\n        // Update the component state\n        this.setState({\n            groups: groups,\n        });\n    }\n\n    private setBundleTypeChoices(choices: IDRFSelectOptions) {\n        this.setState({\n            bundleTypeChoices: choices,\n        });\n    }\n\n    private setProducts(products: IProduct[]) {\n        this.setState({\n            products: products,\n        });\n    }\n\n    private setRanges(ranges: IRange[]) {\n        this.setState({\n            ranges: ranges,\n        });\n    }\n\n    private getSearchResults(searchText: string) {\n        if (!this.idx) {\n            return [];\n        }\n        const results = this.idx.search(searchText);\n        return results\n            .map((result) => {\n                const gid = parseInt(result.ref, 10);\n                return this.state.groups.find((g) => {\n                    return g.id === gid;\n                });\n            })\n            .filter((group): group is IBundleGroup => {\n                return !!group;\n            });\n    }\n\n    private buildGroupRows() {\n        const searchText = this.state.searchText.trim();\n        const results = searchText\n            ? this.getSearchResults(searchText)\n            : this.state.groups;\n        const numTableColumns = 6;\n        if (this.state.isLoading) {\n            return (\n                <tr>\n                    <td colSpan={numTableColumns}>\n                        <em>{gettext(\"Loading…\")}</em>\n                    </td>\n                </tr>\n            );\n        }\n        if (results.length <= 0) {\n            const msg = searchText\n                ? interpolate(\n                      gettext(\n                          \"No bundle groups found for search: %(searchText)s\"\n                      ),\n                      { searchText: searchText },\n                      true\n                  )\n                : gettext(\"No bundle groups found.\");\n            return (\n                <tr>\n                    <td colSpan={numTableColumns}>{msg}</td>\n                </tr>\n            );\n        }\n        return results.map((group) => {\n            return (\n                <BundleGroupTableRow\n                    key={`${group.id}`}\n                    bundleTypeChoices={this.state.bundleTypeChoices}\n                    group={group}\n                    products={this.state.products}\n                    ranges={this.state.ranges}\n                    onEdit={this.onOpenEditModal}\n                    onDelete={this.onDeleteBundleGroup}\n                />\n            );\n        });\n    }\n\n    private buildEditModal() {\n        const group = this.state.groups.find((g) => {\n            return g.id === this.state.selectedGroup;\n        });\n        return (\n            <Modal\n                contentLabel={gettext(\"Edit Bundle Group\")}\n                style={modalStyles}\n                isOpen={this.state.editModalOpen}\n            >\n                <BundleGroupEditForm\n                    bundleTypeChoices={this.state.bundleTypeChoices}\n                    group={group || null}\n                    products={this.state.products}\n                    ranges={this.state.ranges}\n                    isSaving={this.state.isSaving}\n                    errors={this.state.formErrors}\n                    onCancel={this.onCloseModal}\n                    onSave={this.onSaveBundleGroup}\n                />\n            </Modal>\n        );\n    }\n\n    render() {\n        return (\n            <div>\n                <div className=\"page-header\">\n                    <a\n                        className=\"btn btn-primary float-right\"\n                        onClick={this.onCreate}\n                    >\n                        <i className=\"fas fa-plus-circle\"></i>{\" \"}\n                        {gettext(\"Create new bundle group\")}\n                    </a>\n                    <h1>{gettext(\"Bundle Groups\")}</h1>\n                </div>\n                <div className=\"table-header\">\n                    <h3>\n                        <i className=\"fas fa-search\"></i>\n                        {gettext(\"Search Bundle Groups\")}\n                    </h3>\n                </div>\n                <BundleGroupSearchForm\n                    searchText={this.state.searchText}\n                    onChange={this.onSearchTextChange}\n                />\n\n                <table className=\"table table-striped table-bordered\">\n                    <tbody>\n                        <tr>\n                            <th>{gettext(\"Name\")}</th>\n                            <th>{gettext(\"Type\")}</th>\n                            <th>{gettext(\"Image\")}</th>\n                            <th>{gettext(\"Triggers\")}</th>\n                            <th>{gettext(\"Suggestions\")}</th>\n                            <th>{gettext(\"Actions\")}</th>\n                        </tr>\n                        {this.buildGroupRows()}\n                    </tbody>\n                </table>\n\n                {this.buildEditModal()}\n            </div>\n        );\n    }\n}\n\nexport default BundleGroupTable;\n","// Load polyfills needed for IE11 and other old browsers\nimport \"core-js/stable\";\nimport \"regenerator-runtime/runtime\";\nimport React from \"react\";\nimport { render } from \"react-dom\";\nimport BundleGroupTable from \"./bundles/BundleGroupTable\";\n\ntype INamedInterpolationData = { [key: string]: string };\ntype IPositionalInterpolationData = string[];\ntype IInterpolateFn = ((\n    fmt: string,\n    obj: IPositionalInterpolationData,\n    named?: false\n) => string) &\n    ((fmt: string, obj: INamedInterpolationData, named: true) => string);\ninterface IDjango {\n    readonly gettext: (msgid: string) => string;\n    readonly ngettext: (\n        singular: string,\n        plural: string,\n        count: number\n    ) => string;\n    readonly gettext_noop: (msgid: string) => string;\n    readonly pgettext: (context: string, msgid: string) => string;\n    readonly npgettext: (\n        context: string,\n        singular: string,\n        plural: string,\n        count: number\n    ) => string;\n    readonly interpolate: IInterpolateFn;\n\n    readonly pluralidx: (count: number) => number;\n\n    readonly jsi18n_initialized: boolean;\n    readonly catalog: {\n        [msgid: string]: string;\n    };\n    readonly formats: {\n        [msgid: string]: string | string[];\n    };\n    readonly get_format: (formatType: string) => string | string[];\n}\n\ndeclare global {\n    // Django i18n functions\n    const django: IDjango;\n    const pluralidx: IDjango[\"pluralidx\"];\n    const gettext: IDjango[\"gettext\"];\n    const ngettext: IDjango[\"ngettext\"];\n    const gettext_noop: IDjango[\"gettext_noop\"];\n    const pgettext: IDjango[\"pgettext\"];\n    const npgettext: IDjango[\"npgettext\"];\n    const interpolate: IDjango[\"interpolate\"];\n    const get_format: IDjango[\"get_format\"];\n}\n\nconst main = function () {\n    const elem = document.querySelector(\"#bundlegroup-table\") as HTMLDivElement;\n    const bundleGroupURL = elem.dataset.bundlegroupApi || \"\";\n    const concreteBundleURL = elem.dataset.concretebundleApi || \"\";\n    const concreteBundleProductChoiceURL =\n        elem.dataset.concretebundleProductChoiceApi || \"\";\n    const userConfigurableBundleURL =\n        elem.dataset.userconfigurablebundleApi || \"\";\n    const userConfigurableBundleRangeChoiceURL =\n        elem.dataset.userconfigurablebundleRangeChoiceApi || \"\";\n    const component = (\n        <BundleGroupTable\n            bundleGroupURL={bundleGroupURL}\n            concreteBundleURL={concreteBundleURL}\n            concreteBundleProductChoiceURL={concreteBundleProductChoiceURL}\n            userConfigurableBundleURL={userConfigurableBundleURL}\n            userConfigurableBundleRangeChoiceURL={\n                userConfigurableBundleRangeChoiceURL\n            }\n        />\n    );\n    render(component, elem);\n};\n\nmain();\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t678: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkdjango_oscar_bundles\"] = self[\"webpackChunkdjango_oscar_bundles\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [736], function() { return __webpack_require__(2031); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["deferred","leafPrototypes","getProto","check","result","isLeft","Error","failure","left","join","right","nullable","type","t","optional","FileType","constructor","super","f","File","u","c","this","is","_tag","file","DRFSelectOption","value","display_name","DRFSelectOptions","BaseField","fieldType","required","read_only","label","help_text","IntegerField","BooleanField","DatetimeField","StringField","max_length","ChoiceField","choices","Field","DRFOptionsResponse","name","description","renders","parses","actions","GET","HEAD","OPTIONS","POST","PUT","PATCH","DELETE","Product","id","dashboard_url","product_class","title","slug","is_parent","is_child","parent","children","Products","Range","Ranges","ConcreteBundle","triggering_product","suggested_products","UserConfigurableBundle","suggested_range","quantity","BundleGroup","bundle_type","headline","image","newImage","clearImage","triggering_parents","suggested_parents","concrete_bundles","user_configurable_bundles","BundleGroups","CSRF_HEADER","getCSRFToken","cookies","fetchData","endpoint","__awaiter","fetch","method","headers","Accept","listBundleGroups","resp","decode","body","listProducts","listRanges","BundleGroupSearchForm","React","render","self","className","onSubmit","e","preventDefault","htmlFor","gettext","props","searchText","onChange","currentTarget","onClick","BundleGroupMetaFields","buildFormGroupClasses","field","fieldErrors","errors","classes","length","classNames","buildErrors","map","errorMsg","i","key","buildCurrentImage","group","pathParts","split","fileName","target","href","checked","onClearImage","disabled","isSaving","bundleType","onEdit","bundleTypeChoices","choice","maxLength","cols","rows","onSelectImage","ParentProductsEditForm","getParentProductSelectOptions","products","filter","p","sort","a","b","localeCompare","extras","forEach","parentProductSelectOptions","Select","isMulti","o","triggeringParents","includes","onSelectParent","bind","options","isDisabled","suggestedParents","helpText","UserConfigurableBundles","getRangeSelectOptions","ranges","getQuantitySelectOptions","quantityOptions","push","buildBundleRows","triggerParent","suggestOptions","linkedRanges","rangeID","range","isClearable","onLinkedRangesChange","onLinkedRangeQuantityChange","buildParentRows","triggerParentID","getProduct","ConcreteBundles","getChildProductSelectOptions","suggestParent","triggerOptions","trigger","selectValue","linkedProducts","sid","suggestion","onLinkedProductsChange","parentCombinations","triggerID","suggestionID","Object","values","combination","BundleGroupEditFormActions","onCancel","_isSelectOptionArray","opts","undefined","_isSelectOption","BundleGroupEditForm","setState","state","assign","files","rangeIndex","option","r","onLinkedRangesQuantityChange","ids","newIDs","concat","_ids","indexOf","onSave","data","keys","tID","parseInt","tProduct","_ref","preExistingBundle","find","suggestionIDs","sID","sProduct","productID","productIdx","bundle","fillProductIdx","componentWillReceiveProps","nextProps","BundleGroupTableRow","buildGroupActions","msgFormat","msg","interpolate","confirm","onDelete","buildProductList","productIDs","buildRangeList","rangeIDs","suggestedProducts","suggestedRanges","src","width","Modal","modalStyles","overlay","backgroundColor","zIndex","content","top","bottom","marginRight","transform","minWidth","maxWidth","maxHeight","BundleGroupTable","groups","selectedGroup","editModalOpen","isLoading","formErrors","onSearchTextChange","text","onCreate","openCreateModal","onOpenEditModal","onCloseModal","onSaveBundleGroup","saveBundleGroup","_saveBundleGroupData","url","JSON","stringify","_saveBundleGroupImage","Promise","resolve","formData","FormData","append","bundleGroupURL","loadData","err","response","onDeleteBundleGroup","deleteBundleGroup","componentDidMount","loading","all","json","concreteBundleProductChoiceURL","userConfigurableBundleRangeChoiceURL","setBundleTypeChoices","setGroups","setProducts","setRanges","idx","lunr","builder","ref","g","add","getSearchResults","search","gid","buildGroupRows","trim","results","colSpan","buildEditModal","contentLabel","style","isOpen","elem","document","querySelector","dataset","bundlegroupApi","concreteBundleURL","concretebundleApi","concretebundleProductChoiceApi","userConfigurableBundleURL","userconfigurablebundleApi","userconfigurablebundleRangeChoiceApi","component","main","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","__webpack_modules__","call","m","O","chunkIds","fn","priority","notFulfilled","Infinity","fulfilled","j","every","splice","n","getter","__esModule","d","getPrototypeOf","obj","__proto__","mode","then","ns","create","def","current","getOwnPropertyNames","definition","defineProperty","enumerable","get","globalThis","Function","window","prop","prototype","hasOwnProperty","Symbol","toStringTag","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","some","chunkLoadingGlobal","__webpack_exports__"],"sourceRoot":""}
